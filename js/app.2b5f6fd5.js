(function(){var e={9916:function(e,t,i){"use strict";var s=i(9242),a=i(3396);const o={id:"app",class:"Router wrapper"};function n(e,t,i,n,l,r){const c=(0,a.up)("router-view"),d=(0,a.up)("van-action-sheet"),h=(0,a.up)("van-share-sheet"),m=(0,a.up)("ActionSheet");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a.Wm)(c,null,{default:(0,a.w5)((({Component:t})=>[(0,a.Wm)(s.uT,{name:l.transitionName},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)(a.Ob,null,[e.$route.meta.keepAlive?((0,a.wg)(),(0,a.j4)((0,a.LL)(t),{key:e.$route.path})):(0,a.kq)("",!0)],1024))])),_:2},1032,["name"]),(0,a.Wm)(s.uT,{name:l.transitionName},{default:(0,a.w5)((()=>[e.$route.meta.keepAlive?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)((0,a.LL)(t),{key:0}))])),_:2},1032,["name"])])),_:1}),(0,a.Wm)(d,{show:l.show,"onUpdate:show":t[0]||(t[0]=e=>l.show=e),actions:l.actions,onSelect:r.onSelect,"cancel-text":"取消",title:"你认为此内容有什么问题？",closeable:!1,"close-on-click-action":""},null,8,["show","actions","onSelect"]),(0,a.Wm)(h,{show:l.showShare,"onUpdate:show":t[1]||(t[1]=e=>l.showShare=e),title:"立即分享",options:l.options,onSelect:r.shareSelect},null,8,["show","options","onSelect"]),(0,a.Wm)(d,{show:l.actSheetShow,"onUpdate:show":t[3]||(t[3]=e=>l.actSheetShow=e),"cancel-text":"取消",title:"操作",closeable:!1},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)(m,{articleId:l.articleId,key:l.key,onCloseAction:t[2]||(t[2]=e=>l.actSheetShow=!1)},null,8,["articleId"]))])),_:1},8,["show"])])}var l=i(9733),r=i(6431),c=i(5743),d=i.n(c),h=i(893),m=i.n(h);i(8212);d().locale("zh-cn"),d().extend(m());var u=d(),p=i(253);const g={class:"ActionSheet wrapper"},w=(0,a.Uk)("加载中...");function f(e,t,i,s,o,n){const l=(0,a.up)("van-loading"),r=(0,a.up)("van-grid-item"),c=(0,a.up)("van-grid");return(0,a.wg)(),(0,a.iD)("div",g,[o.loading?((0,a.wg)(),(0,a.j4)(l,{key:0,size:"1rem",vertical:"",style:{"padding-top":"1rem"}},{default:(0,a.w5)((()=>[w])),_:1})):((0,a.wg)(),(0,a.j4)(c,{key:1,clickable:"","column-num":4,border:!1,"icon-size":"1rem"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{icon:"warning",text:"举报","icon-color":"grey",onClick:n.report},null,8,["onClick"]),o.delShow?((0,a.wg)(),(0,a.j4)(r,{key:0,icon:"delete",text:"删除","icon-color":"grey",onClick:t[0]||(t[0]=e=>n.delArticle(i.articleId))})):(0,a.kq)("",!0),o.editShow?((0,a.wg)(),(0,a.j4)(r,{key:1,icon:"edit",text:"编辑","icon-color":"grey",onClick:t[1]||(t[1]=e=>n.editArticle(i.articleId))})):(0,a.kq)("",!0)])),_:1}))])}var v={props:{articleId:{type:Number}},inject:["report"],data(){return{loading:!0,authorId:-1,type:null,delShow:!1,editShow:!1}},methods:{delArticle(e){r.V.confirm({title:"确定吗",message:"关于此文章的一切都会消失，仍旧如此吗"}).then((()=>{l.F.loading({message:"删除中...",overlay:!0,loadingType:"spinner",duration:0});const t={articleId:e};this.$axios.get("delArticle",{params:t}).then((e=>{l.F.clear(),l.F.success({message:"删除成功！",overlay:!0,onClose:()=>{this.$router.back()}})}))})).catch((()=>{}))},editArticle(){this.isSubmit?this.$router.push({path:"/submit",query:{articleId:this.articleId}}):this.$router.push({path:"/post",query:{articleId:this.articleId}}),this.$emit("closeAction")},init(){if(this.articleId&&this.$store.state.user){const e={articleId:this.articleId};this.$axios.get("articleItemGet",{params:e}).then((e=>{this.isSubmit=e[0].isSubmit,e[0].authorId===this.$store.state.user.userId&&(this.delShow=!0,this.editShow=!0),this.type=e[0].isSubmit,this.loading=!1}))}else this.loading=!1}},mounted(){this.init()}},k=i(89);const y=(0,k.Z)(v,[["render",f]]);var b=y,C={name:"App",components:{ActionSheet:b},provide(){return{reload:this.reload,getId:this.getId,before:this.before,isExistChecked:this.isExistChecked,untilMin:this.untilMin,goPersonal:this.goPersonal,goArticle:this.goArticle,minHeight:this.minHeight,developing:this.developing,toLogin:this.toLogin,report:this.report,share:this.share,actionShow:this.actionShow,avatarGet:this.avatarGet,loadingIcon:this.loadingIcon}},data(){return{show:!1,actions:[{name:"发布 违法违规 内容",color:"#ee0a24"},{name:"发布 色情低俗 内容",color:"#ee0a24"},{name:"发布 有害信息 内容",color:"#ee0a24"},{name:"发布 垃圾广告 内容",color:"#ee0a24"},{name:"发布 钱物交易 内容",color:"#ee0a24"},{name:"发布 辱骂/引战 内容",color:"#ee0a24"},{name:"发布 无意义 内容",color:"#ee0a24"},{name:"发布 侵权/抄袭 内容",color:"#ee0a24"},{name:"发布 侵犯隐私 内容",color:"#ee0a24"},{name:"发布 血腥/暴力 内容",color:"#ee0a24"},{name:"发布 令人羡慕/嫉妒 内容",color:"#ee0a24"}],options:[[{name:"微信",icon:"wechat"},{name:"朋友圈",icon:"wechat-moments"},{name:"微博",icon:"weibo"},{name:"QQ",icon:"qq"}],[{name:"复制链接",icon:"link"},{name:"分享海报",icon:"poster"},{name:"二维码",icon:"qrcode"},{name:"小程序码",icon:"weapp-qrcode"}]],actSheetShow:!1,key:-1,showShare:!1,transitionName:"",include:[],backAble:!0,myHistory:{},backTwice:!0,articleId:null}},methods:{actionShow(e){this.articleId=e,this.key=this.reload(),this.actSheetShow=!0},avatarGet(e){return e&&0!==e.length?this.$store.state.URL+"upload/avatar/"+e:i(7205)},loadingIcon(){return i(7205)},report(){this.show=!0},share(){this.showShare=!0},onSelect(){l.F.success("举报成功!"),this.actSheetShow=!1},shareSelect(){l.F.success("到此为止!"),this.showShare=!1},developing(){(0,l.F)("敬请期待！")},toLogin(){r.V.confirm({title:"未登录",message:"你必须要登录才能使用此功能，是否前去登录?"}).then((()=>{this.$router.replace("/login")})).catch((()=>{}))},minHeight(e,t){this.$nextTick((()=>{const i=(0,p.EL)(e);return t?{"min-height":`calc(100vh - ${i.top+"px"})`}:{"min-height":`calc(100vh - 50px - ${i.top+"px"})`}}))},untilMin(e){return u(e).format("MM/DD HH:mm")},before(e){const t=u(e),i=u().valueOf(),s=t.diff(i,"day",!0);return s<=-7?u(e).format("YYYY/MM/DD"):u(e).fromNow()},getId(e){const t=e.split("/"),i=t[t.length-1];return i},reload(){return(new Date).getTime()},goPersonal(e){this.$router.push("/personal/"+e)},goArticle(e){this.$router.push("/articleHome/"+e)},async isExistChecked(e){return await this.$axios.get("isExistChecked",{params:{articleId:e,userId:0}}).then((e=>(e||l.F.fail({message:"文章已删除!",duration:3e3,overlay:!0,onClose:this.$router.back}),e)))},fun(){!0===this.backTwice&&(!0===this.backAble?(history.back(),this.$store.commit("setBack",!0),this.backAble=!1):(this.$store.commit("setBack",!1),this.backAble=!0))},toastShow(){(0,l.F)({message:"再按一次退出应用",position:"bottom",duration:2e3})}},watch:{$route(e,t){!0!==t.meta.keepAlive||t.meta.spe?this.backTwice=!1:this.backTwice=!0,100===e.meta.index&&100===t.meta.index?this.transitionName="scale":e.meta.index>t.meta.index?this.transitionName="slide":e.meta.index<t.meta.index?this.transitionName="back":this.transitionName=""}},created(){window.toastShow=this.toastShow},mounted(){this.$store.commit("setBack",!1),window.addEventListener("popstate",this.fun,!1)}};const x=(0,k.Z)(C,[["render",n]]);var I=x,_=i(2483);const W={class:"Admin wrapper pt"};function L(e,t,i,s,o,n){const l=(0,a.up)("van-nav-bar"),r=(0,a.up)("van-cell"),c=(0,a.up)("van-cell-group"),d=(0,a.up)("van-collapse-item"),h=(0,a.up)("van-collapse");return(0,a.wg)(),(0,a.iD)("div",W,[(0,a.Wm)(l,{title:"应用管理","left-text":"返回","left-arrow":"",onClickLeft:n.onClickLeft,fixed:""},null,8,["onClickLeft"]),(0,a.Wm)(h,{modelValue:o.activeNames,"onUpdate:modelValue":t[0]||(t[0]=e=>o.activeNames=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"1",title:"社区管理"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{title:"增加社区","is-link":"",to:"/comAdd"}),(0,a.Wm)(r,{title:"单元格","is-link":""})])),_:1})])),_:1}),(0,a.Wm)(d,{name:"2",title:"频道管理"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{title:"增加频道","is-link":"",to:"/chaAdd"}),(0,a.Wm)(r,{title:"单元格","is-link":""})])),_:1})])),_:1}),(0,a.Wm)(d,{name:"3",title:"审核"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{title:"文章审核","is-link":"",to:"/articlesList"}),(0,a.Wm)(r,{title:"单元格","is-link":""})])),_:1})])),_:1}),(0,a.Wm)(d,{name:"4",title:"公告管理"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{title:"公告管理","is-link":"",to:"/announceList"})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var A={name:"AdminView",data(){return{activeNames:[]}},methods:{onClickLeft(){this.$router.back()}},mounted(){}};const S=(0,k.Z)(A,[["render",L]]);var z=S,D=i(7139);const $={class:"comAdd wrapper pt"},U={class:"iconBox_edit"},F={class:"p7"},j={style:{margin:"16px"}},V={style:{margin:"16px"}},B={class:"outBox"},H={class:"iconBox"},R={class:"textBox"};function q(e,t,i,o,n,l){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-icon"),d=(0,a.up)("van-field"),h=(0,a.up)("van-switch"),m=(0,a.up)("van-checkbox"),u=(0,a.up)("van-checkbox-group"),p=(0,a.up)("van-cell-group"),g=(0,a.up)("van-button"),w=(0,a.up)("van-form"),f=(0,a.up)("van-cell"),v=(0,a.up)("van-grid-item"),k=(0,a.up)("van-grid"),y=(0,a.up)("van-popup");return(0,a.wg)(),(0,a.iD)("div",$,[(0,a.Wm)(r,{title:"增加社区","left-text":"返回","left-arrow":"",onClickLeft:l.onClickLeft,fixed:""},null,8,["onClickLeft"]),(0,a._)("div",U,[(0,a._)("div",{class:"background",style:(0,D.j5)({background:n.background})},[(0,a._)("div",{class:"foreground",style:(0,D.j5)({background:n.foreground})},[(0,a.Wm)(c,{"class-prefix":n.icon,class:"iconfont",color:n.color,size:"0.8rem"},null,8,["class-prefix","color"])],4),(0,a._)("span",F,[(0,a.wy)((0,a.Wm)(c,{name:"fire"},null,512),[[s.F8,n.isHot]]),(0,a.Uk)((0,D.zw)(n.communityName),1)])],4)]),(0,a.Wm)(w,{onSubmit:l.onSubmit},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{inset:""},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:n.icon,"onUpdate:modelValue":t[0]||(t[0]=e=>n.icon=e),name:"图标",label:"图标",placeholder:"图标",rules:[{required:!0,message:"未填写"}]},null,8,["modelValue"]),(0,a.Wm)(d,{modelValue:n.communityName,"onUpdate:modelValue":t[1]||(t[1]=e=>n.communityName=e),name:"社区名",label:"社区名",placeholder:"社区名",rules:[{required:!0,message:"未填写"}]},null,8,["modelValue"]),(0,a.Wm)(d,{modelValue:n.color,"onUpdate:modelValue":t[2]||(t[2]=e=>n.color=e),name:"图标颜色",label:"图标颜色",placeholder:"图标颜色",rules:[{required:!0,message:"未填写"}]},null,8,["modelValue"]),(0,a.Wm)(d,{modelValue:n.foreground,"onUpdate:modelValue":t[3]||(t[3]=e=>n.foreground=e),name:"前景色",label:"前景色",placeholder:"前景色",rules:[{required:!0,message:"未填写"}]},null,8,["modelValue"]),(0,a.Wm)(d,{modelValue:n.background,"onUpdate:modelValue":t[4]||(t[4]=e=>n.background=e),name:"背景色",label:"背景色",placeholder:"背景色",rules:[{required:!0,message:"未填写"}]},null,8,["modelValue"]),(0,a.Wm)(d,{name:"switch",label:"热门"},{input:(0,a.w5)((()=>[(0,a.Wm)(h,{modelValue:n.isHot,"onUpdate:modelValue":t[5]||(t[5]=e=>n.isHot=e),size:"20"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,{name:"checkboxGroup",label:"社区分类"},{input:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:n.communityClass,"onUpdate:modelValue":t[6]||(t[6]=e=>n.communityClass=e),direction:"horizontal"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.allCommunityClass,(e=>((0,a.wg)(),(0,a.j4)(m,{name:e,shape:"square",key:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,D.zw)(e),1)])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,a._)("div",j,[(0,a.Wm)(g,{round:"",block:"",color:n.editing?"red":"black","native-type":"submit"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,D.zw)(n.editing?"确定":"提交"),1)])),_:1},8,["color"])])])),_:1},8,["onSubmit"]),(0,a._)("div",V,[(0,a.Wm)(g,{round:"",block:"",color:n.editing?"green":"lightblue",onClick:l.cancelOrShow},{default:(0,a.w5)((()=>[(0,a.Uk)((0,D.zw)(n.editing?"取消":"编辑"),1)])),_:1},8,["color","onClick"])]),(0,a.Wm)(y,{show:n.show,"onUpdate:show":t[7]||(t[7]=e=>n.show=e),position:"bottom",style:{width:"100%",height:"80%"},class:"pop"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.allCommunitys,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e},[(0,a.Wm)(f,{title:e.communityClass},null,8,["title"]),(0,a.Wm)(k,{direction:"horizontal","column-num":2,clickable:"",gutter:"0.2rem"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.content,(e=>((0,a.wg)(),(0,a.j4)(v,{key:e,onClick:t=>l.comSelect(e)},{default:(0,a.w5)((()=>[(0,a._)("div",B,[(0,a._)("div",H,[(0,a._)("div",{class:"foreground",style:(0,D.j5)({background:e.foreground})},[(0,a.Wm)(c,{"class-prefix":e.icon+" iconfont",color:e.color,size:"0.6rem"},null,8,["class-prefix","color"])],4)]),(0,a._)("p",R,(0,D.zw)(e.communityName),1)])])),_:2},1032,["onClick"])))),128))])),_:2},1024)])))),128))])),_:1},8,["show"])])}var M=i(5410),T=i.n(M),N={name:"comAdd",data(){return{icon:"icon-xiugai",communityName:"",color:"",foreground:"",background:"",isHot:!0,communityClass:[],show:!1,allCommunitys:[],allCommunityClass:this.$store.state.communityClass,editing:!1,editedId:-1}},methods:{onClickLeft(){this.$router.back()},async onSubmit(){let e={icon:this.icon,communityName:this.communityName,color:this.color,foreground:this.foreground,background:this.background,isHot:this.isHot,communityClass:this.communityClass};l.F.loading({message:"提交中...",overlay:!0,loadingType:"spinner",duration:0}),this.editing?await r.V.confirm({title:"确定修改吗"}).then((async()=>{e={...e,communityId:this.editedId};let t=T().stringify(e);await this.$axios2.post("comAdd",t).then((e=>{}))})).catch((()=>{})):await r.V.confirm({title:"确定增加吗"}).then((async()=>{let t=T().stringify(e);await this.$axios2.post("comAdd",t).then((e=>{}))})).catch((()=>{})),l.F.clear(),l.F.success("成功！"),this.editing=!1},async cancelOrShow(){this.editing?this.editing=!1:(await this.communityGet(),this.show=!0)},comSelect(e){this.icon=e.icon,this.communityName=e.communityName,this.color=e.color,this.foreground=e.foreground,this.background=e.background,this.isHot=e.isHot,this.communityClass=e.communityClass.split(" "),this.editedId=e.communityId,this.show=!1,this.editing=!0},async communityGet(){const e={userId:this.$store.state.user.userId};await this.$axios.get("comGet",{params:e}).then((e=>{this.allCommunitys=this.allCommunityClass.map((t=>{let i={};return i.communityClass=t,i.content=e.filter((e=>e.communityClass.indexOf(t)>-1)),i}))}))}},mounted(){}};const G=(0,k.Z)(N,[["render",q],["__scopeId","data-v-528cf4e4"]]);var P=G;const E={class:"comAdd wrapper pt"},Y={class:"iconBox"},O={class:"p7"},Q={style:{margin:"16px"}},K=(0,a.Uk)(" 增加频道 "),Z={style:{margin:"16px"}},J=(0,a.Uk)(" 修改频道 ");function X(e,t,i,o,n,l){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-icon"),d=(0,a.up)("van-field"),h=(0,a.up)("van-cell-group"),m=(0,a.up)("van-button"),u=(0,a.up)("van-form");return(0,a.wg)(),(0,a.iD)("div",E,[(0,a.Wm)(r,{title:"增加频道","left-text":"返回","left-arrow":"",onClickLeft:l.onClickLeft,fixed:""},null,8,["onClickLeft"]),(0,a._)("div",Y,[(0,a._)("div",{class:"background",style:(0,D.j5)({background:n.background})},[(0,a._)("div",{class:"foreground",style:(0,D.j5)({background:n.foreground})},[(0,a.Wm)(c,{"class-prefix":n.icon,class:"iconfont",color:n.color,size:"0.8rem"},null,8,["class-prefix","color"])],4),(0,a._)("span",O,[(0,a.wy)((0,a.Wm)(c,{name:"fire"},null,512),[[s.F8,n.isHot]]),(0,a.Uk)((0,D.zw)(n.channelName),1)])],4)]),(0,a.Wm)(u,{onSubmit:l.onSubmit},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{inset:""},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:n.channelName,"onUpdate:modelValue":t[0]||(t[0]=e=>n.channelName=e),name:"频道名",label:"频道名",placeholder:"频道名",rules:[{required:!0,message:"未填写"}]},null,8,["modelValue"])])),_:1}),(0,a._)("div",Q,[(0,a.Wm)(m,{round:"",block:"",type:"primary","native-type":"submit"},{default:(0,a.w5)((()=>[K])),_:1})]),(0,a._)("div",Z,[(0,a.Wm)(m,{round:"",block:"",type:"primary","native-type":"submit"},{default:(0,a.w5)((()=>[J])),_:1})])])),_:1},8,["onSubmit"])])}var ee={name:"comAdd",data(){return{icon:"icon-xiugai",channelName:"频道名",color:"white",foreground:"pink",background:"red",isHot:!0}},methods:{onClickLeft(){this.$router.back()},onSubmit(){const e={channelName:this.channelName};this.$axios2.get("chaAdd",{params:e}).then((e=>{}))}},mounted(){}};const te=(0,k.Z)(ee,[["render",X],["__scopeId","data-v-0b777718"]]);var ie=te;const se=e=>((0,a.dD)("data-v-4325a7e4"),e=e(),(0,a.Cn)(),e),ae={class:"articlesList wrapper pt"},oe={key:0},ne={class:"custom-title van-multi-ellipsis--l2"},le={key:1},re={class:"custom-title van-multi-ellipsis--l2"},ce=se((()=>(0,a._)("br",null,null,-1))),de={class:"custom-title van-multi-ellipsis--l2"};function he(e,t,i,s,o,n){const l=(0,a.up)("van-nav-bar"),r=(0,a.up)("van-cell"),c=(0,a.up)("van-icon"),d=(0,a.up)("van-button"),h=(0,a.up)("van-swipe-cell");return(0,a.wg)(),(0,a.iD)("div",ae,[(0,a.Wm)(l,{title:"文章管理与审核","left-text":"返回","left-arrow":"",onClickLeft:n.onClickLeft,"right-text":o.managing?"管理":"审核",fixed:"",onClickRight:t[0]||(t[0]=e=>o.managing=!o.managing)},null,8,["onClickLeft","right-text"]),o.managing?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",oe,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.list,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.articleId},[(0,a.Wm)(r,{"is-link":"",to:"/article/"+e.articleId,label:e.updatedAt},{title:(0,a.w5)((()=>[(0,a._)("span",ne,(0,D.zw)(e.title),1)])),_:2},1032,["to","label"])])))),128))])),o.managing?((0,a.wg)(),(0,a.iD)("div",le,[(0,a.Wm)(r,{title:"在轮播"},{"right-icon":(0,a.w5)((()=>[(0,a.Wm)(c,{name:"checked",color:"blue",size:"0.5rem"})])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.list2,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.articleId},[(0,a.Wm)(h,{"before-close":n.beforeClose,"stop-propagation":"",name:e.inSwipe+"-"+e.articleId},{right:(0,a.w5)((()=>[(0,a.Wm)(d,{square:"",type:"danger",text:e.inSwipe?"下轮播":"上轮播"},null,8,["text"])])),default:(0,a.w5)((()=>[(0,a.Wm)(r,{"is-link":"",to:"/article/"+e.articleId,label:e.updatedAt},{title:(0,a.w5)((()=>[(0,a._)("span",re,(0,D.zw)(e.title),1)])),_:2},1032,["to","label"])])),_:2},1032,["before-close","name"])])))),128)),ce,(0,a.Wm)(r,{title:"不在轮播"},{"right-icon":(0,a.w5)((()=>[(0,a.Wm)(c,{name:"clear",color:"red",size:"0.5rem"})])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.list3,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.articleId},[(0,a.Wm)(h,{"before-close":n.beforeClose,"stop-propagation":"",name:e.inSwipe+"-"+e.articleId},{right:(0,a.w5)((()=>[(0,a.Wm)(d,{square:"",type:"primary",text:e.inSwipe?"下轮播":"上轮播"},null,8,["text"])])),default:(0,a.w5)((()=>[(0,a.Wm)(r,{"is-link":"",to:"/article/"+e.articleId,label:e.updatedAt},{title:(0,a.w5)((()=>[(0,a._)("span",de,(0,D.zw)(e.title),1)])),_:2},1032,["to","label"])])),_:2},1032,["before-close","name"])])))),128))])):(0,a.kq)("",!0)])}var me={name:"articlesList",data(){return{list:[],list2:[],list3:[],managing:!0}},methods:{onClickLeft(){this.$router.back()},beforeClose({name:e,position:t}){switch(t){case"left":case"cell":case"outside":return!0;case"right":"false"===e.split("-")[0]?r.V.confirm({title:"上轮播",message:"确定将此文章发布到首页轮播图吗?"}).then((()=>{const t={articleId:e.split("-")[1],action:"up"};this.$axios2.get("swipeKa",{params:t}).then((e=>{this.$router.go(0)}))})).catch((()=>{})):r.V.confirm({title:"下轮播",message:"确定将此文章从轮播图上撤下吗?"}).then((()=>{const t={articleId:e.split("-")[1],action:"down"};this.$axios2.get("swipeKa",{params:t}).then((e=>{this.$router.go(0)}))})).catch((()=>{}))}}},mounted(){"false"===this.$route.query.managing?this.managing=!1:this.managing=!0,this.$axios2.get("articlesList").then((e=>{this.list=e[0].map((e=>(e.updatedAt=u(e.updatedAt).format("YYYY-MM-DD HH:mm:ss"),e))),this.list2=e[1].map((e=>(e.updatedAt=u(e.updatedAt).format("YYYY-MM-DD HH:mm:ss"),e))),this.list3=e[2].map((e=>(e.updatedAt=u(e.updatedAt).format("YYYY-MM-DD HH:mm:ss"),e)))}))}};const ue=(0,k.Z)(me,[["render",he],["__scopeId","data-v-4325a7e4"]]);var pe=ue;const ge={class:"article wrapper pt"};function we(e,t,i,s,o,n){const l=(0,a.up)("van-nav-bar"),r=(0,a.up)("van-action-sheet"),c=(0,a.up)("ArticleItem");return(0,a.wg)(),(0,a.iD)("div",ge,[(0,a.Wm)(l,{title:"文章详情","left-text":"返回","left-arrow":"",onClickLeft:n.onClickLeft,fixed:"","right-text":o.managing?"":"审核",onClickRight:t[0]||(t[0]=e=>o.show=!0)},null,8,["onClickLeft","right-text"]),(0,a.Wm)(r,{show:o.show,"onUpdate:show":t[1]||(t[1]=e=>o.show=e),actions:o.actions,onSelect:n.onSelect,"cancel-text":"取消","close-on-click-action":""},null,8,["show","actions","onSelect"]),(0,a._)("div",null,[0!==o.articleId?((0,a.wg)(),(0,a.j4)(c,{key:0,ArticleId:o.articleId,ref:"item",onArticleState:n.articleState},null,8,["ArticleId","onArticleState"])):(0,a.kq)("",!0)])])}const fe={class:"articleItem wrapper p4",ref:"article"},ve={class:"article"},ke={class:"van-multi-ellipsis--l2 p3b title"},ye={key:0,class:"author"},be={class:"avatarBox"},Ce={class:"info"},xe={class:"p5b"},Ie={class:"p6g postTime"},_e={key:0,class:"subscribe"},We=["innerHTML"];function Le(e,t,i,s,o,n){const l=(0,a.up)("van-loading"),r=(0,a.up)("van-image"),c=(0,a.up)("router-link"),d=(0,a.up)("van-button");return(0,a.wg)(),(0,a.iD)("div",fe,[o.articleItem.cover&&" "!==o.articleItem.cover?((0,a.wg)(),(0,a.j4)(r,{key:0,width:"100%",height:"5rem",fit:"cover","lazy-load":"",src:this.$store.state.URL+"upload/cover/"+o.articleItem.cover,alt:""},{loading:(0,a.w5)((()=>[(0,a.Wm)(l,{type:"spinner",size:"20"})])),_:1},8,["src"])):(0,a.kq)("",!0),(0,a._)("div",ve,[(0,a._)("p",ke,(0,D.zw)(o.articleItem.title),1),o.user.userId?((0,a.wg)(),(0,a.iD)("div",ye,[(0,a._)("div",be,[(0,a.Wm)(c,{to:"/personal/"+o.articleItem.authorId},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{width:"1rem",height:"1rem",round:"",fit:"cover",src:n.avatarGet(o.user.avatar),"lazy-load":"","icon-size":"1rem","loading-icon":n.loadingIcon()},null,8,["src","loading-icon"])])),_:1},8,["to"])]),(0,a._)("div",Ce,[(0,a.Wm)(c,{to:"/personal/"+o.articleItem.authorId},{default:(0,a.w5)((()=>[(0,a._)("p",xe,(0,D.zw)(o.user.nickname),1),(0,a._)("p",Ie,(0,D.zw)(n.before(o.createdAt)),1)])),_:1},8,["to"])]),this.$store.state.user&&this.$store.state.user.userId==o.user.userId?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",_e,[(0,a.Wm)(d,{size:"small",color:o.subscribeState?"grey":"#000",icon:o.subscribeState?"success":"plus",onClick:t[0]||(t[0]=e=>n.subscribe(o.user.userId))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,D.zw)(o.subscribeState?"已关注":"关注Ta"),1)])),_:1},8,["color","icon"])]))])):(0,a.kq)("",!0),(0,a._)("p",null,[(0,a.Wm)(d,{size:"mini",icon:"guide-o",type:"primary",to:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,D.zw)(o.channel.channelName),1)])),_:1})]),o.articleItem.content?((0,a.wg)(),(0,a.iD)("div",{key:1,innerHTML:o.articleItem.content,class:"content"},null,8,We)):(0,a.kq)("",!0)])],512)}var Ae=i(1835),Se={name:"articleItem",inject:["avatarGet","loadingIcon"],props:{ArticleId:{type:Number},Admin:{type:Boolean,default:!0}},data(){return{articleId:this.ArticleId,articleItem:{},user:{},channel:{},createdAt:"",manage:!0,images:[],admin:this.Admin,subscribeState:!1,subscribeList:[],fanList:[]}},methods:{loginState(){r.V.confirm({title:"未登录",message:"你必须要登录才能使用此功能，是否前去登录?"}).then((()=>{this.$router.replace("/login")})).catch((()=>{}))},before(e){const t=u(e),i=u().valueOf(),s=t.diff(i,"day",!0);return s<=-7?u(e).format("YYYY/MM/DD"):u(e).fromNow()},onClickLeft(){this.$router.back()},imgPreview(e){(0,Ae.e)({images:this.images,startPosition:e})},subscribe(e){this.$store.state.user?this.subscribeState?r.V.confirm({title:"取消关注"}).then((()=>{this.subscribeList=this.subscribeList.filter((t=>t-0!==e)),this.subscribeState=!1,this.fanList=this.fanList.filter((e=>e-0!=this.$store.state.user.userId)),this.subscribeUpdate()})).catch((()=>{})):(this.subscribeList.push(e),this.fanList.push(this.$store.state.user.userId),this.subscribeState=!0,this.subscribeUpdate()):this.loginState()},async articleDataGet(){if(!0===this.admin){const e={articleId:this.articleId};await this.$axios2.get("articleItemGet",{params:e}).then((e=>{e[0].content=e[0].content.replace(/(http)[\S]+(1337\/)/gi,this.$store.state.URL),this.articleItem=e[0],this.user=e[1],this.channel=e[2],this.manage=e[3],this.$emit("articleState",this.manage),this.createdAt=this.articleItem.createdAt}))}else{const e={articleId:this.articleId,URL:this.$store.state.URL};await this.$axios.get("articleItemGet",{params:e}).then((e=>{this.articleItem=e[0],this.user=e[1],this.channel=e[2],this.images=e[3],this.createdAt=this.articleItem.createdAt}))}},async targetFansGet(e){const t={userId:e};await this.$axios.get("subscribeListGet",{params:t}).then((e=>{this.fanList=e[1]}))},async subscribeGet(){const e={userId:this.$store.state.user.userId};await this.$axios.get("subscribeListGet",{params:e}).then((e=>{this.subscribeList=e[0]})),await this.targetFansGet(this.articleItem.authorId),this.fanList.indexOf(this.$store.state.user.userId+"")>-1&&(this.subscribeState=!0)},async dataGet(){await this.articleDataGet(),this.$store.state.user&&this.subscribeGet()},subscribeUpdate(){const e={fan:this.fanList,follow:this.subscribeList,userId:this.$store.state.user.userId,authorId:this.articleItem.authorId};this.$axios.get("subscribeUpdate",{params:e})}},created(){window.imgPreview=this.imgPreview},mounted(){this.dataGet()},updated(){const e=this.$refs.article,t=(0,p.EL)(e);this.$emit("reload",t.height)}};const ze=(0,k.Z)(Se,[["render",Le],["__scopeId","data-v-47781171"]]);var De=ze,$e={name:"ArticleView",components:{ArticleItem:De},data(){return{articleId:0,show:!1,actions:[{name:"打回"},{name:"通过"}],managing:!0}},methods:{articleState(e){this.managing=e},onClickLeft(){this.$router.replace({path:"/articlesList",query:{managing:this.managing}})},onSelect(e){"打回"===e.name?r.V.confirm({title:"打回投稿",message:"确定打回此投稿吗?"}).then((()=>{const t={articleId:this.articleId,action:"No"};this.$axios2.get("auditAct",{params:t}).then((t=>{this.$router.back(),(0,l.F)(e.name)}))})).catch((()=>{})):r.V.confirm({title:"审核通过",message:"确定此投稿合格给予通过吗?"}).then((()=>{const t={articleId:this.articleId,action:"Yes"};this.$axios2.get("auditAct",{params:t}).then((t=>{this.$router.back(),(0,l.F)(e.name)}))})).catch((()=>{}))}},mounted(){const e=this.$route.path.split("/");this.articleId=parseInt(e[e.length-1])}};const Ue=(0,k.Z)($e,[["render",we]]);var Fe=Ue;const je={class:"announceList wrapper pt"},Ve=(0,a.Uk)("增加公告"),Be={style:{margin:"16px"}},He=(0,a.Uk)(" 提交 "),Re={class:"van-multi-ellipsis--l2"},qe={class:"van-multi-ellipsis--l2"};function Me(e,t,i,s,o,n){const l=(0,a.up)("van-nav-bar"),r=(0,a.up)("van-cell"),c=(0,a.up)("van-field"),d=(0,a.up)("van-switch"),h=(0,a.up)("van-cell-group"),m=(0,a.up)("van-button"),u=(0,a.up)("van-form"),p=(0,a.up)("van-popup"),g=(0,a.up)("van-card"),w=(0,a.up)("van-swipe-cell");return(0,a.wg)(),(0,a.iD)("div",je,[(0,a.Wm)(l,{title:"公告管理","left-text":"返回","left-arrow":"",onClickLeft:n.onClickLeft,fixed:""},null,8,["onClickLeft"]),(0,a.Wm)(r,{"is-link":"",onClick:t[0]||(t[0]=e=>o.show=!0)},{default:(0,a.w5)((()=>[Ve])),_:1}),(0,a.Wm)(p,{show:o.show,"onUpdate:show":t[4]||(t[4]=e=>o.show=e),position:"top",style:{height:"100%"},closeable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{onSubmit:n.onSubmit,style:{"margin-top":"30vh"}},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{inset:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:o.type,"onUpdate:modelValue":t[1]||(t[1]=e=>o.type=e),name:"类型",label:"类型",placeholder:"类型",rules:[{required:!0,message:"请填写类型"}]},null,8,["modelValue"]),(0,a.Wm)(c,{modelValue:o.message,"onUpdate:modelValue":t[2]||(t[2]=e=>o.message=e),rows:"1",autosize:"",label:"内容",type:"textarea",placeholder:"请输入内容",rules:[{required:!0,message:"请输入内容"}]},null,8,["modelValue"]),(0,a.Wm)(c,{name:"switch",label:"最新"},{input:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:o.checked,"onUpdate:modelValue":t[3]||(t[3]=e=>o.checked=e),size:"20"},null,8,["modelValue"])])),_:1})])),_:1}),(0,a._)("div",Be,[(0,a.Wm)(m,{round:"",block:"",type:"primary","native-type":"submit"},{default:(0,a.w5)((()=>[He])),_:1})])])),_:1},8,["onSubmit"])])),_:1},8,["show"]),(0,a.Wm)(h,{title:"当前公告"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.showList,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a.Wm)(w,{"before-close":n.beforeClose,"stop-propagation":"",name:e.inSwipe+"-"+e.articleId},{right:(0,a.w5)((()=>[(0,a.Wm)(m,{square:"",type:"danger",text:"编辑",class:"delete-button",onClick:t=>n.edit(e)},null,8,["onClick"])])),left:(0,a.w5)((()=>[(0,a.Wm)(m,{square:"",type:"danger",text:"删除",class:"delete-button",onClick:t=>n.del(e)},null,8,["onClick"])])),default:(0,a.w5)((()=>[(0,a.Wm)(g,{title:e.type},{num:(0,a.w5)((()=>[(0,a.Uk)((0,D.zw)(n.untilMin(e.updatedAt)),1)])),desc:(0,a.w5)((()=>[(0,a._)("p",Re,(0,D.zw)(e.message),1)])),_:2},1032,["title"])])),_:2},1032,["before-close","name"])])))),128))])),_:1}),(0,a.Wm)(h,{title:"其他公告"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.otherList,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a.Wm)(w,{"before-close":n.beforeClose,"stop-propagation":"",name:e.inSwipe+"-"+e.articleId},{right:(0,a.w5)((()=>[(0,a.Wm)(m,{square:"",type:"danger",text:"编辑",class:"delete-button",onClick:t=>n.edit(e)},null,8,["onClick"])])),left:(0,a.w5)((()=>[(0,a.Wm)(m,{square:"",type:"danger",text:"删除",class:"delete-button",onClick:t=>n.del(e)},null,8,["onClick"])])),default:(0,a.w5)((()=>[(0,a.Wm)(g,{title:e.type},{num:(0,a.w5)((()=>[(0,a.Uk)((0,D.zw)(n.untilMin(e.updatedAt)),1)])),desc:(0,a.w5)((()=>[(0,a._)("p",qe,(0,D.zw)(e.message),1)])),_:2},1032,["title"])])),_:2},1032,["before-close","name"])])))),128))])),_:1})])}var Te={name:"AnnounceView",inject:["untilMin"],data(){return{showList:[],otherList:[],show:!1,message:"",type:"",checked:!1,editing:!1}},methods:{onClickLeft(){this.$router.back()},beforeClose(){},async onSubmit(){let e;e=this.editing?{message:this.message,type:this.type,show:this.checked,id:this.target.id}:{message:this.message,type:this.type,show:this.checked},await this.$axios2.get("announceAdd",{params:e}),history.go(0)},edit(e){this.show=!0,this.$nextTick((()=>{this.editing=!0,this.target=e,this.type=e.type,this.message=e.message,this.checked=e.show}))},del(e){r.V.confirm({title:"确定吗"}).then((()=>{this.$axios2.get("announceDel",{params:{id:e.id}}),history.go(0)})).catch((()=>{}))}},mounted(){this.$axios2.get("announceGet").then((e=>{this.showList=e[0],this.otherList=e[1]}))}};const Ne=(0,k.Z)(Te,[["render",Me],["__scopeId","data-v-3c9573db"]]);var Ge=Ne;const Pe=e=>((0,a.dD)("data-v-2e5f040b"),e=e(),(0,a.Cn)(),e),Ee={class:"Home pbt p3 wrapper"},Ye=(0,a.Uk)("动态"),Oe={key:0,class:"height100"},Qe={class:"outBox"},Ke={class:"box"},Ze=Pe((()=>(0,a._)("p",{class:"p6 van-ellipsis"},"全部",-1))),Je={class:"box"},Xe={class:"p6 van-ellipsis"},et=(0,a.Uk)("加载中... "),tt={key:2,class:"",style:{height:"calc(100% - 3rem)"}},it={key:1},st={class:"notLogin"},at=(0,a.Uk)("去登录"),ot=(0,a.Uk)("请稍等..."),nt=(0,a.Uk)("全部"),lt={class:"box",style:{height:"5rem",width:"100%"}},rt={class:"van-multi-ellipsis--l2"},ct=Pe((()=>(0,a._)("div",{class:"placeholder"},null,-1)));function dt(e,t,i,o,n,l){const r=(0,a.up)("van-badge"),c=(0,a.up)("van-icon"),d=(0,a.up)("van-tab"),h=(0,a.up)("van-image"),m=(0,a.up)("van-tabs"),u=(0,a.up)("van-loading"),p=(0,a.up)("van-empty"),g=(0,a.up)("PostList"),w=(0,a.up)("van-list"),f=(0,a.up)("van-pull-refresh"),v=(0,a.up)("van-button"),k=(0,a.up)("router-link"),y=(0,a.up)("van-swipe-item"),b=(0,a.up)("van-swipe"),C=(0,a.up)("newChannelList"),x=(0,a.up)("van-nav-bar"),I=(0,a.up)("ChannelEdit"),_=(0,a.up)("van-popup"),W=(0,a.up)("TabBar");return(0,a.wg)(),(0,a.iD)("div",Ee,[(0,a.Wm)(m,{active:n.active,"onUpdate:active":t[5]||(t[5]=e=>n.active=e),shrink:"",class:"out height100",onChange:l.onChange},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"dynamics height100"},{title:(0,a.w5)((()=>[(0,a.Wm)(r,{dot:"",color:n.dynamicMaker.length?"red":"transparent"},{default:(0,a.w5)((()=>[Ye])),_:1},8,["color"])])),default:(0,a.w5)((()=>[n.logined?((0,a.wg)(),(0,a.iD)("div",Oe,[(0,a._)("div",{class:"bulk dynamicBulk",ref:"dynamicBulk",onScrollPassive:t[3]||(t[3]=(...e)=>l.scrollHandler&&l.scrollHandler(...e))},[(0,a.Wm)(f,{modelValue:n.refreshing,"onUpdate:modelValue":t[2]||(t[2]=e=>n.refreshing=e),"head-height":80,style:{"min-height":"100%"},onRefresh:l.onRefresh},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{active:n.active2,"onUpdate:active":t[0]||(t[0]=e=>n.active2=e),shrink:"","line-height":"0","before-change":l.peopleChange,class:"shadow",sticky:""},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"-1"},{title:(0,a.w5)((()=>[(0,a._)("div",Qe,[(0,a._)("div",Ke,[(0,a.Wm)(c,{name:"weapp-nav",size:"1.3rem"}),Ze])])])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.follows,(e=>((0,a.wg)(),(0,a.j4)(d,{key:e.userId,name:e.userId},{title:(0,a.w5)((()=>[(0,a._)("div",{class:"outBox",style:(0,D.j5)({background:e.userId==n.targetId?"#eee":"white"})},[(0,a._)("div",Je,[(0,a.Wm)(r,{dot:"",color:l.hasNewDynamic(e.userId)},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{round:"",width:"1.3rem",height:"1.3rem",src:l.avatarGet(e.avatar),"lazy-load":"",fit:"cover","icon-size":"1.3rem","loading-icon":l.loadingIcon()},null,8,["src","loading-icon"])])),_:2},1032,["color"]),(0,a._)("p",Xe,(0,D.zw)(e.nickname),1)])],4)])),_:2},1032,["name"])))),128))])),_:1},8,["active","before-change"]),n.loading?((0,a.wg)(),(0,a.j4)(u,{key:0,size:"1rem",vertical:"",style:{"padding-top":"1rem"}},{default:(0,a.w5)((()=>[et])),_:1})):n.list.length?((0,a.wg)(),(0,a.iD)("div",tt,[(0,a.Wm)(w,{loading:n.dynamicLoading,"onUpdate:loading":t[1]||(t[1]=e=>n.dynamicLoading=e),finished:n.dynamicFinished,"finished-text":"没有更多了",onLoad:l.onLoad},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{ArticleList:n.list},null,8,["ArticleList"])])),_:1},8,["loading","finished","onLoad"])])):((0,a.wg)(),(0,a.j4)(p,{key:1,image:"error",description:"还没有关注任何用户或其未发布动态"}))])),_:1},8,["modelValue","onRefresh"])],544)])):((0,a.wg)(),(0,a.iD)("div",it,[(0,a.Wm)(p,{image:"error",description:"未登录，无法查看动态"}),(0,a._)("div",st,[(0,a.Wm)(v,{color:"#000",to:"/login"},{default:(0,a.w5)((()=>[at])),_:1})])]))])),_:1}),(0,a.Wm)(d,{title:"头条",class:"headline"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{active:n.active1,"onUpdate:active":t[4]||(t[4]=e=>n.active1=e),shrink:"",swipeable:"",onChange:l.channelChange,class:"bulk allChannel",onScrollPassive:l.scrollHandler},{"nav-bottom":(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(u,{size:"24px",vertical:"",color:"#1989fa"},{default:(0,a.w5)((()=>[ot])),_:1},512),[[s.F8,!n.containerSize]])])),"nav-right":(0,a.w5)((()=>[ct,(0,a.Wm)(c,{name:"wap-nav",class:"edit",onClick:l.showPop},null,8,["onClick"])])),default:(0,a.w5)((()=>[(0,a.Wm)(d,{name:-1},{title:(0,a.w5)((()=>[nt])),default:(0,a.w5)((()=>[n.containerSize?((0,a.wg)(),(0,a.j4)(C,{key:0,channelId:-1,currentChannel:n.currentChannel,params:n.channelParams,cSize:n.containerSize,startIndex:n.startIndex,itemHeight:n.itemHeightPx,containerHeight:n.containerHeight},{swipe:(0,a.w5)((()=>[(0,a.Wm)(b,{autoplay:3e3,"indicator-color":"white","lazy-render":""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.swipe,(e=>((0,a.wg)(),(0,a.j4)(y,{key:e.articleId},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{to:"/articleHome/"+e.articleId},{default:(0,a.w5)((()=>[(0,a._)("div",lt,[(0,a.Wm)(h,{width:"100%",height:"5rem",fit:"cover",src:e.cover,"lazy-load":""},{loading:(0,a.w5)((()=>[(0,a.Wm)(u,{type:"spinner",size:"20"})])),_:2},1032,["src"]),(0,a._)("p",rt,(0,D.zw)(e.title),1)])])),_:2},1032,["to"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["currentChannel","params","cSize","startIndex","itemHeight","containerHeight"])):(0,a.kq)("",!0)])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.myChannels,(e=>((0,a.wg)(),(0,a.j4)(d,{key:e.id,name:e.channelId,class:"height100B"},{title:(0,a.w5)((()=>[(0,a.Uk)((0,D.zw)(e.channelName),1)])),default:(0,a.w5)((()=>[n.containerSize?((0,a.wg)(),(0,a.j4)(C,{key:0,channelId:e.channelId,currentChannel:n.currentChannel,params:n.channelParams,cSize:n.containerSize,startIndex:n.startIndex,containerHeight:n.containerHeight,itemHeight:n.itemHeightPx,ref_for:!0,ref:"channel"},null,8,["channelId","currentChannel","params","cSize","startIndex","containerHeight","itemHeight"])):(0,a.kq)("",!0)])),_:2},1032,["name"])))),128))])),_:1},8,["active","onChange","onScrollPassive"])])),_:1})])),_:1},8,["active","onChange"]),(0,a.Wm)(_,{show:n.show,"onUpdate:show":t[6]||(t[6]=e=>n.show=e),position:"right",style:{width:"100%",height:"100%"},class:"pop"},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{title:"频道偏好",onClickLeft:l.onClickLeft,"right-text":!0===n.isEditing?"完成":"编辑",onClickRight:l.onClickRight},{left:(0,a.w5)((()=>[(0,a.Wm)(c,{name:"cross",size:"18"})])),_:1},8,["onClickLeft","right-text","onClickRight"]),n.show?((0,a.wg)(),(0,a.j4)(I,{key:0,my:n.myChannels,isEdit:n.isEditing,ref:"headerChild"},null,8,["my","isEdit"])):(0,a.kq)("",!0)])),_:1},8,["show"]),(0,a.Wm)(W)])}const ht=e=>((0,a.dD)("data-v-a926bc2e"),e=e(),(0,a.Cn)(),e),mt={class:"postList"},ut={key:0,class:"exist"},pt={class:"author"},gt={class:"aBox"},wt=["onClick"],ft={class:"p5"},vt={key:0,class:"inputBox"},kt=["value"],yt=["onClick"],bt={class:"title p4 van-multi-ellipsis--l2"},Ct={class:"text p5g"},xt={class:"van-multi-ellipsis--l3"},It={class:"imgs"},_t={class:"bottom"},Wt={class:"p6g"},Lt={class:"p5g"},At=(0,a.Uk)("  "),St={key:1,class:"notExist"},zt=ht((()=>(0,a._)("div",{class:"info",style:{color:"red"}},[(0,a._)("span",null,"抱歉，该内容已被删除或失效！")],-1)));function Dt(e,t,i,o,n,l){const r=(0,a.up)("van-image"),c=(0,a.up)("van-loading"),d=(0,a.up)("van-col"),h=(0,a.up)("van-row"),m=(0,a.up)("van-icon"),u=(0,a.up)("van-skeleton");return(0,a.wg)(),(0,a.iD)("div",mt,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.ArticleList,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"postItem",key:e.articleId},[e.notExist?((0,a.wg)(),(0,a.iD)("div",St,[zt,(0,a.Wm)(u,{title:"",row:1,animate:!1})])):((0,a.wg)(),(0,a.iD)("div",ut,[(0,a._)("div",pt,[(0,a._)("div",gt,[(0,a._)("div",{class:"left",onClick:(0,s.iM)((t=>l.goPersonal(e.authorId)),["stop"])},[(0,a.Wm)(r,{round:"",width:"0.8rem",height:"0.8rem",fit:"cover",src:l.avatarGet(e.avatar),"lazy-load":"","icon-size":".8rem","loading-icon":l.loadingIcon()},null,8,["src","loading-icon"]),(0,a._)("span",ft,(0,D.zw)(e.authorName),1)],8,wt),i.isCollect?((0,a.wg)(),(0,a.iD)("div",vt,[(0,a.wy)((0,a._)("input",{type:"checkbox",value:e.articleId,"onUpdate:modelValue":t[0]||(t[0]=e=>n.checkedId=e),onClick:t[1]||(t[1]=(0,s.iM)((()=>{}),["stop"]))},null,8,kt),[[s.e8,n.checkedId]])])):(0,a.kq)("",!0)])]),(0,a._)("div",{class:"main",onClick:t=>l.goArticle(e.articleId)},[(0,a._)("div",bt,(0,D.zw)(e.title),1),(0,a._)("div",Ct,[(0,a._)("p",xt,(0,D.zw)(e.text),1)]),(0,a._)("div",It,[(0,a.Wm)(h,{style:{width:"100%"},gutter:"5"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.urls,((t,i)=>((0,a.wg)(),(0,a.j4)(d,{span:"8",key:t,style:{position:"relative"},onClick:(0,s.iM)((t=>l.imageView(e.urls,i)),["stop"])},{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("p",{class:"imgCount p6"},(0,D.zw)(e.urls.length>10?"10+":e.urls.length)+"张",513),[[s.F8,2===i&&e.urls.length>3]]),i<3?((0,a.wg)(),(0,a.j4)(r,{key:0,width:"100%",height:"1.8rem",fit:"cover",src:t,"lazy-load":"",radius:"0.08rem"},{loading:(0,a.w5)((()=>[(0,a.Wm)(c,{type:"spinner",size:"20"})])),_:2},1032,["src"])):(0,a.kq)("",!0)])),_:2},1032,["onClick"])))),128))])),_:2},1024)]),(0,a._)("div",_t,[(0,a._)("span",Wt,(0,D.zw)(l.before(e.createdAt))+"- -"+(0,D.zw)(e.channelName),1),(0,a._)("div",Lt,[(0,a.Wm)(m,{name:"comment"},{default:(0,a.w5)((()=>[(0,a.Uk)(" "+(0,D.zw)(e.commentCount),1)])),_:2},1024),At,(0,a.Wm)(m,{name:"good-job"},{default:(0,a.w5)((()=>[(0,a.Uk)(" "+(0,D.zw)(e.likeCount),1)])),_:2},1024)])])],8,yt)]))])))),128))])}var $t={name:"postList",inject:["before","goPersonal","goArticle","avatarGet","loadingIcon"],props:{ArticleList:{type:Array},isCollect:{type:Boolean,default:!1}},data(){return{checkedId:[]}},methods:{imageView(e,t){(0,Ae.e)({images:e,startPosition:t,closeable:!0})}},mounted(){}};const Ut=(0,k.Z)($t,[["render",Dt],["__scopeId","data-v-a926bc2e"]]);var Ft=Ut;const jt={class:"channelEdit"},Vt=["onClick"],Bt=["onClick"];function Ht(e,t,i,o,n,l){const r=(0,a.up)("van-cell"),c=(0,a.up)("van-icon"),d=(0,a.up)("van-grid-item"),h=(0,a.up)("van-grid");return(0,a.wg)(),(0,a.iD)("div",jt,[(0,a.Wm)(r,{title:"我的频道"}),(0,a.Wm)(h,{gutter:10,class:"p4",clickable:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.myChannels,(e=>((0,a.wg)(),(0,a.j4)(d,{key:e.channelId,class:"grid"},{default:(0,a.w5)((()=>[(0,a._)("div",{onClick:t=>l.clearOrGo(e.channelId),class:"box"},[(0,a.wy)((0,a.Wm)(c,{name:"clear",class:"clear",size:"0.5rem",color:"red"},null,512),[[s.F8,i.isEdit]]),(0,a._)("p",null,(0,D.zw)(e.channelName),1)],8,Vt)])),_:2},1024)))),128))])),_:1}),(0,a.Wm)(r,{title:"推荐频道"}),(0,a.Wm)(h,{gutter:10,class:"p4",clickable:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.recChannels,(e=>((0,a.wg)(),(0,a.j4)(d,{key:e.channelId,class:"grid"},{default:(0,a.w5)((()=>[(0,a._)("div",{onClick:t=>l.addOrGo(e.channelId),class:"box"},[(0,a.wy)((0,a.Wm)(c,{name:"add",class:"add",size:"0.5rem",color:"blue"},null,512),[[s.F8,i.isEdit]]),(0,a._)("p",null,(0,D.zw)(e.channelName),1)],8,Bt)])),_:2},1024)))),128))])),_:1})])}var Rt={name:"ChannelEdit",props:{my:{type:Array},isEdit:{type:Boolean,default:!1},isSelect:{type:Boolean,default:!1}},data(){return{myChannels:this.my,allChannels:[],select:this.isSelect,selectedCom:[]}},methods:{clear(e){let t=[];t=this.myChannels.filter((t=>t.channelId!==e)),this.myChannels=t},go(e){!0===this.select&&(this.selectedCom=this.allChannels.filter((t=>t.channelId===e)),this.$emit("hidPop"))},add(e){this.allChannels.forEach((t=>{t.channelId===e&&this.myChannels.push(t)}))},clearOrGo(e){!0===this.isEdit?this.clear(e):this.go(e)},addOrGo(e){!0===this.isEdit?this.add(e):this.go(e)}},mounted(){this.$axios.get("chaAllGet").then((e=>{this.allChannels=e}))},computed:{recChannels(){let e=this.allChannels.map((e=>e.channelId)),t=this.myChannels.map((e=>e.channelId)),i=e.filter((e=>!t.find((t=>t===e)))),s=[];return this.allChannels.forEach((e=>{-1!==i.indexOf(e.channelId)&&s.push(e)})),s}}};const qt=(0,k.Z)(Rt,[["render",Ht],["__scopeId","data-v-11553261"]]);var Mt=qt;const Tt={ref:"channelListBulk",class:"channelListBulk"},Nt={class:"box"};function Gt(e,t,i,s,o,n){const l=(0,a.up)("newSubmitList"),r=(0,a.up)("van-list"),c=(0,a.up)("van-pull-refresh");return(0,a.wg)(),(0,a.iD)("div",Tt,[(0,a.Wm)(c,{modelValue:o.refreshing,"onUpdate:modelValue":t[1]||(t[1]=e=>o.refreshing=e),"head-height":80,onRefresh:n.onRefresh,style:(0,D.j5)({"min-height":i.containerHeight+"px"})},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{loading:o.loading,"onUpdate:loading":t[0]||(t[0]=e=>o.loading=e),finished:o.finished,"finished-text":"没有更多了",onLoad:n.onLoad},{default:(0,a.w5)((()=>[(0,a._)("div",{class:"top",style:(0,D.j5)({width:"100% ",height:n.topHeight})},null,4),(0,a._)("div",Nt,[(0,a.WI)(e.$slots,"swipe",{},void 0,!0),(0,a.Wm)(l,{ArticleList:n.showList},null,8,["ArticleList"])]),(0,a._)("div",{class:"bottom",style:(0,D.j5)({width:"100% ",height:n.bottomHeight})},null,4)])),_:3},8,["loading","finished","onLoad"])])),_:3},8,["modelValue","onRefresh","style"])],512)}const Pt={class:"submitList"},Et={class:"van-multi-ellipsis--l2"},Yt={class:"van-multi-ellipsis--l2 lineClamp2",style:{}},Ot={style:{float:"right","padding-right":"0.4rem"}};function Qt(e,t,i,s,o,n){const l=(0,a.up)("van-loading"),r=(0,a.up)("van-image"),c=(0,a.up)("van-icon"),d=(0,a.up)("van-cell");return(0,a.wg)(),(0,a.iD)("div",Pt,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.ArticleList,(e=>((0,a.wg)(),(0,a.j4)(d,{key:e.articleId,"title-style":"flex:2",to:"/articleHome/"+e.articleId,style:{height:"2.5rem"},class:"item"},{title:(0,a.w5)((()=>[(0,a._)("div",Et,[(0,a._)("p",Yt,(0,D.zw)(e.title),1)])])),value:(0,a.w5)((()=>[e.cover?((0,a.wg)(),(0,a.j4)(r,{key:0,width:"100%",height:"2rem",fit:"cover",src:e.cover,radius:"0.08rem","lazy-load":""},{loading:(0,a.w5)((()=>[(0,a.Wm)(l,{type:"spinner",size:"20"})])),_:2},1032,["src"])):(0,a.kq)("",!0)])),label:(0,a.w5)((()=>[(0,a.Uk)((0,D.zw)(n.before(e.createdAt))+(0,D.zw)(e.isAll?"-["+e.channelName+"]":" by--"+e.authorName)+" ",1),(0,a._)("div",Ot,[(0,a.Wm)(c,{name:"comment-o"}),(0,a.Uk)(" "+(0,D.zw)(e.commentCount),1)])])),_:2},1032,["to"])))),128))])}var Kt={name:"submitList",props:{ArticleList:{type:Array}},data(){return{}},methods:{before(e){const t=u(e),i=u().valueOf(),s=t.diff(i,"day",!0);return s<=-7?u(e).format("YYYY/MM/DD"):u(e).fromNow()}},mounted(){}};const Zt=(0,k.Z)(Kt,[["render",Qt],["__scopeId","data-v-602bc9bc"]]);var Jt=Zt,Xt={name:"ChannelList",inject:["minHeight"],props:{channelId:{type:Number},currentChannel:{type:Number},params:{type:Object},cSize:{type:Number},startIndex:{type:Number},itemHeight:{type:Number},containerHeight:{type:Number}},components:{newSubmitList:Jt},data(){return{loading:!1,finished:!1,size:this.$store.state.size,skip:0,list:[],refreshing:!1,top:0}},methods:{onRefresh(){if(!0===this.loading)return(0,l.F)({overlay:!0,message:"勿在加载时刷新!"}),void(this.refreshing=!1);this.loading=!0,this.finished=!1,this.skip=0,this.onLoad()},onLoad(){if(this.channelId===this.currentChannel){const e={...this.params,skip:this.skip,size:this.size};this.$axios.get("articlesList",{params:e}).then((e=>{const t=setTimeout((()=>{this.refreshing?(this.list=[...e],(0,l.F)("刷新成功"),this.refreshing=!1):this.list=[...this.list,...e],this.loading=!1,e.length<this.size?this.finished=!0:this.skip=this.skip+this.size,clearTimeout(t)}),1e3)}))}},getHeight(){return{"min-height":`calc(100vh - 50px - ${this.top+"px"})`}}},mounted(){this.$nextTick((()=>{this.top=(0,p.EL)(this.$refs.channelListBulk).top}))},computed:{endIndex(){let e=this.startIndex+2*this.cSize;return this.list[e]||(e=this.list.length),e},showList(){let e;return e=this.startIndex<=this.cSize?0:this.startIndex-this.cSize,this.list.slice(e,this.endIndex)},topHeight(){let e=0;return e=this.startIndex<=this.cSize?0:this.startIndex-this.cSize,e*this.itemHeight+"px"},bottomHeight(){return(this.list.length-this.endIndex)*this.itemHeight+"px"},paddingStyle(){let e=0;return e=this.startIndex<=this.cSize?0:this.startIndex-this.cSize,{"padding-top":e*this.itemHeight+"px","padding-bottom":(this.list.length-this.endIndex)*this.itemHeight+"px"}}}};const ei=(0,k.Z)(Xt,[["render",Gt],["__scopeId","data-v-1a4d1cbe"]]);var ti=ei;const ii=e=>((0,a.dD)("data-v-51d60d1e"),e=e(),(0,a.Cn)(),e),si={class:"tabBar"},ai=(0,a.Uk)("首页"),oi=(0,a.Uk)("社区"),ni=(0,a.Uk)("管理"),li=ii((()=>(0,a._)("span",null,"消息",-1))),ri=(0,a.Uk)("我的");function ci(e,t,i,s,o,n){const l=(0,a.up)("van-button"),r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-tabbar-item"),d=(0,a.up)("van-icon"),h=(0,a.up)("van-tabbar"),m=(0,a.up)("van-grid-item"),u=(0,a.up)("van-grid"),p=(0,a.up)("van-action-sheet");return(0,a.wg)(),(0,a.iD)("div",si,[(0,a.Wm)(r,{fixed:""},{right:(0,a.w5)((()=>[(0,a.Wm)(l,{icon:"search",to:"/search",color:"transparent"})])),_:1}),(0,a.Wm)(h,{modelValue:o.active,"onUpdate:modelValue":t[0]||(t[0]=e=>o.active=e),route:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{icon:"wap-home",to:"/"},{default:(0,a.w5)((()=>[ai])),_:1}),(0,a.Wm)(c,{icon:"friends",to:"/community"},{default:(0,a.w5)((()=>[oi])),_:1}),o.isAdmin?((0,a.wg)(),(0,a.j4)(c,{key:1,icon:"add",to:"/admin"},{default:(0,a.w5)((()=>[ni])),_:1})):((0,a.wg)(),(0,a.j4)(c,{key:0,icon:"add",onClick:n.showPopup,class:"add"},null,8,["onClick"])),(0,a.Wm)(c,{icon:"chat",to:"/messageNotice"},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"chat",dot:o.newNotice},null,8,["dot"])])),default:(0,a.w5)((()=>[li])),_:1}),(0,a.Wm)(c,{icon:"manager",to:"/my"},{default:(0,a.w5)((()=>[ri])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(p,{show:o.show,"onUpdate:show":t[3]||(t[3]=e=>o.show=e),"cancel-text":"取消",title:"发布","close-on-click-action":""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{clickable:"","column-num":3,border:!1},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{icon:"notes-o",text:"文章投稿",to:"/submit",onClick:t[1]||(t[1]=e=>o.show=!1)}),(0,a.Wm)(m,{icon:"tv-o",text:"视频投稿",onClick:n.developing},null,8,["onClick"]),(0,a.Wm)(m,{icon:"description",text:"帖子/动态",to:"/post",onClick:t[2]||(t[2]=e=>o.show=!1)})])),_:1})])),_:1},8,["show"])])}var di={name:"TabBar",inject:["developing","toLogin"],data(){return{active:-1,show:!1,isAdmin:!1,newNotice:!1}},methods:{showPopup(){this.$store.state.user?this.show=!0:this.toLogin()},hidden(){this.show=!1},init(){this.$store.state.user&&(this.$axios.get("userDoneUpdate",{params:{userId:this.$store.state.user.userId}}),this.$axios.get("getMessageNotice",{params:{userId:this.$store.state.user.userId}}).then((e=>{!0===e.newNotice&&(this.newNotice=e.newNotice)})),1e3===this.$store.state.user.userId&&(this.isAdmin=!0))}},mounted(){},activated(){this.init()},deactivated(){this.newNotice=!1}};const hi=(0,k.Z)(di,[["render",ci],["__scopeId","data-v-51d60d1e"]]);var mi=hi,ui={name:"HomeView",inject:["minHeight","avatarGet","reload","loadingIcon"],components:{ChannelEdit:Mt,PostList:Ft,TabBar:mi,newChannelList:ti},data(){return{active2:0,active:1,active1:0,logined:!1,show:!1,myChannels:[],isEditing:!1,swipe:[],articleList:[],followList:[],follows:[],targetId:-2,list:[],loading:!0,dynamicMaker:[],originalChannel:[],dynamicLoading:!1,dynamicSkip:0,dynamicFinished:!1,dynamicParams:{},size:this.$store.state.size,currentChannel:-2,channelParams:{},refreshing:!1,dynamicScrollTop:0,scrollLocation:{},containerSize:0,containerHeight:0,itemHeight:2.5,itemHeightPx:0,startIndex:0,scrolling:!1}},methods:{showPop(){this.originalChannel=[...this.myChannels],this.show=!0},async onRefresh(){if(this.loading)return(0,l.F)({overlay:!0,message:"勿在加载时刷新!"}),void(this.refreshing=!1);await this.newDynamicCheck(),await this.peopleChange(this.targetId),this.refreshing=!1},onClickLeft(){this.myChannels=[...this.originalChannel],this.show=!1,this.isEditing=!1},async onClickRight(){if(!0===this.logined)if(!1===this.isEditing)this.isEditing=!0;else{if(this.$refs.headerChild.myChannels.length<4)return void l.F.fail("至少保留四个！");this.isEditing=!1,this.myChannels=this.$refs.headerChild.myChannels;let e=[];e=this.$refs.headerChild.myChannels.map((e=>e.channelId));const t={userId:this.$store.state.user.userId,channels:e};await this.$axios.get("channelUpdate",{params:t}),this.show=!1,this.isEditing=!1}else r.V.confirm({title:"未登录",message:"你必须要登录才能使用此功能，是否前去登录?"}).then((()=>{this.$router.replace("/login")})).catch((()=>{}))},async hadLogin(){this.logined=!0;const e={userId:this.$store.state.user.userId};await this.$axios.get("chaListShow",{params:e}).then((e=>{this.myChannels=e[0],this.channelChange(-1)})),await this.$axios.get("subscribeListGet",{params:e}).then((e=>{this.followList=e[0]})),await this.$axios.get("dynamicMakerIdGet",{params:{userId:this.$store.state.user.userId}}).then((e=>{this.dynamicMaker=e}));const t={followList:this.dynamicMaker};await this.$axios.get("subscribeDetailGet",{params:t}).then((e=>{this.follows=e[0]})),await this.peopleChange(-1)},async notLogin(){this.logined=!1,await this.$axios.get("chaAllGet").then((e=>{this.myChannels=e,this.channelChange(-1)}))},async peopleChange(e){if(this.dynamicSkip=0,this.list=[],this.loading=!0,this.targetId=e,!this.followList.length)return this.list=[],void setTimeout((()=>{this.loading=!1}),100);-1==e?this.dynamicParams={followList:this.followList,URL:this.$store.state.URL}:(this.dynamicMaker.splice(this.dynamicMaker.indexOf(e),1),await this.$axios.get("dynamicRead",{params:{userId:this.$store.state.user.userId,dynamic:this.dynamicMaker}}),this.dynamicParams={URL:this.$store.state.URL,userId:e}),this.onLoad()},hasNewDynamic(e){return-1===this.dynamicMaker.indexOf(e)?"transparent":"red"},async onLoad(){const e={...this.dynamicParams,skip:this.dynamicSkip,size:this.size};await this.$axios.get("dynamicsGet",{params:e}).then((e=>{setTimeout((()=>{this.list=[...this.list,...e],0===this.dynamicSkip&&(this.loading=!1),this.dynamicLoading=!1,e.length<this.size?this.dynamicFinished=!0:this.dynamicSkip=this.dynamicSkip+this.size}),1e3)}))},async newDynamicCheck(){await this.$axios.get("dynamicMakerIdGet",{params:{userId:this.$store.state.user.userId}}).then((e=>{this.dynamicMaker=e}));const e={followList:this.dynamicMaker};await this.$axios.get("subscribeDetailGet",{params:e}).then((e=>{this.follows=e[0]}))},onChange(e){e?this.$nextTick((()=>{document.querySelector(".allChannel").scrollTop=this.scrollLocation[this.active1]})):this.$nextTick((()=>{document.querySelector(".dynamicBulk").scrollTop=this.dynamicScrollTop}))},channelChange(e){this.$nextTick((()=>{document.querySelector(".allChannel").scrollTop=this.scrollLocation[e]})),this.currentChannel=e,this.logined?this.channelParams={channelId:e,URL:this.$store.state.URL,userId:this.$store.state.user.userId}:this.channelParams={channelId:e,URL:this.$store.state.URL}},scrollHandler(){switch(this.active){case 0:this.dynamicScrollTop=this.$refs.dynamicBulk.scrollTop;break;case 1:this.scrollLocation[this.active1]=document.querySelector(".allChannel").scrollTop,this.startIndexChange();break}},startIndexChange(){if(!this.scrolling){this.scrolling=!0;let e=setTimeout((()=>{this.scrolling=!1,clearTimeout(e)}),30),t=~~(this.scrollLocation[this.active1]/this.itemHeightPx);-1==this.currentChannel&&(t-=2),t>=0&&this.startIndex!==t&&(this.startIndex=t)}},async announceGet(){let e,t;await this.$axios.get("announceGet").then((i=>{e=i.message,t=i.type})),(!this.$store.state.lastDate||Date.now()-this.$store.state.lastDate>=864e5)&&0!==e.length&&r.V.alert({title:t,message:e}).then((()=>{this.$store.commit("setLastDate",Date.now())}))},getContainerSize(){const e=document.querySelector(".allChannel").offsetHeight,t=document.querySelector(".allChannel").offsetWidth;this.itemHeightPx=this.itemHeight*t/10,this.containerHeight=e,this.containerSize=2+~~(e/this.itemHeightPx)}},async mounted(){await this.announceGet(),this.$store.state.user?await this.hadLogin():await this.notLogin();const e={url:this.$store.state.URL};await this.$axios.get("swipeGet",{params:e}).then((e=>{this.swipe=e})),this.$nextTick((()=>{this.getContainerSize(),window.onresize=this.getContainerSize}))},activated(){!0===this.$route.meta.needRefresh?(l.F.loading({message:"数据加载中...",overlay:!0,duration:0}),setTimeout((()=>{l.F.clear(),window.restart()}),2e3)):(this.$store.state.user&&this.newDynamicCheck(),this.$nextTick((()=>{this.active?document.querySelector(".allChannel").scrollTop=this.scrollLocation[this.active1]:this.active||(document.querySelector(".dynamicBulk").scrollTop=this.dynamicScrollTop)})))},deactivated(){}};const pi=(0,k.Z)(ui,[["render",dt],["__scopeId","data-v-2e5f040b"]]);var gi=pi;const wi=e=>((0,a.dD)("data-v-76bf9625"),e=e(),(0,a.Cn)(),e),fi={class:"community pbt wrapper",ref:""},vi={class:"box"},ki={class:"p6"},yi={class:"box"},bi={class:"foreground",style:{background:"black"}},Ci=wi((()=>(0,a._)("span",{class:"p6"}," 全部社区 ",-1))),xi={class:"box"},Ii=["onClick"],_i={class:"minus"},Wi={class:"p6"},Li=["onClick"],Ai=["onClick"],Si=["value"],zi={class:"p5"};function Di(e,t,i,o,n,l){const r=(0,a.up)("van-icon"),c=(0,a.up)("van-tab"),d=(0,a.up)("van-tabs"),h=(0,a.up)("CommunityList"),m=(0,a.up)("van-cell"),u=(0,a.up)("van-empty"),p=(0,a.up)("van-col"),g=(0,a.up)("van-row"),w=(0,a.up)("TabBar");return(0,a.wg)(),(0,a.iD)("div",fi,[(0,a.Wm)(d,{active:n.active,"onUpdate:active":t[6]||(t[6]=e=>n.active=e),shrink:"",class:"out bulk allCommunity",onChange:l.onChange},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{title:"推荐"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{active:n.active3,"onUpdate:active":t[1]||(t[1]=e=>n.active3=e),class:"myCommunitys","line-height":"0",shrink:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.myCommuitys,(e=>((0,a.wg)(),(0,a.j4)(c,{key:e.communityId},{title:(0,a.w5)((()=>[(0,a._)("div",vi,[(0,a._)("div",{class:"foreground",style:(0,D.j5)({background:e.foreground})},[(0,a.Wm)(r,{"class-prefix":e.icon,class:"iconfont",color:e.color,size:"0.8rem",onClick:(0,s.iM)((t=>l.goCommunityItem(e.communityId)),["stop"])},null,8,["class-prefix","color","onClick"])],4),(0,a._)("span",ki,(0,D.zw)(e.communityName),1)])])),_:2},1024)))),128)),(0,a.Wm)(c,null,{title:(0,a.w5)((()=>[(0,a._)("div",yi,[(0,a._)("div",bi,[(0,a.Wm)(r,{name:"more",color:"white",size:"0.8rem",onClick:t[0]||(t[0]=(0,s.iM)((e=>n.active=1),["stop"]))})]),Ci])])),_:1})])),_:1},8,["active"]),void 0!==n.communityParams.isSubmit?((0,a.wg)(),(0,a.j4)(h,{params:n.communityParams,key:n.key},null,8,["params"])):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(c,{title:"社区"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{title:"我的社区"},{extra:(0,a.w5)((()=>[(0,a._)("span",{onClick:t[2]||(t[2]=(...e)=>l.edit&&l.edit(...e))},(0,D.zw)(!1===n.isEditing?"编辑":"完成"),1)])),_:1}),0===l.myCommuitys.length?((0,a.wg)(),(0,a.j4)(u,{key:0,image:"https://fastly.jsdelivr.net/npm/@vant/assets/custom-empty-image.png","image-size":"80",description:"点击“编辑”添加社区吧"})):((0,a.wg)(),(0,a.j4)(d,{key:1,active:n.active2,"onUpdate:active":t[3]||(t[3]=e=>n.active2=e),class:"myCommunitys","line-height":"0",shrink:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.myCommuitys,(e=>((0,a.wg)(),(0,a.j4)(c,{key:e.communityId},{title:(0,a.w5)((()=>[(0,a._)("div",xi,[(0,a._)("div",{class:"foreground",style:(0,D.j5)({background:e.foreground}),onClick:(0,s.iM)((t=>l.clear(e.communityId)),["stop"])},[(0,a._)("div",_i,[(0,a.wy)((0,a.Wm)(r,{name:"minus",size:"0.4rem"},null,512),[[s.F8,n.isEditing]])]),(0,a.Wm)(r,{"class-prefix":e.icon,class:"iconfont",color:e.color,size:"0.8rem"},null,8,["class-prefix","color"])],12,Ii),(0,a._)("span",Wi,(0,D.zw)(e.communityName),1)])])),_:2},1024)))),128))])),_:1},8,["active"])),(0,a.Wm)(d,{active:n.active1,"onUpdate:active":t[5]||(t[5]=e=>n.active1=e),swipeable:"",class:"in"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.communityClass,((e,i)=>((0,a.wg)(),(0,a.j4)(c,{key:e},{title:(0,a.w5)((()=>[(0,a.Uk)((0,D.zw)(n.titles[i]),1)])),default:(0,a.w5)((()=>[(0,a.Wm)(g,{justify:"left",class:"row",gutter:"5"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e,(e=>((0,a.wg)(),(0,a.j4)(p,{span:"6",key:e,class:"iconBox"},{default:(0,a.w5)((()=>[(0,a._)("div",{class:"background",style:(0,D.j5)({background:e.background}),onClick:t=>l.goCommunityItem(e.communityId)},[(0,a.wy)((0,a.Wm)(r,{name:"star",size:".4rem",color:"white",class:"star"},null,512),[[s.F8,!n.isEditing&&e.selected]]),(0,a.wy)((0,a._)("div",{class:"inputBox",onClick:(0,s.iM)((t=>l.clearAndAdd(e.communityId)),["prevent"])},[(0,a.wy)((0,a._)("input",{type:"checkbox",value:e.communityId,"onUpdate:modelValue":t[4]||(t[4]=e=>n.checkedNames=e)},null,8,Si),[[s.e8,n.checkedNames]])],8,Ai),[[s.F8,n.isEditing]]),(0,a._)("div",{class:"foreground",style:(0,D.j5)({background:e.foreground})},[(0,a.Wm)(r,{"class-prefix":e.icon,class:"iconfont",color:e.color,size:"0.8rem"},null,8,["class-prefix","color"])],4),(0,a._)("span",zi,[(0,a.wy)((0,a.Wm)(r,{name:"fire"},null,512),[[s.F8,e.isHot]]),(0,a.Uk)((0,D.zw)(e.communityName),1)])],12,Li)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["active"])])),_:1})])),_:1},8,["active","onChange"]),(0,a.Wm)(w)],512)}const $i={class:"communityList",ref:"communityListBulk"};function Ui(e,t,i,s,o,n){const l=(0,a.up)("PostList"),r=(0,a.up)("van-list"),c=(0,a.up)("van-pull-refresh");return(0,a.wg)(),(0,a.iD)("div",$i,[(0,a.Wm)(c,{modelValue:o.refreshing,"onUpdate:modelValue":t[1]||(t[1]=e=>o.refreshing=e),"head-height":80,style:{"min-height":"calc(100vh - 96px)"},onRefresh:n.onRefresh},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{loading:o.loading,"onUpdate:loading":t[0]||(t[0]=e=>o.loading=e),finished:o.finished,"finished-text":"没有更多了",onLoad:n.onLoad},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{ArticleList:o.list},null,8,["ArticleList"])])),_:1},8,["loading","finished","onLoad"])])),_:1},8,["modelValue","onRefresh"])],512)}var Fi={name:"CommunityList",inject:["minHeight"],props:{params:{type:Object}},components:{PostList:Ft},data(){return{loading:!1,finished:!1,size:this.$store.state.size,skip:0,list:[],refreshing:!1,loaderArr:[]}},methods:{onRefresh(){if(!0===this.loading)return l.F.allowMultiple(),(0,l.F)({overlay:!0,message:"勿在加载时刷新!"}),void(this.refreshing=!1);this.loadedArr=this.list.map((e=>e.articleId)),this.loading=!0,this.finished=!1,this.onLoad()},onLoad(){let e;e=this.refreshing?{...this.params,skip:this.skip,size:this.size,URL:this.$store.state.URL,loadedArr:this.loadedArr}:{...this.params,skip:this.skip,size:this.size,URL:this.$store.state.URL},this.$axios.get("articlesList",{params:e}).then((e=>{setTimeout((()=>{this.refreshing?(this.list=[...e,...this.list],this.refreshing=!1,(0,l.F)({position:"bottom",message:e.length?"新增了"+e.length+"条内容":"已经空了"})):this.list=[...this.list,...e],this.loading=!1,e.length<this.size?this.finished=!0:this.skip=this.skip+this.size}),1e3)}))}},mounted(){}};const ji=(0,k.Z)(Fi,[["render",Ui]]);var Vi=ji,Bi={name:"communityView",inject:["reload"],components:{CommunityList:Vi,TabBar:mi},data(){return{active:0,active1:0,active2:0,active3:0,allCommunitys:[],titles:this.$store.state.communityClass,checkedNames:[],isEditing:!1,logined:!1,articleList:[],communityParams:{},key:0,scrollLocation:0}},methods:{goCommunityItem(e){!1===this.isEditing&&this.$router.push("/communityItem/"+e)},edit(){if(!1===this.logined)r.V.confirm({title:"未登录",message:"你必须要登录才能使用此功能，是否前去登录?"}).then((()=>{this.$router.replace("/login")})).catch((()=>{}));else if(!1===this.isEditing)this.isEditing=!0;else{this.isEditing=!1;const e={userId:this.$store.state.user.userId,community:this.checkedNames};this.$axios.get("communityUpdate",{params:e}).then((e=>{this.key=this.reload(),(0,l.F)("社区偏好已更新!")}))}},clear(e){this.isEditing?this.checkedNames=this.checkedNames.filter((t=>t!==e)):this.goCommunityItem(e)},clearAndAdd(e){this.checkedNames.indexOf(e)>-1?this.checkedNames=this.checkedNames.filter((t=>t!==e)):this.checkedNames.push(e)},articleListGet(){this.logined?this.communityParams={isSubmit:!1,userId:this.$store.state.user.userId}:this.communityParams={isSubmit:!1}},async dataGet(){if(this.$store.state.user){this.logined=!0;const e={userId:this.$store.state.user.userId};await this.$axios.get("comListShow",{params:e}).then((e=>{this.checkedNames=e.map((e=>e.communityId))}))}else this.checkedNames=[1,2,3,5];await this.$axios.get("comGet").then((e=>{this.allCommunitys=e})),this.articleListGet()},scrollHandler(){this.active||(this.scrollLocation=document.querySelector(".allCommunity").scrollTop)},onChange(e){this.$nextTick((()=>{e||(document.querySelector(".allCommunity").scrollTop=this.scrollLocation)}))}},mounted(){this.$nextTick((()=>{document.querySelector(".allCommunity").addEventListener("scroll",this.scrollHandler)})),this.dataGet()},computed:{myCommuitys(){let e=[];return e=this.allCommunitys.filter((e=>-1!==this.checkedNames.indexOf(e.communityId))),e},communityClass(){let e=[[],[],[],[],[]];return this.allCommunitys.forEach((t=>{this.titles.forEach(((i,s)=>{-1!==t.communityClass.indexOf(i)&&(-1!==this.checkedNames.indexOf(t.communityId)?t.selected=!0:t.selected=!1,e[s].push(t))}))})),e}},activated(){this.$nextTick((()=>{this.active||(document.querySelector(".allCommunity").scrollTop=this.scrollLocation)}))}};const Hi=(0,k.Z)(Bi,[["render",Di],["__scopeId","data-v-76bf9625"]]);var Ri=Hi;const qi={class:"communityItem pt wrapper"},Mi={class:"bulk communityItemBulk"};function Ti(e,t,i,s,o,n){const l=(0,a.up)("van-nav-bar"),r=(0,a.up)("CommunityList");return(0,a.wg)(),(0,a.iD)("div",qi,[(0,a._)("div",Mi,[(0,a.Wm)(l,{title:"社区-"+o.communityItem.communityName,"left-arrow":"",onClickLeft:n.onClickLeft,fixed:""},null,8,["title","onClickLeft"]),void 0!==o.communityParams.isSubmit?((0,a.wg)(),(0,a.j4)(r,{params:o.communityParams,key:o.key},null,8,["params"])):(0,a.kq)("",!0)])])}var Ni={name:"communityView",inject:["getId","reload"],components:{CommunityList:Vi},data(){return{communityItem:{},communityParams:{},scrollTop:0,key:0}},methods:{onClickLeft(){this.$router.back()},async dataGet(){const e=this.getId(this.$route.path);await this.$axios.get("comGet",{params:{communityId:e}}).then((e=>{this.communityItem=e})),this.communityParams={isSubmit:!1,communityId:e}}},mounted(){this.dataGet()},activated(){!0!==this.$route.meta.isBack?(Object.assign(this.$data,this.$options.data()),this.dataGet(),this.key=this.reload()):document.querySelector(".communityItemBulk").scrollTop=this.scrollTop},beforeRouteEnter(e,t,i){-1!==t.path.indexOf("/article")&&(e.meta.isBack=!0),i()},beforeRouteLeave(){this.scrollTop=document.querySelector(".communityItemBulk").scrollTop}};const Gi=(0,k.Z)(Ni,[["render",Ti]]);var Pi=Gi;const Ei={class:"messageNotice wrapper pt"},Yi={key:0},Oi={class:"notLogin"},Qi=(0,a.Uk)("去登录"),Ki={key:1},Zi={class:"DM"},Ji=["onClick"],Xi={class:"nameDateReport"},es={class:"nameDate"},ts={class:"nickname p4b"},is={class:"time p5 van-ellipsis"},ss={class:"report"},as={class:"time p5"};function os(e,t,i,o,n,l){const r=(0,a.up)("van-empty"),c=(0,a.up)("van-button"),d=(0,a.up)("van-icon"),h=(0,a.up)("van-grid-item"),m=(0,a.up)("van-grid"),u=(0,a.up)("van-loading"),p=(0,a.up)("van-image"),g=(0,a.up)("van-pull-refresh"),w=(0,a.up)("van-tab"),f=(0,a.up)("van-tabs"),v=(0,a.up)("TabBar");return(0,a.wg)(),(0,a.iD)("div",Ei,[(0,a.Wm)(f,{active:n.active,"onUpdate:active":t[1]||(t[1]=e=>n.active=e),shrink:"",class:"out"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{title:"消息"},{default:(0,a.w5)((()=>[this.$store.state.user?((0,a.wg)(),(0,a.iD)("div",Ki,[(0,a.Wm)(g,{modelValue:n.refreshing,"onUpdate:modelValue":t[0]||(t[0]=e=>n.refreshing=e),"head-height":80,style:{"min-height":"calc(100vh - 96px)"},onRefresh:l.onRefresh},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{"column-num":3,clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{text:"回复我的",to:"/replyToMe/"+this.$store.state.user.userId},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"comment",dot:n.notice.newComment},null,8,["dot"])])),_:1},8,["to"]),(0,a.Wm)(h,{icon:"friends",text:"关注",to:"/newSubscribe/"+this.$store.state.user.userId},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"friends",dot:n.notice.newSubscribe},null,8,["dot"])])),_:1},8,["to"]),(0,a.Wm)(h,{icon:"smile-comment",text:"我的问题",to:"/answerList/"+this.$store.state.user.userId},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"smile-comment",dot:n.notice.newAnswer},null,8,["dot"])])),_:1},8,["to"])])),_:1}),(0,a._)("div",Zi,[(0,a.wy)((0,a.Wm)(u,{vertical:""},null,512),[[s.F8,n.loading]]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.chatList,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"top",key:e.oppositeId,onClick:t=>l.goDM(e.oppositeId)},[(0,a.Wm)(p,{class:"avatar",width:"1rem",height:"1rem",fit:"cover",round:"",src:l.avatarGet(e.avatar),"lazy-load":"","icon-size":"1rem","loading-icon":l.loadingIcon()},null,8,["src","loading-icon"]),(0,a._)("div",Xi,[(0,a._)("div",es,[(0,a._)("div",ts,(0,D.zw)(e.nickname),1),(0,a._)("div",is,(0,D.zw)(e.message),1)]),(0,a._)("div",ss,[(0,a._)("div",as,(0,D.zw)(l.untilMin(+e.date)),1),(0,a.wy)((0,a._)("div",{class:"badge p5"},(0,D.zw)(e.unread),513),[[s.F8,e.unread]])])])],8,Ji)))),128))])])),_:1},8,["modelValue","onRefresh"])])):((0,a.wg)(),(0,a.iD)("div",Yi,[(0,a.Wm)(r,{image:"error",description:"未登录，无法查看消息"}),(0,a._)("div",Oi,[(0,a.Wm)(c,{color:"#000",to:"/login"},{default:(0,a.w5)((()=>[Qi])),_:1})])]))])),_:1})])),_:1},8,["active"]),(0,a.Wm)(v)])}var ns={name:"MessageNotice",inject:["before","untilMin","avatarGet","loadingIcon"],components:{TabBar:mi},data(){return{active:0,notice:{},refreshing:!1,chatList:[],loading:!0}},methods:{onRefresh(){setTimeout((()=>{this.refreshing=!1,(0,l.F)("刷新成功")}),500)},goDM(e){this.$router.push("/directMessage/"+e)},async dataGet(){this.$store.state.user&&(this.$axios.get("getMessageNotice",{params:{userId:this.$store.state.user.userId,toNew:!0}}).then((e=>{this.notice=e})),this.$axios.get("getDMList",{params:{userId:this.$store.state.user.userId}}).then((e=>{this.chatList=e,this.loading=!1})))}},mounted(){},activated(){this.dataGet()}};const ls=(0,k.Z)(ns,[["render",os],["__scopeId","data-v-22904840"]]);var rs=ls;const cs=e=>((0,a.dD)("data-v-1f01ff23"),e=e(),(0,a.Cn)(),e),ds={class:"answerList wrapper pt"},hs={class:"commentList bulk"},ms={class:"author",style:{"padding-left":"5px"}},us={class:"info"},ps=cs((()=>(0,a._)("span",{class:"p5"},"一只猫",-1))),gs={class:"p7g"},ws={style:{padding:"5px"}},fs={class:"p6 van-multi-ellipsis--l2"},vs={key:0,style:{padding:"5px"}},ks={class:"p5 repliedMessage van-multi-ellipsis--l3"},ys=(0,a.Uk)("问题详情:"),bs={class:"p5g"},Cs={class:"article",style:{padding:"5px"}},xs={class:"articleInfo van-ellipsis"},Is={class:"p6g"},_s={class:"p6 van-ellipsis"};function Ws(e,t,o,n,l,r){const c=(0,a.up)("van-nav-bar"),d=(0,a.up)("van-skeleton"),h=(0,a.up)("van-empty"),m=(0,a.up)("van-image"),u=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",ds,[(0,a.Wm)(c,{title:"我的问题","left-arrow":"",onClickLeft:r.onClickLeft,fixed:""},null,8,["onClickLeft"]),(0,a._)("div",hs,[(0,a.wy)((0,a._)("div",null,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(3,(e=>(0,a._)("div",{key:e,style:{margin:"10px 0"}},[(0,a.Wm)(d,{title:"",avatar:"",row:0,"avatar-size":".8rem","title-width":"20%"}),(0,a.Wm)(d,{row:1,style:{margin:"10px 0",width:"100%"},"row-width":"100%"}),(0,a.Wm)(d,{title:"",avatar:"",row:0,"avatar-size":"1rem","title-width":"30%"})]))),64))],512),[[s.F8,l.loading]]),(0,a.wy)((0,a.Wm)(h,{description:"暂无回答"},null,512),[[s.F8,!l.loading&&!l.list.length]]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.list,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"commentItem",key:e.id},[(0,a.Wm)(u,{to:"/questionDetail/"+e.id},{default:(0,a.w5)((()=>[(0,a._)("div",ms,[(0,a.Wm)(m,{round:"",width:"0.8rem",height:"0.8rem",fit:"cover","lazy-load":"",src:i(9771),"icon-size":".8rem","loading-icon":r.loadingIcon()},null,8,["src","loading-icon"]),(0,a._)("div",us,[ps,(0,a._)("span",gs,(0,D.zw)(r.before(e.date-0))+" 回答了你的问题",1)])]),(0,a._)("div",ws,[(0,a._)("p",fs,(0,D.zw)(e.answer),1)]),(0,a._)("div",{class:"bottom",style:(0,D.j5)({padding:e.listenerName?"5px":"0"})},[e.desc?((0,a.wg)(),(0,a.iD)("div",vs,[(0,a._)("p",ks,[ys,(0,a._)("span",bs,(0,D.zw)(e.desc),1)])])):(0,a.kq)("",!0),(0,a._)("div",Cs,[(0,a._)("div",null,[(0,a.Wm)(m,{width:"1rem",height:"1rem",fit:"cover",round:"",src:r.avatarGet(this.$store.state.user.avatar),style:{background:"rgb(234, 234, 234)"},"lazy-load":"","icon-size":"1rem","loading-icon":r.loadingIcon()},null,8,["src","loading-icon"])]),(0,a._)("div",xs,[(0,a._)("span",Is,(0,D.zw)(this.$store.state.user.nickname),1),(0,a._)("span",_s,(0,D.zw)(e.question),1)])])],4)])),_:2},1032,["to"])])))),128))])])}var Ls={name:"AnswerList",inject:["getId","before","avatarGet","loadingIcon"],data(){return{list:[],loading:!0}},methods:{onClickLeft(){this.$router.back()}},mounted(){const e=this.getId(this.$route.path),t={userId:e,type:"answer"};this.$axios.get("getMessageNotice",{params:t}).then((e=>{this.list=e,this.$nextTick((()=>{this.loading=!1}))}))}};const As=(0,k.Z)(Ls,[["render",Ws],["__scopeId","data-v-1f01ff23"]]);var Ss=As;const zs={class:"replyList wrapper pt"},Ds={class:"bulk"};function $s(e,t,i,o,n,l){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-skeleton"),d=(0,a.up)("van-empty"),h=(0,a.up)("CommentList");return(0,a.wg)(),(0,a.iD)("div",zs,[(0,a.Wm)(r,{title:"评论及回复","left-arrow":"",onClickLeft:l.onClickLeft,fixed:""},null,8,["onClickLeft"]),(0,a._)("div",Ds,[(0,a.wy)((0,a._)("div",null,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(3,(e=>(0,a._)("div",{key:e,style:{margin:"10px 0"}},[(0,a.Wm)(c,{title:"",avatar:"",row:0,"avatar-size":".8rem","title-width":"25%"}),(0,a.Wm)(c,{row:1,style:{margin:"10px 0",width:"100%"},"row-width":"100%"}),(0,a.Wm)(c,{title:"",avatar:"",row:0,"avatar-size":"1rem","title-width":"100%","avatar-shape":"square"})]))),64))],512),[[s.F8,n.loading]]),(0,a.wy)((0,a.Wm)(d,{description:"暂无回复"},null,512),[[s.F8,!n.loading&&!n.list.length]]),(0,a.Wm)(h,{ArticleList:n.list,notice:!0},null,8,["ArticleList"])])])}const Us={class:"commentList"},Fs={class:"author"},js={style:{display:"flex"}},Vs={class:"info"},Bs={class:"p5"},Hs={key:0,class:"p7g"},Rs={key:1,class:"p7g"},qs={key:2,class:"p7g"},Ms={style:{display:"flex","align-items":"center"}},Ts={class:"p6 van-multi-ellipsis--l2"},Ns={key:0,class:"p5 repliedMessage van-ellipsis"},Gs={class:"p5g"},Ps={style:{display:"flex","align-item":"center"}},Es={class:"articleInfo van-ellipsis"},Ys={class:"p6g"},Os={class:"p6 van-ellipsis"};function Qs(e,t,o,n,l,r){const c=(0,a.up)("van-image"),d=(0,a.up)("van-icon"),h=(0,a.up)("van-button"),m=(0,a.up)("van-popover"),u=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",Us,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.ArticleList,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"commentItem",key:e.date},[(0,a.Wm)(u,{to:"/articleHome/"+e.articleId},{default:(0,a.w5)((()=>[(0,a._)("div",Fs,[(0,a._)("div",js,[(0,a.Wm)(c,{round:"",width:"0.8rem",height:"0.8rem",fit:"cover",src:r.avatarGet(e.speakerInfo.avatar),"lazy-load":"","icon-size":".8rem","loading-icon":r.loadingIcon()},null,8,["src","loading-icon"]),(0,a._)("div",Vs,[(0,a._)("span",Bs,(0,D.zw)(e.speakerInfo.nickname),1),o.notice&&e.listenerName?((0,a.wg)(),(0,a.iD)("span",Hs,(0,D.zw)(r.before(e.date-0))+" 回复了你的评论",1)):o.notice&&!e.listenerName?((0,a.wg)(),(0,a.iD)("span",Rs,(0,D.zw)(r.before(e.date-0))+" 评论了你的文章",1)):((0,a.wg)(),(0,a.iD)("span",qs,(0,D.zw)(r.before(e.date-0))+" 发布了评论",1))])]),(0,a.wy)((0,a._)("div",Ms,[(0,a.Wm)(m,{show:l.showPopover[t],"onUpdate:show":e=>l.showPopover[t]=e,actions:l.actions,onSelect:r.onSelect,placement:"bottom-end",theme:"dark",trigger:"manual"},{reference:(0,a.w5)((()=>[(0,a.Wm)(h,{size:"small",onClick:(0,s.iM)((i=>r.delComment(t,e)),["prevent"]),color:"transparent"},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"ellipsis",color:"#aaa",size:"0.5rem"})])),_:2},1032,["onClick"])])),_:2},1032,["show","onUpdate:show","actions","onSelect"])],512),[[s.F8,this.$store.state.user&&o.listCell&&e.speakerInfo.userId===this.$store.state.user.userId]])]),(0,a._)("div",Ts,(0,D.zw)(e.replyMessage),1),(0,a._)("div",{class:"bottom",style:(0,D.j5)({padding:e.listenerName?"5px":"0"})},[e.listenerName?((0,a.wg)(),(0,a.iD)("p",Ns,[(0,a.Uk)((0,D.zw)(e.listenerName)+":",1),(0,a._)("span",Gs,(0,D.zw)(e.repliedMessage),1)])):(0,a.kq)("",!0),(0,a._)("div",{class:"article",style:(0,D.j5)({background:e.listenerName?"rgb(253, 253, 253)":"rgb(243, 243, 243)"})},[(0,a._)("div",Ps,[" "===e.articleInfo.cover?((0,a.wg)(),(0,a.j4)(c,{key:0,width:"1rem",height:"1rem",fit:"cover",src:i(6876),"lazy-load":"",style:{background:"rgb(234, 234, 234)"}},null,8,["src"])):((0,a.wg)(),(0,a.j4)(c,{key:1,width:"1rem",height:"1rem",fit:"cover",src:this.$store.state.URL+"upload/cover/"+e.articleInfo.cover,"lazy-load":"","icon-size":"1rem","loading-icon":i(6876)},null,8,["src","loading-icon"]))]),(0,a._)("div",Es,[(0,a._)("span",Ys,(0,D.zw)(e.articleInfo.authorName),1),(0,a._)("span",Os,(0,D.zw)(e.articleInfo.title),1)])],4)],4)])),_:2},1032,["to"])])))),128))])}var Ks={name:"commentList",inject:["before","avatarGet","loadingIcon"],props:{ArticleList:{type:Array},notice:{type:Boolean,default:!1},listCell:{type:Boolean,default:!1}},data(){return{showPopover:[],actions:[{text:"删除",icon:"delete-o"},{text:"取消",icon:"close"}],target:null}},methods:{delComment(e,t){this.target=t,this.showPopover[e]=!0},onSelect(e){"删除"===e.text&&this.del(this.target)},del(e){l.F.loading({message:"删除中...",duration:0,overlay:!0});let t={articleId:e.articleId,commentId:e.commentId,userId:this.$store.state.user.userId};const i=this.ArticleList;i.splice(this.ArticleList.indexOf(e),1),e.repliedMessage&&(t={...t,date:e.date}),this.$axios.get("delComment",{params:t}).then((e=>{l.F.clear(),l.F.success("删除成功!")}))}},mounted(){}};const Zs=(0,k.Z)(Ks,[["render",Qs],["__scopeId","data-v-dd091bbe"]]);var Js=Zs,Xs={name:"ReplyList",components:{CommentList:Js},inject:["getId","before"],data(){return{list:[],loading:!0}},methods:{onClickLeft(){this.$router.back()}},mounted(){const e=this.getId(this.$route.path),t={userId:e,type:"commentNotice"};this.$axios.get("getMessageNotice",{params:t}).then((e=>{this.list=e.filter((e=>null!==e)),this.loading=!1}))}};const ea=(0,k.Z)(Xs,[["render",$s]]);var ta=ea;const ia=e=>((0,a.dD)("data-v-1d427737"),e=e(),(0,a.Cn)(),e),sa={class:"newSubscribe wrapper pt"},aa={class:"bulk"},oa=["onClick"],na={class:"nameDateReport"},la={class:"nameDate"},ra={class:"nickname p4b"},ca=ia((()=>(0,a._)("div",{class:"time p5 van-ellipsis"},"关注了您！",-1))),da={class:"report"},ha={class:"time p5"};function ma(e,t,i,o,n,l){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-empty"),d=(0,a.up)("van-image");return(0,a.wg)(),(0,a.iD)("div",sa,[(0,a.Wm)(r,{title:"新的关注","left-arrow":"",onClickLeft:l.onClickLeft,fixed:""},null,8,["onClickLeft"]),(0,a._)("div",aa,[(0,a.wy)((0,a.Wm)(c,{description:"暂无新关注"},null,512),[[s.F8,!n.list.length]]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.list,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"top",key:e.userId,onClick:t=>l.goPersonal(e.userId)},[(0,a.Wm)(d,{class:"avatar",width:"1rem",height:"1rem",fit:"cover",round:"","lazy-load":"","icon-size":"1rem","loading-icon":l.loadingIcon(),src:l.avatarGet(e.avatar)},null,8,["loading-icon","src"]),(0,a._)("div",na,[(0,a._)("div",la,[(0,a._)("div",ra,(0,D.zw)(e.nickname),1),ca]),(0,a._)("div",da,[(0,a._)("div",ha,(0,D.zw)(l.before(+e.date)),1)])])],8,oa)))),128))])])}var ua={name:"NewSubscribe",inject:["getId","before","avatarGet","loadingIcon"],data(){return{list:[]}},methods:{goPersonal(e){this.$router.push("/personal/"+e)},onClickLeft(){this.$router.back()}},mounted(){const e=this.getId(this.$route.path),t={userId:e,type:"subscribe"};this.$axios.get("getMessageNotice",{params:t}).then((e=>{this.list=e}))}};const pa=(0,k.Z)(ua,[["render",ma],["__scopeId","data-v-1d427737"]]);var ga=pa;const wa={class:"directMessage wrapper pbt"},fa={class:"main",ref:"main"},va={class:"avatar"},ka={class:"content"},ya={class:"message p5-5"},ba={class:"date p6g"},Ca={class:"send"},xa={class:"option"},Ia=(0,a.Uk)("发送");function _a(e,t,i,o,n,l){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-image"),d=(0,a.up)("van-field"),h=(0,a.up)("van-button"),m=(0,a.up)("van-icon"),u=(0,a.up)("van-popup");return(0,a.wg)(),(0,a.iD)("div",wa,[(0,a.Wm)(r,{title:n.opposite?n.opposite.nickname:void 0,"left-arrow":"",onClickLeft:l.onClickLeft,fixed:""},null,8,["title","onClickLeft"]),(0,a._)("div",{class:(0,D.C_)(n.flexEnd?"background bulk flexEnd":"background bulk "),ref:"background",id:"dmBulk"},[(0,a._)("div",fa,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.messageList,(e=>((0,a.wg)(),(0,a.iD)("div",{class:(0,D.C_)("messageItem "+l.getClass(e.userId)),key:e},[(0,a._)("div",va,[(0,a.Wm)(c,{width:".8rem",height:".8rem",fit:"cover",round:"",src:l.avatarGet(l.getSrc(e.userId)),onClick:(0,s.iM)((t=>l.goPersonal(e.userId)),["stop"]),"lazy-load":"","icon-size":".8rem","loading-icon":l.loadingIcon()},null,8,["src","onClick","loading-icon"])]),(0,a._)("div",ka,[(0,a._)("div",ya,(0,D.zw)(e.message),1),(0,a._)("div",ba,(0,D.zw)(l.untilMin(+e.date)),1)])],2)))),128))],512)],2),(0,a._)("div",Ca,[(0,a.Wm)(d,{placeholder:"发送消息",onFocus:l.focus,modelValue:n.message,"onUpdate:modelValue":t[0]||(t[0]=e=>n.message=e)},null,8,["onFocus","modelValue"])]),(0,a.Wm)(u,{show:n.show,"onUpdate:show":t[2]||(t[2]=e=>n.show=e),position:this.$store.state.setup&&this.$store.state.setup.system?"top":"bottom",class:"pop"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:n.message,"onUpdate:modelValue":t[1]||(t[1]=e=>n.message=e),rows:"2",autosize:"",type:"textarea",placeholder:"发送消息",ref:"input"},null,8,["modelValue"]),(0,a._)("div",xa,[(0,a.Wm)(h,{type:"primary",size:"small",color:"#000",onClick:l.sendMessage},{default:(0,a.w5)((()=>[Ia])),_:1},8,["onClick"]),(0,a.Wm)(m,{name:"photo-o",color:"grey",size:"0.5rem",style:{padding:"10px"},onMousedown:(0,s.iM)(l.developing,["prevent"])},null,8,["onMousedown"]),(0,a.Wm)(m,{name:"smile-o",color:"grey",size:"0.5rem",style:{padding:"10px"},onMousedown:(0,s.iM)(l.developing,["prevent"])},null,8,["onMousedown"]),(0,a.Wm)(m,{name:"arrow-down",color:"grey",size:"0.5rem",style:{padding:"10px"},onClick:l.loseFocus},null,8,["onClick"])])])),_:1},8,["show","position"])])}var Wa={name:"DirectMessage",components:{},inject:["getId","before","untilMin","avatarGet","developing","loadingIcon"],data(){return{message:"",show:!1,messageList:[],oppositeId:-1,user:null,opposite:null,flexEnd:!1,mounted:!1,scrollTop:0}},methods:{goPersonal(e){this.$router.push("/personal/"+e)},onClickLeft(){this.$router.back()},getClass(e){if(e==this.$store.state.user.userId)return"right"},getSrc(e){return e==this.$store.state.user.userId?this.user.avatar:this.opposite.avatar},sendMessage(){if(""===this.message.trim())return void l.F.fail("内容无意义！");const e={userId:this.$store.state.user.userId,date:Date.now(),message:this.message,oppositeId:this.oppositeId};this.$axios.post("sendMessage",T().stringify(e)).then((t=>{this.messageList=[...this.messageList,e],this.message="",this.show=!1,this.heightGet(),l.F.clear(),l.F.success("发送成功！")}))},focus(){this.show=!0,this.$nextTick((()=>{this.$refs.input.focus()}))},loseFocus(){this.$refs.input.blur()},async dataGet(){this.oppositeId=this.getId(this.$route.path);const e={userId:this.$store.state.user.userId,oppositeId:this.oppositeId};await this.$axios.get("getDMDetail",{params:e}).then((e=>{this.user=e[1],this.opposite=e[0],this.messageList=e[2]})),this.heightGet(),l.F.clear()},heightGet(){this.$nextTick((()=>{const e=(0,p.EL)(this.$refs.background),t=(0,p.EL)(this.$refs.main);t.height<=e.height?this.flexEnd=!0:this.flexEnd=!1}))},push(){if(!history.state.title){let e={title:"title",url:"http://www.maomao365.com"};history.pushState(e,"title")}}},mounted(){l.F.loading({message:"数据获取中",overlay:!0,duration:0}),this.push(),this.mounted=!0,this.dataGet()},activated(){this.mounted?this.mounted=!1:this.$store.state.isBack?this.$nextTick((()=>{document.querySelector("#dmBulk").scrollTop=this.scrollTop})):(l.F.loading({message:"数据获取中",overlay:!0,duration:0}),this.push(),Object.assign(this.$data,this.$options.data()),this.dataGet())},deactivated(){this.scrollTop=document.querySelector("#dmBulk").scrollTop}};const La=(0,k.Z)(Wa,[["render",_a],["__scopeId","data-v-25d09ca8"]]);var Aa=La;const Sa=e=>((0,a.dD)("data-v-63c3af95"),e=e(),(0,a.Cn)(),e),za={class:"My wrapper pbt"},Da={key:0,class:"logined noLogin bulk myBulk"},$a={class:"content"},Ua={class:"imgbox"},Fa={class:"text"},ja={class:"p3"},Va={class:"p6g van-multi-ellipsis--l2"},Ba={key:0},Ha={class:"p2"},Ra=Sa((()=>(0,a._)("p",{class:"p5g"},"关注",-1))),qa={class:"p2"},Ma=Sa((()=>(0,a._)("p",{class:"p5g"},"粉丝",-1))),Ta={class:"p2"},Na=Sa((()=>(0,a._)("p",{class:"p5g"},"获赞",-1))),Ga={class:"cah baseData"},Pa={class:"listCell"},Ea=(0,a.Uk)(" 更新/下载App "),Ya=(0,a.Uk)("新"),Oa=(0,a.Uk)("退出登录"),Qa={key:1,class:"noLogin"},Ka=Sa((()=>(0,a._)("span",{class:"p1"},"个人中心",-1))),Za={class:"imgbox"},Ja=Sa((()=>(0,a._)("div",{class:"text"},[(0,a._)("p",{class:"p3"},"点击登录"),(0,a._)("p",{class:"p6g"},"登录解锁更多精彩内容~")],-1)));function Xa(e,t,o,n,l,r){const c=(0,a.up)("van-image"),d=(0,a.up)("van-icon"),h=(0,a.up)("van-grid-item"),m=(0,a.up)("van-grid"),u=(0,a.up)("van-cell"),p=(0,a.up)("van-tag"),g=(0,a.up)("van-cell-group"),w=(0,a.up)("van-button"),f=(0,a.up)("van-tab"),v=(0,a.up)("van-skeleton"),k=(0,a.up)("ListCell"),y=(0,a.up)("van-tabs"),b=(0,a.up)("router-link"),C=(0,a.up)("TabBar"),x=(0,a.up)("van-action-sheet");return(0,a.wg)(),(0,a.iD)("div",za,[l.logined?((0,a.wg)(),(0,a.iD)("div",Da,[(0,a._)("div",null,[(0,a._)("div",$a,[(0,a._)("div",Ua,[(0,a.Wm)(c,{round:"",width:"2rem",height:"2rem",src:r.avatarGet(l.user.avatar),fit:"cover","lazy-load":"","icon-size":"2rem","loading-icon":r.loadingIcon()},null,8,["src","loading-icon"])]),(0,a._)("div",Fa,[(0,a._)("p",ja,[(0,a.Uk)((0,D.zw)(l.inited?l.user.nickname:"用户"+e.userId)+" ",1),(0,a.wy)((0,a.Wm)(d,{"class-prefix":"iconfont icon-nan",size:"0.5rem",color:"blue"},null,512),[[s.F8,"男"===l.user.sex]]),(0,a.wy)((0,a.Wm)(d,{"class-prefix":"iconfont icon-nv",size:"0.5rem",color:"pink"},null,512),[[s.F8,"女"===l.user.sex]])]),(0,a._)("p",Va,(0,D.zw)(l.inited?l.user.signature:"这个人很懒，什么也没说"),1)])])]),this.$store.state.user?((0,a.wg)(),(0,a.iD)("div",Ba,[(0,a.Wm)(m,{clickable:"","column-num":3,border:!1},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{to:"/subscribe/"+this.$store.state.user.userId+"/0"},{default:(0,a.w5)((()=>[(0,a._)("p",Ha,(0,D.zw)(l.follow.length),1),Ra])),_:1},8,["to"]),(0,a.Wm)(h,{to:"/subscribe/"+this.$store.state.user.userId+"/1"},{default:(0,a.w5)((()=>[(0,a._)("p",qa,(0,D.zw)(l.fan.length),1),Ma])),_:1},8,["to"]),(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a._)("p",Ta,(0,D.zw)(l.inited?l.user.likeCount:0),1),Na])),_:1})])),_:1})])):(0,a.kq)("",!0),(0,a._)("div",Ga,[(0,a.Wm)(m,{clickable:"","column-num":2,border:!1},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{icon:"home-o",to:"/myCollect"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{title:"我的收藏","is-link":"",icon:"star"})])),_:1}),(0,a.Wm)(h,{icon:"home-o",to:"/history"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{title:"历史记录","is-link":"",icon:"clock"})])),_:1})])),_:1})]),(0,a._)("div",Pa,[(0,a.Wm)(y,{active:l.active,"onUpdate:active":t[1]||(t[1]=e=>l.active=e),swipeable:"",shrink:"",class:"out",onChange:r.onChange},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{title:"数据"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{title:"推荐服务"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{title:"修改资料",to:"/profileEdit","is-link":""},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{"class-prefix":"iconfont icon-xiugai",size:"0.5rem"})])),_:1}),(0,a.Wm)(u,{title:"草稿箱",to:"/draftList","is-link":""},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{"class-prefix":"iconfont icon-caogao",size:"0.5rem"})])),_:1}),(0,a.Wm)(u,{"is-link":"",onClick:t[0]||(t[0]=e=>r.download())},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{"class-prefix":"iconfont icon-xiazai",size:"0.5rem"})])),title:(0,a.w5)((()=>[Ea,l.newVersion.length?((0,a.wg)(),(0,a.j4)(p,{key:0,type:"danger"},{default:(0,a.w5)((()=>[Ya])),_:1})):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(u,{title:"问题反馈",to:"feedback","is-link":""},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{"class-prefix":"iconfont icon-31wentifankui",size:"0.5rem"})])),_:1}),(0,a.Wm)(u,{title:"实验室",to:"miniList","is-link":""},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{"class-prefix":"iconfont icon-shiyanshi",size:"0.5rem",color:"#39f"})])),_:1}),(0,a.Wm)(u,{title:"设置","is-link":"",to:"/setup"},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{"class-prefix":"iconfont icon-shezhi",size:"0.5rem"})])),_:1})])),_:1}),(0,a.Wm)(g,{title:"其他服务"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{title:"商务合作",to:"contact","is-link":""},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{"class-prefix":"iconfont icon-jiarukequn",size:"0.5rem"})])),_:1}),(0,a.Wm)(u,{title:"加入我们",to:"contact","is-link":""},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{"class-prefix":"iconfont icon-CPhezuo_o",size:"0.5rem"})])),_:1})])),_:1}),(0,a.Wm)(w,{type:"danger",block:"",onClick:r.loginOut},{default:(0,a.w5)((()=>[Oa])),_:1},8,["onClick"])])),_:1}),(0,a.Wm)(f,{title:"动态"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("div",null,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(2,(e=>(0,a._)("div",{key:e,class:"avatarSkeleton"},[(0,a.Wm)(v,{title:"",row:0,avatar:"","title-width":"35%"}),(0,a.Wm)(v,{title:"",class:"avatarSkeleton"}),(0,a.Wm)(v,{row:3})]))),64))],512),[[s.F8,!l.inited]]),l.inited?((0,a.wg)(),(0,a.j4)(k,{submitIdArr:l.submit,postIdArr:l.post,commentArr:l.comment,userId:e.userId-0,onRefresh:r.refresh,key:l.key},null,8,["submitIdArr","postIdArr","commentArr","userId","onRefresh"])):(0,a.kq)("",!0)])),_:1})])),_:1},8,["active","onChange"])])])):((0,a.wg)(),(0,a.iD)("div",Qa,[Ka,(0,a._)("div",null,[(0,a.Wm)(b,{to:"/login",class:"content"},{default:(0,a.w5)((()=>[(0,a._)("div",Za,[(0,a.Wm)(c,{round:"",width:"2rem",height:"2rem",src:i(7205),"lazy-load":""},null,8,["src"])]),Ja])),_:1})])])),(0,a.Wm)(C),(0,a.Wm)(x,{show:l.show,"onUpdate:show":t[2]||(t[2]=e=>l.show=e),actions:l.actions,onSelect:r.onSelect,description:"选择版本(当前"+l.window.version+")","cancel-text":"取消","close-on-click-action":""},null,8,["show","actions","onSelect","description"])])}i(2262),i(4506);const eo={class:"listCell",ref:"listCellBulk"},to={class:"scrollBox"},io={class:"scrollBox"},so={class:"scrollBox"};function ao(e,t,i,s,o,n){const l=(0,a.up)("van-empty"),r=(0,a.up)("PostList"),c=(0,a.up)("van-list"),d=(0,a.up)("van-tab"),h=(0,a.up)("CommentList"),m=(0,a.up)("SubmitList"),u=(0,a.up)("van-tabs"),p=(0,a.up)("van-pull-refresh");return(0,a.wg)(),(0,a.iD)("div",eo,[(0,a.Wm)(p,{modelValue:o.refreshing,"onUpdate:modelValue":t[4]||(t[4]=e=>o.refreshing=e),"head-height":80,style:(0,D.j5)(n.minHeight(this.$refs.listCellBulk)),onRefresh:n.onRefresh},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{active:o.active,"onUpdate:active":t[3]||(t[3]=e=>o.active=e),type:"card",color:"#fff",background:"#f2f4f3","title-active-color":"black","title-inactive-color":"#999"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{title:"发帖"+i.postIdArr.length},{default:(0,a.w5)((()=>[!0===o.postFinished&&0===o.post.length?((0,a.wg)(),(0,a.j4)(l,{key:0,image:"https://fastly.jsdelivr.net/npm/@vant/assets/custom-empty-image.png","image-size":"80",description:"暂无发帖"})):(0,a.kq)("",!0),(0,a._)("div",to,[(0,a.Wm)(c,{loading:o.postLoading,"onUpdate:loading":t[0]||(t[0]=e=>o.postLoading=e),finished:o.postFinished,"finished-text":"没有更多了",onLoad:n.onLoadPost},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{ArticleList:o.post},null,8,["ArticleList"])])),_:1},8,["loading","finished","onLoad"])])])),_:1},8,["title"]),(0,a.Wm)(d,{title:"评论"+i.commentArr.length},{default:(0,a.w5)((()=>[!0===o.commentFinished&&0===o.comment.length?((0,a.wg)(),(0,a.j4)(l,{key:0,image:"https://fastly.jsdelivr.net/npm/@vant/assets/custom-empty-image.png","image-size":"80",description:"暂无评论"})):(0,a.kq)("",!0),(0,a.Wm)(c,{loading:o.commentLoading,"onUpdate:loading":t[1]||(t[1]=e=>o.commentLoading=e),finished:o.commentFinished,"finished-text":"没有更多了",onLoad:n.onLoadComment},{default:(0,a.w5)((()=>[(0,a._)("div",io,[(0,a.Wm)(h,{ArticleList:o.comment,listCell:!0},null,8,["ArticleList"])])])),_:1},8,["loading","finished","onLoad"])])),_:1},8,["title"]),(0,a.Wm)(d,{title:"投稿"+i.submitIdArr.length},{default:(0,a.w5)((()=>[!0===o.finished&&0===o.submit.length?((0,a.wg)(),(0,a.j4)(l,{key:0,image:"https://fastly.jsdelivr.net/npm/@vant/assets/custom-empty-image.png","image-size":"80",description:"暂无投稿"})):(0,a.kq)("",!0),(0,a._)("div",so,[(0,a.Wm)(c,{loading:o.loading,"onUpdate:loading":t[2]||(t[2]=e=>o.loading=e),finished:o.finished,"finished-text":"没有更多了",onLoad:n.onLoad},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{ArticleList:o.submit},null,8,["ArticleList"])])),_:1},8,["loading","finished","onLoad"])])])),_:1},8,["title"])])),_:1},8,["active"])])),_:1},8,["modelValue","style","onRefresh"])],512)}const oo={class:"submitList"},no={class:"van-multi-ellipsis--l2"},lo={class:"van-multi-ellipsis--l2 lineClamp2",style:{}},ro={style:{float:"right","padding-right":"0.4rem"}};function co(e,t,i,s,o,n){const l=(0,a.up)("van-loading"),r=(0,a.up)("van-image"),c=(0,a.up)("van-icon"),d=(0,a.up)("van-cell");return(0,a.wg)(),(0,a.iD)("div",oo,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.ArticleList,(e=>((0,a.wg)(),(0,a.j4)(d,{key:e.articleId,"title-style":"flex:2",to:"/articleHome/"+e.articleId,style:{height:"2.5rem"}},{title:(0,a.w5)((()=>[(0,a._)("div",no,[(0,a._)("p",lo,(0,D.zw)(e.title),1)])])),value:(0,a.w5)((()=>[e.cover?((0,a.wg)(),(0,a.j4)(r,{key:0,width:"100%",height:"2rem",fit:"cover",src:e.cover,radius:"0.08rem","lazy-load":""},{loading:(0,a.w5)((()=>[(0,a.Wm)(l,{type:"spinner",size:"20"})])),_:2},1032,["src"])):(0,a.kq)("",!0)])),label:(0,a.w5)((()=>[(0,a.Uk)((0,D.zw)(n.before(e.createdAt))+(0,D.zw)(e.isAll?"-["+e.channelName+"]":" by--"+e.authorName)+" ",1),(0,a._)("div",ro,[(0,a.Wm)(c,{name:"comment-o"}),(0,a.Uk)(" "+(0,D.zw)(e.commentCount),1)])])),_:2},1032,["to"])))),128))])}var ho={name:"submitList",props:{ArticleList:{type:Array}},data(){return{}},methods:{before(e){const t=u(e),i=u().valueOf(),s=t.diff(i,"day",!0);return s<=-7?u(e).format("YYYY/MM/DD"):u(e).fromNow()}},mounted(){}};const mo=(0,k.Z)(ho,[["render",co],["__scopeId","data-v-ccb33a2e"]]);var uo=mo,po={name:"postList",components:{PostList:Ft,SubmitList:uo,CommentList:Js},inject:["reload","minHeight"],props:{userId:{type:Number},submitIdArr:{type:Array},postIdArr:{type:Array},commentArr:{type:Array}},data(){return{active:0,size:this.$store.state.size,submit:[],loading:!1,finished:!1,skip:0,post:[],postLoading:!1,postFinished:!1,postSkip:0,comment:[],commentLoading:!1,commentFinished:!1,commentSkip:0,refreshing:!1}},methods:{async onRefresh(){if(this.loading||this.postLoading||this.commentLoading)return l.F.fail({overlay:!0,message:"不要在加载时刷新!"}),void(this.refreshing=!1);this.$emit("refresh","data",(()=>{switch(this.active){case 0:this.postLoading=!0,this.postFinished=!1,this.postSkip=0,this.onLoadPost();break;case 1:this.commentLoading=!0,this.commentFinished=!1,this.commentSkip=0,this.onLoadComment();break;case 2:this.loading=!0,this.finished=!1,this.skip=0,this.onLoad();break}}))},onLoad(){const e=this.size;let t=this.skip,i=t+e,s=[];for(t;t<i;t++)s.push(this.submitIdArr[t]);let a=s.filter((e=>"number"===typeof e));const o={submitIdArr:a,URL:this.$store.state.URL,userId:this.userId};setTimeout((()=>{this.$axios.get("userSubmitShow",{params:o}).then((e=>{this.refreshing?(this.submit=[...e],(0,l.F)("刷新成功"),this.refreshing=!1):this.submit=[...this.submit,...e],this.loading=!1,e.length<this.size?this.finished=!0:this.skip=this.skip+this.size}))}),100)},onLoadPost(){const e=this.size;let t=this.postSkip,i=t+e,s=[];for(t;t<i;t++)s.push(this.postIdArr[t]);let a=s.filter((e=>"number"===typeof e));const o={postIdArr:a,URL:this.$store.state.URL,userId:this.userId};setTimeout((()=>{this.$axios.get("userPostShow",{params:o}).then((e=>{this.refreshing?(this.post=[...e],(0,l.F)("刷新成功"),this.refreshing=!1):this.post=[...this.post,...e],this.postLoading=!1,e.length<this.size?this.postFinished=!0:this.postSkip=this.postSkip+this.size}))}),100)},onLoadComment(){const e=this.size;let t=this.commentSkip,i=t+e,s=[];for(t;t<i;t++)s.push(this.commentArr[t]);let a=s.filter((e=>"object"===typeof e));const o={commentArr:a,userId:this.userId};setTimeout((()=>{this.$axios.get("userCommentShow",{params:o}).then((e=>{e=e.filter((e=>e)),this.refreshing?(this.comment=[...e],(0,l.F)("刷新成功"),this.refreshing=!1):this.comment=[...this.comment,...e],this.commentLoading=!1,e.length<this.size?this.commentFinished=!0:this.commentSkip=this.commentSkip+this.size}))}),100)}},mounted(){},updated(){}};const go=(0,k.Z)(po,[["render",ao],["__scopeId","data-v-20f7d074"]]);var wo=go,fo={name:"MyView",components:{ListCell:wo,TabBar:mi},inject:["reload","developing","avatarGet","loadingIcon"],data(){return{src:"",logined:!1,active:0,active1:0,user:{},fan:[],follow:[],submit:[],post:[],comment:[],inited:!1,key:0,scrollLocation:0,show:!1,actions:[{name:"android"},{name:"ios"}],newVersion:"",apkName:"",updateContent:"",window:window}},methods:{loginOut(){r.V.confirm({title:"退出登录",message:"确定吗?"}).then((()=>{this.$store.commit("setUser",null),location.reload(!0)})).catch((()=>{}))},async onSelect(e){"ios"!==e.name?this.newVersion.length?r.V.confirm({title:"更新确认  "+window.version+"=>"+this.newVersion,message:this.updateContent,confirmButtonText:"下载"}).then((()=>{const e=document.createElement("a");e.href=this.$store.state.URL+"/version/apk/"+this.apkName,e.setAttribute("download","DINOEYE"),e.style.display="none",document.body.appendChild(e),setTimeout((()=>{e.click(),document.body.removeChild(e)}),66)})).catch((()=>{this.show=!1})):(0,l.F)("已是最新版本!"):this.developing()},versionCheck(){this.$axios.get("versionCheck").then((e=>{this.apkName=e[0].at(-1);let t=e[1].match(/v.{5}v/)[0].replaceAll("v","");if(t>window.version){this.newVersion=t,this.actions[0].name=this.actions[0].name+"("+this.newVersion+")";const i=e[1].match(/-\d.+-/g);this.updateContent=i.toString().replaceAll(",","  ")}}))},download(){this.show=!0},async refresh(e,t){await this.dataShow(),t(e)},async dataShow(){const e={userId:this.$store.state.user.userId};await this.$axios.get("userDataShow",{params:e}).then((e=>{this.user=e,this.fan=e.fans.fan,this.follow=e.follows.follow,this.submit=e.submits.submit.reverse(),this.post=e.posts.post.reverse(),this.comment=e.comments.comment.reverse(),this.inited=!0}))},scrollHandler(){this.active&&(this.scrollLocation=document.querySelector(".myBulk").scrollTop)},onChange(e){this.$nextTick((()=>{e&&(document.querySelector(".myBulk").scrollTop=this.scrollLocation)}))}},mounted(){this.$store.state.user?(this.$nextTick((()=>{document.querySelector(".myBulk").addEventListener("scroll",this.scrollHandler,{passive:!1})})),this.logined=!0,this.userId=this.$store.state.user.userId,this.dataShow(),this.versionCheck()):this.logined=!1},activated(){if(this.$nextTick((()=>{this.active&&(document.querySelector(".myBulk").scrollTop=this.scrollLocation)})),!0!==this.$route.meta.isBack);else{const e={userId:this.$store.state.user.userId};this.$axios.get("userDataShow",{params:e}).then((e=>{this.user=e}))}},beforeRouteEnter(e,t,i){-1!==t.path.indexOf("/profileEdit")&&(e.meta.isBack=!0),i()}};const vo=(0,k.Z)(fo,[["render",Xa],["__scopeId","data-v-63c3af95"]]);var ko=vo;const yo=e=>((0,a.dD)("data-v-517fca78"),e=e(),(0,a.Cn)(),e),bo={class:"submit pt wrapper"},Co={class:"bulk",ref:"bulk",id:"bulk"},xo=(0,a.Uk)(" 选择频道"),Io=yo((()=>(0,a._)("img",{src:"https://fastly.jsdelivr.net/npm/@vant/assets/apple-3.jpeg"},null,-1)));function _o(e,t,i,o,n,l){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-button"),d=(0,a.up)("van-cell"),h=(0,a.up)("van-icon"),m=(0,a.up)("ChannelEdit"),u=(0,a.up)("van-popup"),p=(0,a.up)("van-field"),g=(0,a.up)("van-cell-group"),w=(0,a.up)("van-uploader"),f=(0,a.up)("WangEditor"),v=(0,a.up)("ImageCut"),k=(0,a.up)("van-dialog");return(0,a.wg)(),(0,a.iD)("div",bo,[(0,a.Wm)(r,{title:"文章投稿","left-arrow":"",fixed:"",onClickLeft:l.onClickLeft},{right:(0,a.w5)((()=>[(0,a._)("span",{style:{"margin-left":"1rem"},onClick:t[0]||(t[0]=(0,s.iM)(((...e)=>l.uploadSend&&l.uploadSend(...e)),["stop"]))},(0,D.zw)(this.$route.query.articleId?"确认编辑":"发送"),1)])),_:1},8,["onClickLeft"]),(0,a._)("div",Co,[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{title:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.selectedCom,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.channelId},[(0,a.Wm)(c,{type:"primary",size:"mini",onClick:l.showPop},{default:(0,a.w5)((()=>[(0,a.Uk)((0,D.zw)(e.channelName),1)])),_:2},1032,["onClick"])])))),128)),(0,a.wy)((0,a.Wm)(c,{icon:"plus",type:"primary",size:"mini",onClick:l.showPop},{default:(0,a.w5)((()=>[xo])),_:1},8,["onClick"]),[[s.F8,0===n.selectedCom.length]])])),_:1}),(0,a.Wm)(u,{show:n.show,"onUpdate:show":t[1]||(t[1]=e=>n.show=e),position:"right",style:{width:"100%",height:"100%"},class:"pop"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{title:"选择频道","left-arrow":"",onClickLeft:l.hidPop},{left:(0,a.w5)((()=>[(0,a.Wm)(h,{name:"cross",size:"18"})])),_:1},8,["onClickLeft"]),(0,a.Wm)(m,{my:n.myChannels,isSelect:!0,ref:"headerChild",onHidPop:l.hidPop},null,8,["my","onHidPop"])])),_:1},8,["show"]),(0,a.Wm)(d,null,{value:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:n.title,"onUpdate:modelValue":t[2]||(t[2]=e=>n.title=e),placeholder:"标题"},null,8,["modelValue"])])),_:1})])),_:1}),(0,a.Wm)(d,{title:"请选择封面:",clickable:"",size:"large",ref:"test"},{value:(0,a.w5)((()=>[(0,a.Wm)(w,{modelValue:n.fileList,"onUpdate:modelValue":t[3]||(t[3]=e=>n.fileList=e),"max-count":1,"after-read":l.afterRead,name:"avatar","before-read":l.beforeRead,"preview-size":[160,90],"max-size":8192e3,onOversize:l.onOversize},null,8,["modelValue","after-read","before-read","onOversize"])])),_:1},512),(0,a.Wm)(f,{ref:"editor",submitOrPost:"submit"},null,512)],512),(0,a.Wm)(u,{show:n.cutShow,"onUpdate:show":t[4]||(t[4]=e=>n.cutShow=e),position:"right",style:{width:"100%",height:"100%"}},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)(v,{type:e.type,src:n.src,onCutConfirm:l.cutConfirm,onCutCancel:l.cutCancel,key:n.key,onLoaded:l.cutLoaded},null,8,["type","src","onCutConfirm","onCutCancel","onLoaded"]))])),_:1},8,["show"]),(0,a.Wm)(k,{show:n.dialogShow,"onUpdate:show":t[5]||(t[5]=e=>n.dialogShow=e),title:"标题","show-cancel-button":"",onCancel:t[6]||(t[6]=e=>n.allowExit=!1),onConfirm:t[7]||(t[7]=e=>{n.allowExit=!0})},{default:(0,a.w5)((()=>[Io])),_:1},8,["show"])])}i(2801),i(8675),i(3462),i(7380),i(1118);const Wo=e=>((0,a.dD)("data-v-759de644"),e=e(),(0,a.Cn)(),e),Lo={class:"wangEditor wrapper"},Ao={class:"progress"},So=Wo((()=>(0,a._)("span",{class:"p5"},"图片上传中",-1))),zo={key:1,class:"icon"},Do={class:"p5"};function $o(e,t,i,o,n,l){const r=(0,a.up)("van-loading"),c=(0,a.up)("van-icon"),d=(0,a.up)("van-progress"),h=(0,a.up)("Editor"),m=(0,a.up)("Toolbar"),u=(0,a.up)("van-popup");return(0,a.wg)(),(0,a.iD)("div",Lo,[(0,a.wy)((0,a._)("div",Ao,[n.upLoadProgress<100?((0,a.wg)(),(0,a.j4)(r,{key:0,type:"spinner",color:"#1989fa",size:"24px"},{default:(0,a.w5)((()=>[So])),_:1})):((0,a.wg)(),(0,a.iD)("div",zo,[(0,a.Wm)(c,{name:"checked",color:"green",size:"24px"}),(0,a._)("span",Do,"上传完成"+(0,D.zw)(n.fileCount?"("+n.fileCount+")":null),1)])),(0,a.Wm)(d,{percentage:n.upLoadProgress,style:{width:"100%"}},null,8,["percentage"])],512),[[s.F8,0!==n.upLoadProgress]]),(0,a._)("div",null,[(0,a.Wm)(h,{modelValue:n.html,"onUpdate:modelValue":t[0]||(t[0]=e=>n.html=e),defaultConfig:n.editorConfig,mode:n.mode,class:"editor p4",onOnCreated:l.onCreated,onOnFocus:l.onFocus,onOnBlur:l.onBlur},null,8,["modelValue","defaultConfig","mode","onOnCreated","onOnFocus","onOnBlur"])]),(0,a.Wm)(u,{show:n.show,"onUpdate:show":t[1]||(t[1]=e=>n.show=e),overlay:!1,lockScroll:!1,position:this.$store.state.setup&&this.$store.state.setup.system?"top":"bottom"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(m,{class:"toolbar",editor:n.editor,defaultConfig:n.toolbarConfig,mode:n.mode},null,8,["editor","defaultConfig","mode"]),[[s.F8,n.focusing]])])),_:1},8,["show","position"])])}var Uo=i(6126),Fo=i(6265),jo=i.n(Fo),Vo={components:{Editor:Uo.M,Toolbar:Uo.o},props:{submitOrPost:{type:String}},data(){return{focusing:!0,windowHeight:window.innerHeight,originHeight:window.innerHeight,editor:null,html:"",toolbarConfig:{toolbarKeys:["emotion","uploadImage","header3","bold","blockquote","undo","redo","bulletedList"]},editorConfig:{placeholder:"submit"===this.submitOrPost?"投稿的内容审核后可见，若没选择封面，则默认内容第一张图片作为封面，若内容无图片，则将小猫作为封面":"发布到合适的社区，会有更多曝光机会，错误选择社区会被处理",autoFocus:!1,scroll:!1,hoverbarKeys:{link:{menuKeys:["editLink","viewLink"]},image:{menuKeys:["imageWidth100","deleteImage"]}},MENU_CONF:{insertLink:{checkLink:this.customCheckLinkFn},uploadImage:{customUpload:this.uploadImage}}},mode:"simple",upLoadProgress:0,fileCount:0,show:!1}},methods:{onCreated(e){this.editor=Object.seal(e)},onFocus(){this.show=!0},onBlur(){this.show=!1},customCheckLinkFn(e,t){return 0===t.indexOf("http")||(alert("链接必须以 http/https 开头!"),"链接必须以 http/https 开头")},async uploadImage(e,t){if(-1===this.$store.state.imageType.indexOf(e.type))return void l.F.fail("格式不支持!");this.fileCount++;const i=this.submitOrPost;let s=new FormData;s.append(i,e);let a="";await jo()({url:this.$store.state.URL+"users/"+i+"Upload",method:"post",data:s,onUploadProgress:e=>{e.lengthComputable&&(this.upLoadProgress=parseInt(e.loaded/e.total*100))}}).then((e=>{a=e;let s=this.$store.state.URL+"upload/"+i+"/"+a.data;t(s)}))}},mounted(){},beforeUnmount(){const e=this.editor;null!=e&&e.destroy()}};const Bo=(0,k.Z)(Vo,[["render",$o],["__scopeId","data-v-759de644"]]);var Ho=Bo;const Ro={class:"imageCut wrapper bt"},qo={class:"container"},Mo={class:"img-container"},To={src:"",ref:"image",alt:""};function No(e,t,i,s,o,n){const l=(0,a.up)("van-icon"),r=(0,a.up)("van-nav-bar");return(0,a.wg)(),(0,a.iD)("div",Ro,[(0,a.Wm)(r,{title:"裁剪",onClickRight:n.confirm,fixed:"",onClickLeft:n.cancel},{left:(0,a.w5)((()=>[(0,a.Wm)(l,{name:"cross",size:"1rem",color:"red"})])),right:(0,a.w5)((()=>[(0,a.Wm)(l,{name:"success",size:"1rem"})])),_:1},8,["onClickRight","onClickLeft"]),(0,a._)("div",qo,[(0,a._)("div",Mo,[(0,a._)("img",To,null,512)])])])}var Go=i(255),Po=i.n(Go),Eo={name:"ImageCut",props:{src:{type:String},type:{type:String}},data(){return{myCropper:null,afterImg:"",imgType:""}},mounted(){this.init(),this.replace(this.src),this.imgType=this.type,this.$nextTick((()=>{this.$emit("loaded")}))},methods:{cancel(){this.$emit("cutCancel")},confirm(){return this.sureSava(),this.$emit("cutConfirm",this.afterImg),!0},replace(e){this.myCropper.replace(e)},init(){this.myCropper=new(Po())(this.$refs.image,{viewMode:2,dragMode:"move",aspectRatio:16/9,background:!0,autoCropArea:.8,zoomOnWheel:!0})},sureSava(){this.afterImg=this.myCropper.getCroppedCanvas({imageSmoothingQuality:"high"}).toDataURL(this.imgType)}}};const Yo=(0,k.Z)(Eo,[["render",No],["__scopeId","data-v-7889bce4"]]);var Oo=Yo,Qo={name:"SubmitView",inject:["reload"],components:{ChannelEdit:Mt,WangEditor:Ho,ImageCut:Oo},data(){return{cutShow:!1,show:!1,src:"",title:"",fileList:[{url:""}],myChannels:[],selectedCom:[],key:1,cover:" ",dialogShow:!1,allowExit:!1,saved:!1,draftCreatedAt:0}},methods:{hidPop(){this.show=!1,this.selectedCom=this.$refs.headerChild.selectedCom},showPop(){this.show=!0},cutLoaded(){l.F.clear()},cutConfirm(e){this.fileList[0].content=e,this.src=e,this.cutShow=!1},cutCancel(){this.cutShow=!1,this.fileList.length=0},onOversize(){(0,l.F)("文件大小不能超过 8M!")},onClickLeft(){this.$router.back()},afterRead(e){this.key=this.reload();let t=e.content.split(",");this.type=t[0].match(/:(.*?);/)[1],this.src=e.content,this.cutShow=!0},beforeRead(e){return-1!==this.$store.state.imageType.indexOf(e.type)?(l.F.loading({message:"处理中...",overlay:!0,duration:0}),!0):((0,l.F)("您选择的格式不支持或选择了多张图片！"),!1)},base64toFile(e,t){let i=e.split(","),s=i[0].match(/:(.*?);/)[1],a=s.split("/")[1],o=atob(i[1]),n=o.length,l=new Uint8Array(n);while(n--)l[n]=o.charCodeAt(n);return new File([l],`${t}.${a}`,{type:s})},async uploadSend(){if(0===this.selectedCom.length||""===this.title||""===this.$refs.editor.html||"<p><br></p>"===this.$refs.editor.html)l.F.fail("存在未填写字段！");else{if(l.F.loading({message:"提交中...",forbidClick:!0,duration:0,overlay:!0}),0!==this.fileList.length){if("str"!==this.src){const e=new FormData;e.append("cover",this.base64toFile(this.src,"file")),await this.$axios.post("coverUpload",e).then((e=>{this.cover=e}))}}else this.cover=" ";const e=this.$store.state.user.userId,t=this.selectedCom[0].channelId,i=this.title,s=this.$refs.editor.html;let a={authorId:e,channelId:t,title:i,cover:this.cover,content:s},o="投稿成功，等待审核";this.$route.query.articleId?(o="编辑成功！",a={...a,articleId:this.$route.query.articleId},a=T().stringify(a),await this.$axios.post("articleEdit",a)):(a=T().stringify(a),await this.$axios.post("articleSubmit",a)),this.saved=!0,l.F.clear(),(0,l.F)({message:o,forbidClick:!0,onClose:()=>{this.$router.back()}})}},dataGet(){this.fileList=[];const e={userId:this.$store.state.user.userId};this.$axios.get("chaListShow",{params:e}).then((e=>{this.myChannels=e[0]}))}},mounted(){if(this.dataGet(),this.$route.query.articleId){l.F.loading({message:"数据获取中",overlay:!0,duration:0});const e={articleId:this.$route.query.articleId,URL:this.$store.state.URL};this.$axios.get("articleItemGet",{params:e}).then((e=>{this.title=e[0].title,this.selectedCom[0]=e[2],this.$refs.editor.html=e[0].content," "!==e[0].cover&&(this.fileList[0]={url:this.$store.state.URL+"upload/cover/"+e[0].cover},this.cover=e[0].cover,this.src="str"),l.F.clear()}))}if(this.$route.query.createdAt){l.F.loading({message:"数据获取中",overlay:!0,duration:0});const e={createdAt:this.$route.query.createdAt,URL:this.$store.state.URL,userId:this.$store.state.user.userId};this.$axios.get("draftListGet",{params:e}).then((e=>{this.draftCreatedAt=e.createdAt,this.title=e.title,e.channelId&&(this.selectedCom=e.channelId),this.$refs.editor.html=e.content," "!==e.cover&&(this.fileList[0]={url:this.$store.state.URL+"upload/cover/"+e.cover},this.cover=e.cover,this.src="str"),l.F.clear()}))}},beforeRouteLeave(e,t,i){this.$route.query.articleId||""===this.$refs.editor.html||"<p><br></p>"===this.$refs.editor.html||this.saved?i(!0):setTimeout((()=>{r.V.confirm({title:"是否保存到草稿箱"}).then((async()=>{if(l.F.loading({message:"请求中",overlay:!0,duration:0}),0!==this.fileList.length){if("str"!==this.src){const e=new FormData;e.append("cover",this.base64toFile(this.src,"file")),await this.$axios.post("coverUpload",e).then((e=>{this.cover=e}))}}else this.cover=" ";const e=this.$store.state.user.userId,t=this.selectedCom,s=this.title,a=this.$refs.editor.html;let o={authorId:e,channelId:t,title:s,cover:this.cover,content:a,createdAt:this.draftCreatedAt};o=T().stringify(o),await this.$axios.post("draftSave",o).then((e=>{l.F.clear(),l.F.success({message:"保存成功!",onClose:i})}))})).catch((()=>{i(!0)}))}),1)}};const Ko=(0,k.Z)(Qo,[["render",_o],["__scopeId","data-v-517fca78"]]);var Zo=Ko;const Jo={class:"post submit pt wrapper"},Xo={class:"bulk"},en={key:0},tn={key:1},sn={class:"outBox"},an={class:"iconBox"},on={class:"textBox"},nn={class:"outBox"},ln={class:"iconBox"},rn={class:"textBox"},cn={class:"outBox"},dn={class:"iconBox"},hn={class:"textBox"};function mn(e,t,i,s,o,n){const l=(0,a.up)("van-nav-bar"),r=(0,a.up)("van-icon"),c=(0,a.up)("van-cell"),d=(0,a.up)("van-grid-item"),h=(0,a.up)("van-grid"),m=(0,a.up)("van-popup"),u=(0,a.up)("van-field"),p=(0,a.up)("van-cell-group"),g=(0,a.up)("WangEditor");return(0,a.wg)(),(0,a.iD)("div",Jo,[(0,a.Wm)(l,{title:"发帖","right-text":this.$route.query.articleId?"确认编辑":"发送","left-arrow":"",onClickRight:n.uploadSend,fixed:"",onClickLeft:n.onClickLeft},null,8,["right-text","onClickRight","onClickLeft"]),(0,a._)("div",Xo,[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{title:"选择社区","is-link":"",onClick:n.showPop},{value:(0,a.w5)((()=>[o.selectedCom.id?((0,a.wg)(),(0,a.iD)("div",tn,[(0,a._)("div",sn,[(0,a._)("div",an,[(0,a._)("div",{class:"foreground",style:(0,D.j5)({background:o.selectedCom.foreground})},[(0,a.Wm)(r,{"class-prefix":o.selectedCom.icon+" iconfont",color:o.selectedCom.color,size:"0.6rem"},null,8,["class-prefix","color"])],4)]),(0,a._)("p",on,(0,D.zw)(o.selectedCom.communityName),1)])])):((0,a.wg)(),(0,a.iD)("span",en,"选择想要发布到的社区"))])),_:1},8,["onClick"]),(0,a.Wm)(m,{show:o.show,"onUpdate:show":t[0]||(t[0]=e=>o.show=e),position:"right",style:{width:"100%",height:"100%"},class:"pop"},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{title:"选择社区",onClickLeft:n.hidPop},{left:(0,a.w5)((()=>[(0,a.Wm)(r,{name:"cross",size:"18"})])),_:1},8,["onClickLeft"]),(0,a.Wm)(c,{title:"我的社区"}),(0,a.Wm)(h,{direction:"horizontal","column-num":2,clickable:"",gutter:"0.2rem"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.myCommunitys,(e=>((0,a.wg)(),(0,a.j4)(d,{key:e,onClick:t=>n.comSelect(e)},{default:(0,a.w5)((()=>[(0,a._)("div",nn,[(0,a._)("div",ln,[(0,a._)("div",{class:"foreground",style:(0,D.j5)({background:e.foreground})},[(0,a.Wm)(r,{"class-prefix":e.icon+" iconfont",color:e.color,size:"0.6rem"},null,8,["class-prefix","color"])],4)]),(0,a._)("p",rn,(0,D.zw)(e.communityName),1)])])),_:2},1032,["onClick"])))),128))])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.otherCoummunity,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e},[(0,a.Wm)(c,{title:e.communityClass},null,8,["title"]),(0,a.Wm)(h,{direction:"horizontal","column-num":2,clickable:"",gutter:"0.2rem"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.content,(e=>((0,a.wg)(),(0,a.j4)(d,{key:e,onClick:t=>n.comSelect(e)},{default:(0,a.w5)((()=>[(0,a._)("div",cn,[(0,a._)("div",dn,[(0,a._)("div",{class:"foreground",style:(0,D.j5)({background:e.foreground})},[(0,a.Wm)(r,{"class-prefix":e.icon+" iconfont",color:e.color,size:"0.6rem"},null,8,["class-prefix","color"])],4)]),(0,a._)("p",hn,(0,D.zw)(e.communityName),1)])])),_:2},1032,["onClick"])))),128))])),_:2},1024)])))),128))])),_:1},8,["show"]),(0,a.Wm)(c,null,{value:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:o.title,"onUpdate:modelValue":t[1]||(t[1]=e=>o.title=e),placeholder:"标题"},null,8,["modelValue"])])),_:1})])),_:1}),(0,a.Wm)(g,{ref:"editor",submitOrPost:"post"},null,512)])])}var un={name:"PostView",components:{WangEditor:Ho},data(){return{show:!1,title:"",myCommunitys:[],allCommunitys:[],selectedComId:-1,selectedCom:{},communityClass:this.$store.state.communityClass,otherCoummunity:[],saved:!1,draftCreatedAt:0}},methods:{comSelect(e){this.selectedComId=e.communityId,this.selectedCom=e,this.hidPop()},hidPop(){this.show=!1},showPop(){this.show=!0},onClickLeft(){this.$router.back()},async communityGet(){const e={userId:this.$store.state.user.userId};await this.$axios.get("comListShow",{params:e}).then((e=>{this.myCommunitys=e})),await this.$axios.get("comGet",{params:e}).then((e=>{this.allCommunitys=e})),this.otherCoummunity=this.communityClass.map((e=>{let t={};return t.communityClass=e,t.content=this.allCommunitys.filter((t=>t.communityClass.indexOf(e)>-1)),t}))},async uploadSend(){if(-1===this.selectedComId||""===this.title||""===this.$refs.editor.html||"<p><br></p>"===this.$refs.editor.html)l.F.fail("存在未填写字段！");else{l.F.loading({message:"提交中...",forbidClick:!0,duration:0,overlay:!0});const e=this.$store.state.user.userId,t=this.selectedComId,i=this.title,s=this.$refs.editor.html;let a={authorId:e,channelId:t,title:i,content:s,isSubmit:!1},o="发帖成功！";this.$route.query.articleId?(o="编辑成功！",a={...a,articleId:this.$route.query.articleId},a=T().stringify(a),await this.$axios.post("articleEdit",a)):(a=T().stringify(a),await this.$axios.post("articleSubmit",a)),this.saved=!0,l.F.clear(),(0,l.F)({message:o,forbidClick:!0,onClose:()=>{this.$router.back()}})}}},mounted(){if(this.communityGet(),this.$route.query.articleId){l.F.loading({message:"数据获取中",overlay:!0,duration:0});const e={articleId:this.$route.query.articleId,URL:this.$store.state.URL};this.$axios.get("articleItemGet",{params:e}).then((e=>{this.title=e[0].title,this.selectedCom=e[2],this.selectedComId=e[2].channelId,this.$refs.editor.html=e[0].content,l.F.clear()}))}if(this.$route.query.createdAt){l.F.loading({message:"数据获取中",overlay:!0,duration:0});const e={createdAt:this.$route.query.createdAt,URL:this.$store.state.URL,userId:this.$store.state.user.userId};this.$axios.get("draftListGet",{params:e}).then((e=>{this.draftCreatedAt=e.createdAt,this.title=e.title,e.channelId&&(this.selectedCom=e.channelId,this.selectedComId=e.channelId.communityId),this.$refs.editor.html=e.content,l.F.clear()}))}},beforeRouteLeave(e,t,i){this.$route.query.articleId||""===this.$refs.editor.html||"<p><br></p>"===this.$refs.editor.html||this.saved?i(!0):setTimeout((()=>{r.V.confirm({title:"是否保存到草稿箱"}).then((async()=>{l.F.loading({message:"请求中",overlay:!0,duration:0});const e=this.$store.state.user.userId,t=this.selectedCom,s=this.title,a=this.$refs.editor.html;let o={authorId:e,channelId:t,title:s,content:a,createdAt:this.draftCreatedAt};o=T().stringify(o),await this.$axios.post("draftSave",o).then((e=>{l.F.clear(),l.F.success({message:"保存成功!",onClose:i})}))})).catch((()=>{i(!0)}))}),1)}};const pn=(0,k.Z)(un,[["render",mn],["__scopeId","data-v-60966d7a"]]);var gn=pn;const wn=e=>((0,a.dD)("data-v-6990e771"),e=e(),(0,a.Cn)(),e),fn={class:"login wrapper pt"},vn={style:{margin:"16px"}},kn=(0,a.Uk)(" 登录 "),yn={style:{display:"flex","justify-content":"space-between",padding:"0 1rem","align-items":"center"}},bn=wn((()=>(0,a._)("u",null,"没有账号? 去注册",-1)));function Cn(e,t,i,s,o,n){const l=(0,a.up)("van-button"),r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-field"),d=(0,a.up)("van-cell-group"),h=(0,a.up)("van-form"),m=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",fn,[(0,a.Wm)(r,{title:"登录",fixed:""},{left:(0,a.w5)((()=>[(0,a.Wm)(l,{type:"primary",icon:"cross",onClick:n.toHome,color:"white"},null,8,["onClick"])])),_:1}),(0,a.Wm)(h,{onSubmit:n.onSubmit},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{inset:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:o.username,"onUpdate:modelValue":t[0]||(t[0]=e=>o.username=e),name:"phoneNumber",label:"手机号",placeholder:"11位手机号",rules:[{pattern:o.pattern,message:"请填写正确的11位手机号"}],autocomplete:"username"},null,8,["modelValue","rules"]),(0,a.Wm)(c,{modelValue:o.password,"onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),type:"password",name:"password",label:"密码",placeholder:"密码",autocomplete:"current-password",rules:[{pattern:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,16}$/,message:"密码必须包括字母和数字，且在6到18位之间"}]},null,8,["modelValue","rules"])])),_:1}),(0,a._)("div",vn,[(0,a.Wm)(l,{round:"",block:"",color:"black","native-type":"submit"},{default:(0,a.w5)((()=>[kn])),_:1})])])),_:1},8,["onSubmit"]),(0,a._)("div",yn,[(0,a.Wm)(m,{to:"",class:"p6"},{default:(0,a.w5)((()=>[(0,a._)("u",{onClick:t[2]||(t[2]=(...e)=>n.forget&&n.forget(...e))},"忘记密码?")])),_:1}),(0,a.Wm)(m,{to:"/register",class:"p6"},{default:(0,a.w5)((()=>[bn])),_:1})])])}var xn={name:"LoginView",data(){return{username:"18228291241",password:"admin123",pattern:/(^1([38][0-9]|4[579]|5[0-3,5-9]|6[6]|7[0135678]|9[89]))|(886)\d{8}$/,activeNames:[]}},methods:{onSubmit(){l.F.loading({message:"尝试登录中",overlay:!0,duration:0});let e={phoneNumber:this.username,password:this.password};const t=T().stringify(e);return this.$axios.post("userLogin",t).then((e=>{"object"===typeof e?(this.$store.commit("setUser",e),l.F.success({message:"登录成功！",onClose:this.onClose,overlay:!0})):"error"===e?l.F.fail({message:"账号或密码错误！"}):"notExist"===e&&l.F.fail({message:"用户不存在！"})})),!1},onClose(){0===this.$store.state.user.channels.channel.length?this.$router.replace("/channelSelect"):window.restart()},toHome(){window.restart()},forget(){(0,l.F)({message:"还是联系一下管理员吧",position:"bottom"})}},mounted(){}};const In=(0,k.Z)(xn,[["render",Cn],["__scopeId","data-v-6990e771"]]);var _n=In;const Wn=e=>((0,a.dD)("data-v-1b6c1b60"),e=e(),(0,a.Cn)(),e),Ln={class:"register wrapper pt"},An={style:{margin:"16px"}},Sn=(0,a.Uk)(" 提交 "),zn={style:{display:"flex","justify-content":"space-between",padding:"0 1rem","align-items":"center"}},Dn=Wn((()=>(0,a._)("u",null,"已有账号? 去登录",-1)));function $n(e,t,i,s,o,n){const l=(0,a.up)("van-nav-bar"),r=(0,a.up)("van-field"),c=(0,a.up)("van-cell-group"),d=(0,a.up)("van-button"),h=(0,a.up)("van-form"),m=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",Ln,[(0,a.Wm)(l,{title:"注册",fixed:"",onClickLeft:n.onClickLeft,"left-arrow":""},null,8,["onClickLeft"]),(0,a.Wm)(h,{onSubmit:n.onSubmit},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{inset:""},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:o.phoneNumber,"onUpdate:modelValue":t[0]||(t[0]=e=>o.phoneNumber=e),name:"phoneNumber",label:"手机号",placeholder:"11位手机号",autocomplete:"username",rules:[{pattern:o.pattern,message:"请填写正确的11位手机号"}]},null,8,["modelValue","rules"]),(0,a.Wm)(r,{modelValue:o.password,"onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),type:"password",name:"password",label:"密码",placeholder:"密码",autocomplete:"current-password",rules:[{pattern:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,16}$/,message:"密码必须包括字母和数字，且在6到18位之间"}]},null,8,["modelValue","rules"])])),_:1}),(0,a._)("div",An,[(0,a.Wm)(d,{round:"",block:"",type:"primary","native-type":"submit"},{default:(0,a.w5)((()=>[Sn])),_:1})])])),_:1},8,["onSubmit"]),(0,a._)("div",zn,[(0,a.Wm)(m,{to:"/login",class:"p6",style:{color:"#1989fa"}},{default:(0,a.w5)((()=>[Dn])),_:1})])])}var Un={name:"LoginView",data(){return{phoneNumber:"",password:"",pattern:/(^1([38][0-9]|4[579]|5[0-3,5-9]|6[6]|7[0135678]|9[89]))|(886)\d{8}$/}},methods:{onClickLeft(){this.$router.back()},onSubmit(e){let t=T().stringify(e);return this.$axios.post("userRegister",t).then((e=>{1===e?l.F.fail("用户已存在！请直接登录"):2===e&&l.F.success({duration:2e3,message:"注册成功！",onClose:this.onClose})})),!1},onClose(){this.$router.replace("/login")}},mounted(){}};const Fn=(0,k.Z)(Un,[["render",$n],["__scopeId","data-v-1b6c1b60"]]);var jn=Fn;const Vn={class:"profileEdit wrapper pt"};function Bn(e,t,i,s,o,n){const l=(0,a.up)("van-icon"),r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-uploader"),d=(0,a.up)("van-cell"),h=(0,a.up)("van-field"),m=(0,a.up)("van-picker"),u=(0,a.up)("van-popup"),p=(0,a.up)("van-cell-group");return(0,a.wg)(),(0,a.iD)("div",Vn,[(0,a.Wm)(r,{title:"资料修改","left-arrow":"",fixed:"",onClickLeft:n.onClickLeft},{right:(0,a.w5)((()=>[(0,a.Wm)(l,{name:"success",size:"18",onClick:n.save},null,8,["onClick"])])),_:1},8,["onClickLeft"]),(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{title:"头像",clickable:"",size:"large",center:""},{value:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:o.fileList,"onUpdate:modelValue":t[0]||(t[0]=e=>o.fileList=e),"max-count":1,"after-read":n.afterRead,name:"avatar","before-read":n.beforeRead},null,8,["modelValue","after-read","before-read"])])),_:1}),(0,a.Wm)(h,{modelValue:o.nickname,"onUpdate:modelValue":t[1]||(t[1]=e=>o.nickname=e),label:"设置昵称",placeholder:"请输入昵称","input-align":"right",maxlength:"12"},null,8,["modelValue"]),(0,a.Wm)(h,{modelValue:o.sex,"onUpdate:modelValue":t[2]||(t[2]=e=>o.sex=e),label:"设置性别",placeholder:"请设置性别","input-align":"right",readonly:"",onClick:n.showPopup},null,8,["modelValue","onClick"]),(0,a.Wm)(h,{modelValue:o.signature,"onUpdate:modelValue":t[3]||(t[3]=e=>o.signature=e),label:"设置签名",placeholder:"请输入签名",rows:"1",autosize:"",type:"textarea"},null,8,["modelValue"]),(0,a.Wm)(u,{show:o.show,"onUpdate:show":t[4]||(t[4]=e=>o.show=e),position:"bottom",round:""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{title:"性别修改",columns:o.columns,onConfirm:n.onConfirm,onCancel:n.hidden,"item-height":".7rem","visible-item-count":"5"},null,8,["columns","onConfirm","onCancel"])])),_:1},8,["show"])])),_:1})])}var Hn={name:"ProfileEdit",inject:["avatarGet"],data(){return{src:"",sex:"",signature:"",nickname:"",show:!1,columns:["男","女"],fileList:[{url:this.$store.state.URL+"images/avatar/notlogin.png"}],avatar:0,avatarChanged:!1,avatarPath:""}},methods:{onClickLeft(){this.$router.back()},showPopup(){this.show=!0},hidden(){this.show=!1},onConfirm(e){this.sex=e,this.hidden()},afterRead(e){this.avatar=e,this.avatarChanged=!0},beforeRead(e){return"image/jpeg"===e.type||"image/png"===e.type||"image/webp"===e.type||((0,l.F)("格式不支持"),!1)},async save(){if(0===this.fileList.length||""===this.nickname)l.F.fail("信息不全");else{const e=l.F.loading({message:"提交中...",forbidClick:!0,duration:0,overlay:!0});if(!0===this.avatarChanged){const e=new FormData;e.append("avatar",this.avatar.file),await this.$axios.post("avatarUpload",e).then((e=>{this.avatarPath=e}))}const t={avatarPath:this.avatarPath,nickname:this.nickname,signature:this.signature,sex:this.sex,userId:this.$store.state.user.userId};this.$axios.get("userDataUpdate",{params:t}).then((t=>{e.clear(),l.F.success({message:"提交成功",forbidClick:!0,onClose:()=>{this.$router.replace("/my")}})}))}}},mounted(){const e={userId:this.$store.state.user.userId};this.$axios.get("userDataShow",{params:e}).then((e=>{this.fileList[0].url=this.avatarGet(e.avatar),this.nickname=e.nickname,this.signature=e.signature,this.sex=e.sex}))}};const Rn=(0,k.Z)(Hn,[["render",Bn],["__scopeId","data-v-0457c99d"]]);var qn=Rn;const Mn={class:"draft wrapper pt"};function Tn(e,t,i,s,o,n){const l=(0,a.up)("van-nav-bar"),r=(0,a.up)("DraftList");return(0,a.wg)(),(0,a.iD)("div",Mn,[(0,a.Wm)(l,{title:"草稿箱","left-arrow":"",fixed:"",onClickLeft:n.onClickLeft},null,8,["onClickLeft"]),(0,a.Wm)(r)])}const Nn=e=>((0,a.dD)("data-v-29db019d"),e=e(),(0,a.Cn)(),e),Gn={class:"draftList wrapper"},Pn=(0,a.Uk)("加载中..."),En={key:2},Yn=["onClick"],On={class:"top p6"},Qn={class:"type"},Kn={class:"time p6g"},Zn={class:"mid p5"},Jn={class:"title"},Xn={class:"bottom p5g"},el={class:"content van-multi-ellipsis--l3"},tl=Nn((()=>(0,a._)("u",null,"我有问题?",-1))),il=Nn((()=>(0,a._)("p",null,"问:如何删除草稿?",-1))),sl=Nn((()=>(0,a._)("ol",null,[(0,a._)("li",null,"答:右滑删除")],-1)));function al(e,t,i,s,o,n){const l=(0,a.up)("van-loading"),r=(0,a.up)("van-empty"),c=(0,a.up)("van-button"),d=(0,a.up)("van-swipe-cell"),h=(0,a.up)("van-collapse-item"),m=(0,a.up)("van-collapse");return(0,a.wg)(),(0,a.iD)("div",Gn,[o.loading?((0,a.wg)(),(0,a.j4)(l,{key:0,vertical:""},{default:(0,a.w5)((()=>[Pn])),_:1})):o.list.length?((0,a.wg)(),(0,a.iD)("div",En,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.list,(e=>((0,a.wg)(),(0,a.j4)(d,{key:e.createdAt},{right:(0,a.w5)((()=>[(0,a.Wm)(c,{square:"",type:"danger",text:"删除",style:{height:"100%"},onClick:t=>n.delDraft(e.createdAt)},null,8,["onClick"])])),default:(0,a.w5)((()=>[(0,a._)("div",{class:"item",style:{"margin-top":"5px",background:"white"},onClick:t=>n.draftEdit(e.cover,e.createdAt)},[(0,a._)("div",On,[(0,a._)("span",Qn,(0,D.zw)(e.cover?"投稿":"帖子"),1),(0,a._)("span",Kn,"上次编辑 "+(0,D.zw)(n.before(+e.updatedAt)),1)]),(0,a._)("div",Zn,[(0,a._)("div",Jn,(0,D.zw)(""===e.title?"(无标题)":e.title),1)]),(0,a._)("div",Xn,[(0,a._)("div",el,(0,D.zw)(e.content),1)])],8,Yn)])),_:2},1024)))),128)),(0,a.Wm)(m,{modelValue:o.activeNames,"onUpdate:modelValue":t[0]||(t[0]=e=>o.activeNames=e),style:{"margin-top":".5rem"}},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{title:"",icon:"question","is-link":!1},{title:(0,a.w5)((()=>[tl])),default:(0,a.w5)((()=>[il,sl])),_:1})])),_:1},8,["modelValue"])])):((0,a.wg)(),(0,a.j4)(r,{key:1,description:"暂无草稿"}))])}var ol={name:"DraftList",inject:["before"],props:{},data(){return{loading:!1,list:[],activeNames:[]}},methods:{draftEdit(e,t){e?this.$router.push({path:"/submit",query:{createdAt:t}}):this.$router.push({path:"/post",query:{createdAt:t}})},delDraft(e){r.V.confirm({title:"确认删除?"}).then((async()=>{l.F.loading({message:"删除中",overlay:!0,duration:0});for(let i in this.list)if(this.list[i].createdAt==e){this.list.splice(i,1);break}const t={list:this.list,userId:this.$store.state.user.userId};await this.$axios.post("draftUpdate",T().stringify(t)).then((e=>{l.F.clear(),l.F.success("删除成功!")}))})).catch((()=>{}))}},mounted(){const e={userId:this.$store.state.user.userId};this.$axios.get("draftListGet",{params:e}).then((e=>{this.list=e}))}};const nl=(0,k.Z)(ol,[["render",al],["__scopeId","data-v-29db019d"]]);var ll=nl,rl={name:"DraftView",components:{DraftList:ll},data(){return{}},methods:{onClickLeft(){this.$router.back()}},mounted(){}};const cl=(0,k.Z)(rl,[["render",Tn]]);var dl=cl;const hl={class:"article wrapper pt"},ml=(0,a.Uk)("恢复到上次阅读位置"),ul=(0,a.Uk)("加载中..."),pl={key:1,class:"bulk",id:"articleBulk",ref:"bulk"},gl={class:"bottom"},wl=(0,a.Uk)("上传文件"),fl={class:"option"},vl=(0,a.Uk)("发送");function kl(e,t,i,o,n,l){const r=(0,a.up)("van-icon"),c=(0,a.up)("van-nav-bar"),d=(0,a.up)("van-button"),h=(0,a.up)("van-loading"),m=(0,a.up)("ArticleItem"),u=(0,a.up)("Comment"),p=(0,a.up)("van-field"),g=(0,a.up)("van-grid-item"),w=(0,a.up)("van-grid"),f=(0,a.up)("van-cell"),v=(0,a.up)("van-uploader"),k=(0,a.up)("van-popup"),y=(0,a.up)("CollectBox");return(0,a.wg)(),(0,a.iD)("div",hl,[(0,a.Wm)(c,{"left-arrow":"",onClickLeft:l.onClickLeft,fixed:"",title:"文章详情",onClickRight:t[0]||(t[0]=e=>l.actionShow(n.articleId))},{right:(0,a.w5)((()=>[(0,a.Wm)(r,{name:"ellipsis",size:"18"})])),_:1},8,["onClickLeft"]),(0,a.Wm)(s.uT,{name:"van-slide-right",class:"recover"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(d,{size:"mini",round:"","icon-position":"right",icon:"arrow",onClick:l.recover,color:"black"},{default:(0,a.w5)((()=>[ml])),_:1},8,["onClick"]),[[s.F8,n.visible]])])),_:1}),n.loading?((0,a.wg)(),(0,a.j4)(h,{key:0,size:"1rem",vertical:"",style:{"padding-top":"1rem"}},{default:(0,a.w5)((()=>[ul])),_:1})):(0,a.kq)("",!0),n.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",pl,[0!==n.articleId&&n.past?((0,a.wg)(),(0,a.j4)(m,{ArticleId:n.articleId,Admin:n.admin,key:n.key,ref:"article",onReload:l.articleReload},null,8,["ArticleId","Admin","onReload"])):(0,a.kq)("",!0),0!==n.articleId&&n.past?((0,a.wg)(),(0,a.j4)(u,{ArticleId:n.articleId,TempComment:n.tempComment,ref:"comment",TempImages:n.readImages,key:n.commentKey,onReload:l.commentReload},null,8,["ArticleId","TempComment","TempImages","onReload"])):(0,a.kq)("",!0)],512)),(0,a._)("div",gl,[(0,a.Wm)(f,{icon:"edit",center:"","title-style":"flex:1",border:!1},{title:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:n.message,"onUpdate:modelValue":t[1]||(t[1]=e=>n.message=e),placeholder:"发布评论("+n.comCount+")",onFocus:l.commentFocus},null,8,["modelValue","placeholder","onFocus"])])),value:(0,a.w5)((()=>[(0,a.Wm)(w,{border:!1,center:"","column-num":"3","icon-size":"0.5rem"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{icon:"star","icon-color":n.collectState?"#000":"",text:n.collectState?"已收藏":"收藏",onClick:l.collectIt},null,8,["icon-color","text","onClick"]),(0,a.Wm)(g,{icon:"good-job","icon-color":n.likeState?"#000":"",text:n.likeCount+"",onClick:l.like},null,8,["icon-color","text","onClick"]),(0,a.Wm)(g,{icon:"share",text:"分享",onClick:l.share},null,8,["onClick"])])),_:1})])),_:1})]),(0,a.Wm)(k,{show:n.commenting,"onUpdate:show":t[4]||(t[4]=e=>n.commenting=e),position:this.$store.state.setup&&this.$store.state.setup.system?"top":"bottom",class:"pop"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:n.message,"onUpdate:modelValue":t[2]||(t[2]=e=>n.message=e),rows:"2",autosize:"",type:"textarea",placeholder:"发布评论("+n.comCount+")",ref:"input"},null,8,["modelValue","placeholder"]),(0,a.wy)((0,a.Wm)(f,{center:"",border:!1,class:"imagesBox"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{modelValue:n.fileList,"onUpdate:modelValue":t[3]||(t[3]=e=>n.fileList=e),multiple:"",ref:"imagesSend","preview-size":"1.7rem","image-fit":"cover","after-read":l.afterRead,"before-delete":l.beforeDelete,"before-read":l.beforeRead},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{icon:"plus",type:"primary",class:"placeholder"},{default:(0,a.w5)((()=>[wl])),_:1})])),_:1},8,["modelValue","after-read","before-delete","before-read"])])),_:1},512),[[s.F8,n.commenting]]),(0,a._)("div",fl,[(0,a.Wm)(d,{type:"primary",size:"small",color:"#000",onClick:l.commentSend},{default:(0,a.w5)((()=>[vl])),_:1},8,["onClick"]),(0,a.Wm)(r,{name:"photo-o",color:"grey",size:"0.5rem",style:{padding:"10px"},onClick:l.chooseFile},null,8,["onClick"]),(0,a.Wm)(r,{name:"smile-o",color:"grey",size:"0.5rem",style:{padding:"10px"},onMousedown:(0,s.iM)(l.developing,["prevent"])},null,8,["onMousedown"]),(0,a.Wm)(r,{name:"arrow-down",color:"grey",size:"0.5rem",style:{padding:"10px"},onClick:l.loseFocus},null,8,["onClick"])])])),_:1},8,["show","position"]),n.past?((0,a.wg)(),(0,a.j4)(y,{ref:"CollectBox",onHadCollected:l.hadCollected,articleId:n.articleId,key:n.key},null,8,["onHadCollected","articleId"])):(0,a.kq)("",!0)])}const yl={class:"CandR"},bl={class:"top"},Cl={class:"p4"},xl={class:"comments"},Il={key:0,class:"author"},_l={class:"avatarBox"},Wl={class:"info"},Ll={class:"p5b"},Al={class:"isAuthor p8"},Sl={class:"p6g postTime"},zl={class:"like"},Dl={class:"p5g"},$l=["onClick"],Ul={class:"message"},Fl={key:0,class:"imageBox"},jl={key:1,class:"reply p5-5"},Vl=["onClick"],Bl={key:0,class:"replyContent"},Hl={class:"speaker"},Rl={class:"isAuthor p8"},ql={class:"replyMessage"},Ml={key:0,class:"huifu"},Tl={key:1},Nl={class:"p6g"},Gl={key:0,class:"replyBox tempReply"},Pl={class:"speaker"},El={class:"alignCenter"},Yl={class:"isAuthor p9"},Ol={class:"replyMessage"},Ql={key:0,class:"huifu"},Kl={key:1},Zl={class:"p6g"},Jl={class:"replyFrame"},Xl={class:"replyObj"},er={style:{width:"0.8rem",height:"0.8rem"}},tr={class:"p5g van-ellipsis"},ir=(0,a.Uk)("发送 ");function sr(e,t,i,o,n,l){const r=(0,a.up)("van-icon"),c=(0,a.up)("van-action-sheet"),d=(0,a.up)("van-image"),h=(0,a.up)("router-link"),m=(0,a.up)("van-button"),u=(0,a.up)("van-loading"),p=(0,a.up)("van-list"),g=(0,a.up)("van-field"),w=(0,a.up)("van-cell"),f=(0,a.up)("van-grid-item"),v=(0,a.up)("van-grid"),k=(0,a.up)("van-popup");return(0,a.wg)(),(0,a.iD)("div",yl,[(0,a._)("div",bl,[(0,a._)("p",Cl,[(0,a._)("span",null,"评论 "+(0,D.zw)(n.comCount),1),(0,a.Wm)(r,{name:"sort",size:".32rem",color:"grey",onClick:t[0]||(t[0]=e=>n.sortActionShow=!0)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,D.zw)(n.sort),1)])),_:1})])]),(0,a.Wm)(c,{show:n.sortActionShow,"onUpdate:show":t[1]||(t[1]=e=>n.sortActionShow=e),actions:n.sortActions,onSelect:l.onSelect,"cancel-text":"取消","close-on-click-action":""},null,8,["show","actions","onSelect"]),(0,a._)("div",xl,[(0,a.Wm)(p,{loading:n.loading,"onUpdate:loading":t[7]||(t[7]=e=>n.loading=e),finished:n.finished,"finished-text":"没有更多了",onLoad:l.onLoad},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.comments,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"commentItem",key:e.commentId},[""===e.userInfo.avatar||e.userInfo.avatar?((0,a.wg)(),(0,a.iD)("div",Il,[(0,a._)("div",_l,[(0,a.Wm)(h,{to:""},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{width:"1rem",height:"1rem",round:"",fit:"cover","lazy-load":"",src:l.avatarGet(e.userInfo.avatar),"icon-size":"1rem","loading-icon":l.loadingIcon()},null,8,["src","loading-icon"])])),_:2},1024)]),(0,a._)("div",Wl,[(0,a.Wm)(h,{to:"/personal/"+e.userInfo.userId,class:"alignCenter"},{default:(0,a.w5)((()=>[(0,a._)("span",Ll,(0,D.zw)(e.userInfo.nickname),1),(0,a._)("span",Al,(0,D.zw)(e.userInfo.userId===n.authorId?"作者":null),1)])),_:2},1032,["to"]),(0,a._)("p",Sl,(0,D.zw)(l.before(+e.date)),1)]),(0,a._)("div",zl,[(0,a.Wm)(m,{size:"small",color:"transparent",onClick:t=>l.commentLike(e.commentId)},{default:(0,a.w5)((()=>[(0,a._)("span",Dl,(0,D.zw)(e.like),1)])),icon:(0,a.w5)((()=>[(0,a.Wm)(r,{name:"good-job",color:l.likeState(e.commentId)},null,8,["color"])])),_:2},1032,["onClick"])])])):(0,a.kq)("",!0),(0,a._)("div",{class:"content p5",onClick:(0,s.iM)((t=>l.replying(e.commentId,e.userInfo.userId,e.userInfo.avatar,e.message,e.userInfo.nickname)),["stop"])},[(0,a._)("p",Ul,(0,D.zw)(e.message),1),e.images?((0,a.wg)(),(0,a.iD)("div",Fl,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.images,((t,i)=>((0,a.wg)(),(0,a.j4)(d,{width:"1.7rem",height:"1.7rem",fit:" cover",key:t,"lazy-load":"",src:t,radius:".08rem",onClick:(0,s.iM)((t=>l.imgPreview(e.images,i)),["stop"])},{loading:(0,a.w5)((()=>[(0,a.Wm)(u,{type:"spinner",size:"20"})])),_:2},1032,["src","onClick"])))),128))])):(0,a.kq)("",!0),e.reply&&e.reply.length||e.commentId===n.tempReply.commentId-0?((0,a.wg)(),(0,a.iD)("div",jl,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.reply,((i,o)=>((0,a.wg)(),(0,a.iD)("div",{class:"replyBox",key:i,style:(0,D.j5)({"padding-bottom":o<3?"0.2rem":0}),onClick:(0,s.iM)((t=>l.replying(e.commentId,i.speaker.id,i.speaker.avatar,i.replyMessage,i.speaker.nickname)),["stop"])},[(this.collapseId.indexOf(e.commentId)>-1?o>=0:o<3)?((0,a.wg)(),(0,a.iD)("div",Bl,[(0,a._)("p",Hl,[(0,a.Wm)(h,{to:"/personal/"+i.speaker.id,onClick:t[2]||(t[2]=(0,s.iM)((()=>{}),["stop"]))},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{width:".6rem",height:".6rem","lazy-load":"",round:"",fit:"cover",src:l.avatarGet(i.speaker.avatar),"icon-size":".6rem","loading-icon":l.loadingIcon()},null,8,["src","loading-icon"])])),_:2},1032,["to"]),(0,a._)("span",null,[(0,a.Wm)(h,{to:"/personal/"+i.speaker.id,class:"p5-5g alignCenter",onClick:t[3]||(t[3]=(0,s.iM)((()=>{}),["stop"]))},{default:(0,a.w5)((()=>[(0,a._)("span",null,(0,D.zw)(i.speaker.nickname),1),(0,a._)("span",Rl,(0,D.zw)(i.speaker.id===n.authorId?"作者":null),1)])),_:2},1032,["to"])])]),(0,a._)("p",ql,[i.listener.id!==e.userInfo.userId?((0,a.wg)(),(0,a.iD)("span",Ml,"回复")):(0,a.kq)("",!0),i.listener.id!==e.userInfo.userId?((0,a.wg)(),(0,a.iD)("span",Tl,[(0,a.Wm)(h,{to:"/personal/"+i.listener.id,class:"p5-5a",onClick:t[4]||(t[4]=(0,s.iM)((()=>{}),["stop"]))},{default:(0,a.w5)((()=>[(0,a.Uk)(" @"+(0,D.zw)(i.listener.nickname),1)])),_:2},1032,["to"])])):(0,a.kq)("",!0),(0,a._)("span",null,(0,D.zw)(i.replyMessage),1),(0,a._)("span",Nl,(0,D.zw)(l.dayjs(i.date)),1)])])):(0,a.kq)("",!0),(0,a.wy)((0,a.Wm)(m,{type:"primary",block:"",icon:"arrow-down",size:"mini",onClick:(0,s.iM)((t=>l.unfold(e.commentId)),["stop"])},{default:(0,a.w5)((()=>[(0,a.Uk)("全部回复"+(0,D.zw)(e.reply.length),1)])),_:2},1032,["onClick"]),[[s.F8,!(this.collapseId.indexOf(e.commentId)>-1)&&3==o]])],12,Vl)))),128)),e.commentId===n.tempReply.commentId-0?((0,a.wg)(),(0,a.iD)("div",Gl,[(0,a._)("p",Pl,[(0,a.Wm)(h,{to:"/personal/"+n.tempReply.speaker.id,onClick:t[5]||(t[5]=(0,s.iM)((()=>{}),["stop"]))},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{width:".6rem",height:".6rem","lazy-load":"",round:"",fit:"cover",src:l.avatarGet(n.tempReply.speaker.avatar),"icon-size":".6rem","loading-icon":l.loadingIcon()},null,8,["src","loading-icon"])])),_:1},8,["to"]),(0,a._)("span",El,[(0,a.Wm)(h,{to:"/personal/"+n.tempReply.speaker.id,class:"p5-5g",onClick:t[6]||(t[6]=(0,s.iM)((()=>{}),["stop"]))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,D.zw)(n.tempReply.speaker.nickname)+" ",1),(0,a._)("span",Yl,(0,D.zw)(n.tempReply.speaker.id===n.authorId?"作者":null),1)])),_:1},8,["to"])])]),(0,a._)("p",Ol,[n.tempReply.listener.id!==e.userInfo.userId?((0,a.wg)(),(0,a.iD)("span",Ql,"回复")):(0,a.kq)("",!0),n.tempReply.listener.id!==e.userInfo.userId?((0,a.wg)(),(0,a.iD)("span",Kl,[(0,a.Wm)(h,{to:"/personal/"+n.tempReply.listener.id,class:"p5-5a"},{default:(0,a.w5)((()=>[(0,a.Uk)(" @"+(0,D.zw)(n.tempReply.listener.nickname),1)])),_:1},8,["to"])])):(0,a.kq)("",!0),(0,a._)("span",null,(0,D.zw)(n.tempReply.replyMessage),1),(0,a._)("span",Zl,(0,D.zw)(l.dayjs(n.tempReply.date)),1)])])):(0,a.kq)("",!0)])):(0,a.kq)("",!0)],8,$l)])))),128))])),_:1},8,["loading","finished","onLoad"])]),(0,a.Wm)(k,{show:n.show,"onUpdate:show":t[9]||(t[9]=e=>n.show=e),position:this.$store.state.setup&&this.$store.state.setup.system?"top":"bottom"},{default:(0,a.w5)((()=>[(0,a._)("div",Jl,[(0,a.Wm)(w,{center:"","title-style":"flex:1",border:!1},{default:(0,a.w5)((()=>[(0,a._)("div",Xl,[(0,a._)("div",er,[(0,a.Wm)(d,{width:"0.8rem",height:"0.8rem",round:"",fit:"cover","lazy-load":"",src:l.avatarGet(n.replyObj.avatar),"icon-size":".8rem","loading-icon":l.loadingIcon()},null,8,["src","loading-icon"])]),(0,a._)("span",tr,(0,D.zw)(n.replyObj.message),1)]),(0,a.Wm)(g,{modelValue:n.replyMessage,"onUpdate:modelValue":t[8]||(t[8]=e=>n.replyMessage=e),rows:"3",autosize:"",type:"textarea",placeholder:"回复 @"+n.replyObj.nickname,ref:"input"},null,8,["modelValue","placeholder"])])),_:1}),(0,a.Wm)(w,{center:""},{title:(0,a.w5)((()=>[])),value:(0,a.w5)((()=>[(0,a.Wm)(v,{border:!1,center:"","column-num":"3","icon-size":"0.5rem"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{icon:"arrow-down",onClick:l.loseFocus},null,8,["onClick"]),(0,a.Wm)(f,{icon:"smile-o",onMousedown:(0,s.iM)(l.developing,["prevent"])},null,8,["onMousedown"]),(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,{type:"primary",size:"small",color:"#000",onClick:l.replySend},{default:(0,a.w5)((()=>[ir])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])])),_:1},8,["show","position"])])}var ar={name:"CommentReply",inject:["before","isExistChecked","developing","avatarGet","loadingIcon"],props:{ArticleId:{type:Number},TempComment:{type:Object},TempImages:{type:Array}},data(){return{articleId:this.ArticleId,comments:[],show:!1,replyObj:{},replyMessage:"",tempComment:this.TempComment,comCount:0,authorId:0,tempReply:{},collapseId:[],content:[],commentState:{},exist:!0,loading:!1,finished:!1,size:this.$store.state.size,skip:0,sortActionShow:!1,sortActions:[{name:"热门",color:"grey",subname:"最热在前"},{name:"正序",color:"grey",subname:"最早在前"},{name:"倒序",color:"black",subname:"最新在前"}],sort:"倒序"}},methods:{onSelect(e){switch(e.name){case"热门":this.comments.sort(((e,t)=>t.like-e.like));break;case"正序":this.comments.sort(((e,t)=>+e.date-+t.date));break;case"倒序":this.comments.sort(((e,t)=>+t.date-+e.date));break}this.sortActions.forEach((t=>{t.name===e.name?(this.sort=e.name,t.color="black"):t.color="grey"}))},likeState(e){if(this.commentState.commentLikedId)return-1===this.commentState.commentLikedId.indexOf(e)?"grey":"black"},async commentLike(e){const t=await this.isExistChecked(this.articleId);if(t)if(this.$store.state.user){let t;-1===this.commentState.commentLikedId.indexOf(e)?(this.commentState.commentLikedId.push(e),t="plus"):(this.commentState.commentLikedId=this.commentState.commentLikedId.filter((t=>t!==e)),t="minus"),this.exist?this.content=this.content.map((e=>(e.articleId===this.articleId&&(e.commentLikedId=[...this.commentState.commentLikedId]),e))):(this.content.push(this.commentState),this.exist=!0);const i={articleId:this.articleId,userId:this.$store.state.user.userId,content:this.content,option:t,commentId:e};await this.$axios.get("comeLikedIdUpdate",{params:i}),"plus"===t?this.comments.forEach((t=>{t.commentId===e&&t.like++})):this.comments.forEach((t=>{t.commentId===e&&t.like--}))}else this.loginState()},loginState(){r.V.confirm({title:"未登录",message:"你必须要登录才能使用此功能，是否前去登录?"}).then((()=>{this.$router.replace("/login")})).catch((()=>{}))},unfold(e){this.collapseId.push(e)},dayjs(e){e-=0;const t=u(e),i=u().valueOf(),s=t.diff(i,"day",!0);return s<=-7?u(e).format("YYYY/MM/DD"):u(e).fromNow()},imgPreview(e,t){(0,Ae.e)({images:e,startPosition:t})},replying(e,t,i,s,a){this.commentId=e,this.listener=t,this.replyObj.avatar=i,this.replyObj.message=s,this.replyObj.nickname=a,this.$nextTick((()=>{this.show=!0,this.$nextTick((()=>{this.$refs.input.focus()}))}))},loseFocus(){this.$refs.input.blur()},async replySend(){const e=await this.isExistChecked(this.articleId);if(e)if(this.$store.state.user){if(""===this.replyMessage)return void(0,l.F)("回复内容不能为空！");if(this.tempReply.commentId)return void(0,l.F)("你说话太快啦，休息一下吧！");let e={articleId:this.articleId,commentId:this.commentId,speaker:this.$store.state.user.userId,listener:this.listener,replyMessage:this.replyMessage,repliedMessage:this.replyObj.message,date:Date.now()},t=T().stringify(e);this.$axios.post("addReply",t).then((e=>{this.tempReply=e,l.F.success("回复成功！"),this.replyMessage="",this.show=!1,this.unfold(this.commentId)}))}else this.loginState()},async onLoad(){const e={articleId:this.articleId,skip:this.skip,size:this.size};await this.$axios.get("getCom",{params:e}).then((e=>{setTimeout((()=>{this.comCount=e[2],e[0]=e[0].map((e=>(e.images&&(e.images=e.images.map((e=>(e=this.$store.state.URL+"upload/commentImgs/"+e,e)))),e))),this.comments=[...this.comments,...e[0]],this.loading=!1,this.skip=this.skip+this.size,e[0].length<this.size&&(this.finished=!0)}),100),this.authorId=e[1]}))}},mounted(){if(this.$store.state.user){const e={userId:this.$store.state.user.userId,articleId:this.articleId};this.$axios.get("articleState",{params:e}).then((e=>{this.content=e[3].concat();let t=[];e[3].forEach((e=>{e.articleId===this.articleId&&t.push(e)})),t.length?(this.commentState={...t[0]},this.exist=!0):(this.exist=!1,this.commentState={articleId:this.articleId,commentLikedId:[]})}))}else this.commentState={articleId:this.articleId,commentLikedId:[]}},watch:{TempComment(e){this.tempComment=e,this.tempComment.usrInfo&&(this.comCount=this.comCount+1)}},computed:{tempImages(){return this.TempImages}},updated(){this.$emit("reload")}};const or=(0,k.Z)(ar,[["render",sr],["__scopeId","data-v-37574c95"]]);var nr=or;const lr={class:"collectBox"};function rr(e,t,i,s,o,n){const l=(0,a.up)("van-action-sheet"),r=(0,a.up)("van-field"),c=(0,a.up)("van-dialog");return(0,a.wg)(),(0,a.iD)("div",lr,[(0,a.Wm)(l,{show:o.actionsShow,"onUpdate:show":t[0]||(t[0]=e=>o.actionsShow=e),"cancel-text":"取消",title:"收藏内容",actions:n.actions,"close-on-click-action":"",onSelect:n.onSelect},null,8,["show","actions","onSelect"]),(0,a.Wm)(c,{show:o.dialogShow,"onUpdate:show":t[2]||(t[2]=e=>o.dialogShow=e),title:o.createCollect,"show-cancel-button":"",theme:"round-button","confirm-button-color":"#000","confirm-button-text":"创建","cancel-button-color":"grey",onConfirm:n.createConfirm},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:o.cbTitle,"onUpdate:modelValue":t[1]||(t[1]=e=>o.cbTitle=e),placeholder:"收藏夹名字(8字内)",required:"",size:"large",maxlength:"8","input-align":"center"},null,8,["modelValue"])])),_:1},8,["show","title","onConfirm"])])}var cr={name:"postList",props:{articleId:{type:Number}},data(){return{actionsShow:!1,createCollect:"创建收藏夹",dialogShow:!1,collectBox:[],cbTitle:""}},methods:{async createConfirm(){if(""===this.cbTitle)return void(0,l.F)("收藏夹名不能为空！");let e={name:this.cbTitle,content:[]},t=this.actions.filter((e=>e.name===this.cbTitle));0===t.length?(this.collectBox=[...this.collectBox,e],await this.collectUpdate(this.collectBox),this.actionsShow=!0):(0,l.F)("同名收藏夹已存在！")},async onSelect(e){e.name===this.createCollect?this.dialogShow=!0:this.articleId?(this.collectBox=this.collectBox.map((t=>(t.name===e.name&&t.content.push(this.articleId),t))),await this.collectUpdate(this.collectBox),this.$emit("hadCollected",!0),(0,l.F)("收藏成功！")):this.$emit("move",e.name)},async remove(e){this.collectBox=this.collectBox.map((t=>(t.content.indexOf(e)>-1&&(t.content=t.content.filter((t=>t!==e))),t))),this.$emit("hadCollected",!1),await this.collectUpdate(this.collectBox),(0,l.F)("取消收藏成功！")},async collectUpdate(e){const t={userId:this.$store.state.user.userId,actions:e};await this.$axios.get("collectUpdate",{params:t}).then((e=>{}))},collectBoxGet(){const e={userId:this.$store.state.user.userId};this.$axios.get("userDataShow",{params:e}).then((e=>{this.collectBox=e.collects.collectBox}))}},mounted(){this.$store.state.user&&this.collectBoxGet()},computed:{actions(){const e={name:this.createCollect,subname:"创建新的收藏夹"};return[...this.collectBox,e]}},updated(){}};const dr=(0,k.Z)(cr,[["render",rr]]);var hr=dr,mr={inject:["reload","isExistChecked","share","actionShow","developing"],name:"ArticleHome",components:{ArticleItem:De,Comment:nr,CollectBox:hr},data(){return{loading:!0,logined:!1,scrollLocation:0,articleId:0,admin:!1,message:"",commenting:!1,fileList:[],commentImgs:[],tempComment:{},readImages:[],deleteImage:"",imageName:[],collectState:!1,likeState:!1,likeCount:0,likedId:[],myHistory:[],mounted:!1,scrollTop:0,visible:!1,key:1,commentKey:1,comCount:0,past:!1}},methods:{async like(){if(this.past=await this.isExistChecked(this.articleId),this.past)if(this.logined)if(!1===this.likeState){this.likedId.push(this.articleId);const e={articleId:this.articleId,userId:this.$store.state.user.userId,likedId:this.likedId,option:"plus"};await this.$axios.get("artLikedIdUpdate",{params:e}),this.likeCount++,this.likeState=!0,(0,l.F)("点赞成功!")}else{this.likedId=this.likedId.filter((e=>e!==this.articleId));const e={articleId:this.articleId,userId:this.$store.state.user.userId,likedId:this.likedId,option:"minus"};await this.$axios.get("artLikedIdUpdate",{params:e}),this.likeCount--,this.likeState=!1,(0,l.F)("取消点赞!")}else this.loginState()},loginState(){r.V.confirm({title:"未登录",message:"你必须要登录才能使用此功能，是否前去登录?"}).then((()=>{this.$router.replace("/login")})).catch((()=>{}))},collectIt(){this.logined?!1===this.collectState?this.$refs.CollectBox.actionsShow=!0:this.$refs.CollectBox.remove(this.articleId):this.loginState()},hadCollected(e){this.collectState=e},async historyGetUpdate(){const e=u().valueOf(),t={userId:this.$store.state.user.userId};await this.$axios.get("historyGet",{params:t}).then((e=>{this.myHistory=e[0]}));const i={articleId:this.articleId,date:e};this.myHistory=this.myHistory.filter((e=>e.articleId!==this.articleId)),this.myHistory.unshift(i);const s={userId:this.$store.state.user.userId,arr:this.myHistory};await this.$axios.get("historyUpdate",{params:s})},chooseFile(){this.$refs.imagesSend.chooseFile()},onClickLeft(){this.$router.back()},afterRead(e){let t=this;this.commentImgs.push(e);let i=new FileReader;i.readAsDataURL(e.file),i.onloadend=function(){t.readImages.push(this.result)}},beforeDelete(e){let t=this,i=new FileReader;return i.readAsDataURL(e.file),this.commentImgs.splice(this.commentImgs.indexOf(e),1),this.imageName.splice(this.imageName.indexOf(e.file.name),1),i.onloadend=function(){t.deleteImage=this.result},!0},beforeRead(e){return-1!==this.$store.state.imageType.indexOf(e.type)?-1!==this.imageName.indexOf(e.name)?(l.F.fail("重复图片！"),!1):this.imageName.length>=9?((0,l.F)("最多9张图片！"),!1):e.length>1?((0,l.F)("每次只能选择一张图片！"),!1):(this.imageName.push(e.name),!0):((0,l.F)("格式不支持或选择了多张图片"),!1)},commentFocus(){this.logined?(this.tempComment.userInfo&&(this.tempComment={},this.readImages=[]),this.commenting=!0,this.$nextTick((()=>{this.$refs.input.focus()}))):this.loginState()},loseFocus(){this.$refs.input.blur(),this.commenting=!1},async commentSend(){if(this.past=await this.isExistChecked(this.articleId),this.past)if(""===this.message)(0,l.F)("不能发送空的内容！");else{this.scrollTop=document.querySelector("#articleBulk").scrollTop;let e=l.F.loading({forbidClick:!0,message:"提交中",duration:0}),t=[];if(0!==this.commentImgs.length){const e=new FormData;this.commentImgs.map((t=>{e.append("comImgs",t.file)})),await this.$axios.post("comImgsUpload",e).then((e=>{t=e}))}let i={articleId:this.articleId,userInfo:this.$store.state.user.userId,message:this.message,date:Date.now(),images:t,like:0};const s=T().stringify(i);this.$axios.post("addCom",s).then((t=>{this.tempComment=t,e.clear(),this.message="",this.loseFocus(),this.commentKey=this.reload(),l.F.success({message:"评论成功！",forbidClick:!0,overlay:!0,onClose:()=>{this.$refs.bulk.scrollTop=this.articleReload}})}))}},articleReload(e){this.articleReload=e},commentReload(){this.loaded(),this.comCount=this.$refs.comment.comCount},loaded(){!0===this.loading&&setTimeout((()=>{this.loading=!1}),100)},scrollRecover(){let e=this.$store.state.scrollLocation;e=e.filter((e=>{if(e.id===this.articleId)return this.scrollTop=e.scrollTop,e})),e.length&&setTimeout((()=>{this.visible=!0}),500),setTimeout((()=>{this.visible=!1}),2500)},recover(){document.querySelector("#bulk").scrollTop=this.scrollTop,this.visible=!1},push(){if(!history.state.title){let e={title:"title",url:"http://www.maomao365.com"};history.pushState(e,"title")}},async dataGet(){const e=this.$route.path.split("/");if(this.articleId=parseInt(e[e.length-1]),this.past=await this.isExistChecked(this.articleId),this.past){if(this.$store.state.user){this.logined=!0;const e={userId:this.$store.state.user.userId,articleId:this.articleId};await this.$axios.get("articleState",{params:e}).then((e=>{this.likedId=e[1],this.likeCount=e[2],e[1].indexOf(this.articleId)>-1&&(this.likeState=!0);let t=[];e[0].forEach((e=>{t=[...t,...e.content]})),t.indexOf(this.articleId)>-1&&(this.collectState=!0)})),await this.historyGetUpdate()}this.loaded()}},fun(){let e=this.$store.state.scrollLocation;0!==e&&e||(e=[]);try{let t=!1;const i={id:this.articleId,scrollTop:this.scrollTop};this.scrollTop>=300?e.forEach((e=>{e.id===i.id&&(e.scrollTop=i.scrollTop,t=!0)})):(e=e.filter((e=>e.id!==i.id)),t=!0),t||e.push(i),this.$store.commit("setScroll",e)}catch(t){alert.log(t)}}},mounted(){this.push(),this.mounted=!0,this.dataGet()},activated(){this.mounted?this.mounted=!1:this.$store.state.isBack?document.querySelector("#articleBulk").scrollTop=this.scrollTop:(this.push(),Object.assign(this.$data,this.$options.data()),this.dataGet(),this.key=this.reload(),this.commentKey=this.reload())},deactivated(){document.querySelector("#articleBulk")&&(this.scrollTop=document.querySelector("#articleBulk").scrollTop)},watch:{deleteImage(e){this.readImages.splice(e,1)}}};const ur=(0,k.Z)(mr,[["render",kl],["__scopeId","data-v-6aacea34"]]);var pr=ur;const gr=e=>((0,a.dD)("data-v-2c94e290"),e=e(),(0,a.Cn)(),e),wr={class:"Personal wrapper pbt"},fr={class:"logined bulk",id:"personalBulk"},vr={class:"content"},kr={class:"imgbox"},yr={class:"text"},br={class:"p3"},Cr={class:"p6g"},xr={class:""},Ir={class:"p2"},_r=gr((()=>(0,a._)("p",{class:"p5g"},"关注",-1))),Wr={class:"p2"},Lr=gr((()=>(0,a._)("p",{class:"p5g"},"粉丝",-1))),Ar={class:"p2"},Sr=gr((()=>(0,a._)("p",{class:"p5g"},"获赞",-1))),zr={class:"bottomBtn"},Dr=(0,a.Uk)("私信Ta");function $r(e,t,i,o,n,l){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-image"),d=(0,a.up)("van-icon"),h=(0,a.up)("van-grid-item"),m=(0,a.up)("van-grid"),u=(0,a.up)("van-skeleton"),p=(0,a.up)("ListCell"),g=(0,a.up)("van-button"),w=(0,a.up)("van-col"),f=(0,a.up)("van-row");return(0,a.wg)(),(0,a.iD)("div",wr,[(0,a.Wm)(r,{title:"动态","left-arrow":"",onClickLeft:l.onClickLeft,fixed:""},null,8,["onClickLeft"]),(0,a._)("div",fr,[(0,a._)("div",null,[(0,a._)("div",vr,[(0,a._)("div",kr,[(0,a.Wm)(c,{round:"",width:"2rem",height:"2rem",src:l.avatarGet(n.user.avatar),fit:"cover","lazy-load":"","icon-size":"2rem","loading-icon":l.loadingIcon()},null,8,["src","loading-icon"])]),(0,a._)("div",yr,[(0,a._)("p",br,[(0,a.Uk)((0,D.zw)(n.inited?n.user.nickname:"用户"+n.userId)+" ",1),(0,a.wy)((0,a.Wm)(d,{"class-prefix":"iconfont icon-nan",size:"0.5rem",color:"blue"},null,512),[[s.F8,"男"===n.user.sex]]),(0,a.wy)((0,a.Wm)(d,{"class-prefix":"iconfont icon-nv",size:"0.5rem",color:"pink"},null,512),[[s.F8,"女"===n.user.sex]])]),(0,a._)("p",Cr,(0,D.zw)(n.inited?n.user.signature:"这个人很懒，什么也没说"),1)])])]),(0,a._)("div",xr,[(0,a.Wm)(m,{clickable:"","column-num":3,border:!1},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{to:"/subscribe/"+n.userId+"/0"},{default:(0,a.w5)((()=>[(0,a._)("p",Ir,(0,D.zw)(n.follow.length),1),_r])),_:1},8,["to"]),(0,a.Wm)(h,{to:"/subscribe/"+n.userId+"/1"},{default:(0,a.w5)((()=>[(0,a._)("p",Wr,(0,D.zw)(n.fan.length),1),Lr])),_:1},8,["to"]),(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a._)("p",Ar,(0,D.zw)(n.inited?n.user.likeCount:0),1),Sr])),_:1})])),_:1})]),(0,a.wy)((0,a._)("div",null,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(2,(e=>(0,a._)("div",{key:e,class:"avatarSkeleton"},[(0,a.Wm)(u,{title:"",row:0,avatar:"","title-width":"35%"}),(0,a.Wm)(u,{title:"",class:"avatarSkeleton"}),(0,a.Wm)(u,{row:3})]))),64))],512),[[s.F8,!n.inited]]),n.inited?((0,a.wg)(),(0,a.j4)(p,{submitIdArr:n.submit,postIdArr:n.post,commentArr:n.comment,userId:n.userId-0,key:n.key,onRefresh:l.refresh},null,8,["submitIdArr","postIdArr","commentArr","userId","onRefresh"])):(0,a.kq)("",!0),(0,a._)("div",zr,[(0,a.Wm)(f,{gutter:"40",justify:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{span:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{type:"default",block:"",to:/directMessage/+n.userId,disabled:!this.$store.state.user||this.$store.state.user.userId==n.userId},{default:(0,a.w5)((()=>[Dr])),_:1},8,["to","disabled"])])),_:1}),(0,a.Wm)(w,{span:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{block:"",color:n.subscribeState?"grey":"#000",icon:n.subscribeState?"success":"plus",onClick:t[0]||(t[0]=e=>l.subscribe(n.user.userId)),disabled:!this.$store.state.user||this.$store.state.user.userId==n.userId},{default:(0,a.w5)((()=>[(0,a.Uk)((0,D.zw)(n.subscribeState?"已关注":"关注Ta"),1)])),_:1},8,["color","icon","disabled"])])),_:1})])),_:1})])])])}var Ur={name:"PersonalView",inject:["reload","avatarGet","loadingIcon"],components:{ListCell:wo},data(){return{active:0,user:0,fan:[],follow:[],submit:[],post:[],comment:[],userId:0,inited:!1,subscribeState:!1,subscribeList:[],fanList:[],mounted:!1,key:1,scrollTop:0}},mounted(){this.push(),this.mounted=!0,this.dataGet()},methods:{async refresh(e,t){await this.dataShow(),t(e)},push(){if(!history.state.title){let e={title:"title",url:"http://www.maomao365.com"};history.pushState(e,"title")}},async dataShow(){let e=this.$route.path.split("/");this.userId=e[e.length-1];const t={userId:this.userId};await this.$axios.get("userDataShow",{params:t}).then((e=>{this.user=e,this.fan=e.fans.fan,this.follow=e.follows.follow,this.submit=e.submits.submit.reverse(),this.post=e.posts.post.reverse(),this.comment=e.comments.comment.reverse(),this.inited=!0}))},async targetFansGet(e){const t={userId:e};await this.$axios.get("subscribeListGet",{params:t}).then((e=>{this.fanList=e[1]}))},async subscribeGet(){const e={userId:this.$store.state.user.userId};await this.$axios.get("subscribeListGet",{params:e}).then((e=>{this.subscribeList=e[0]})),await this.targetFansGet(this.userId),this.fanList.indexOf(this.$store.state.user.userId+"")>-1&&(this.subscribeState=!0)},async dataGet(){await this.dataShow(),this.$store.state.user&&this.subscribeGet()},subscribeUpdate(){const e={fan:this.fanList,follow:this.subscribeList,userId:this.$store.state.user.userId,authorId:this.userId};this.$axios.get("subscribeUpdate",{params:e})},subscribe(e){this.$store.state.user?this.subscribeState?r.V.confirm({title:"取消关注"}).then((()=>{this.subscribeList=this.subscribeList.filter((t=>t-0!==e)),this.subscribeState=!1,this.fanList=this.fanList.filter((e=>e-0!=this.$store.state.user.userId)),this.subscribeUpdate()})).catch((()=>{})):(this.subscribeList.push(e),this.fanList.push(this.$store.state.user.userId),this.subscribeState=!0,this.subscribeUpdate()):this.loginState()},loginState(){r.V.confirm({title:"未登录",message:"你必须要登录才能使用此功能，是否前去登录?"}).then((()=>{this.$router.replace("/login")})).catch((()=>{}))},onClickLeft(){this.$router.back()}},activated(){this.mounted?this.mounted=!1:this.$store.state.isBack?this.$nextTick((()=>{document.querySelector("#personalBulk").scrollTop=this.scrollTop})):(this.push(),Object.assign(this.$data,this.$options.data()),this.dataGet(),this.key=this.reload())},deactivated(){this.scrollTop=document.querySelector("#personalBulk").scrollTop}};const Fr=(0,k.Z)(Ur,[["render",$r],["__scopeId","data-v-2c94e290"]]);var jr=Fr;const Vr={class:"myCollect wrapper pt"},Br=(0,a.Uk)("创建收藏夹 ");function Hr(e,t,i,s,o,n){const l=(0,a.up)("van-nav-bar"),r=(0,a.up)("van-cell"),c=(0,a.up)("van-cell-group"),d=(0,a.up)("van-button"),h=(0,a.up)("van-field"),m=(0,a.up)("van-dialog");return(0,a.wg)(),(0,a.iD)("div",Vr,[(0,a.Wm)(l,{title:"我的收藏","left-arrow":"",onClickLeft:n.onClickLeft,fixed:""},null,8,["onClickLeft"]),(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.collectBox,(e=>((0,a.wg)(),(0,a.j4)(r,{center:"",title:e.name,label:e.content.length+"篇","is-link":"",key:e,to:{path:"/collectDetail",query:{boxName:e.name}}},null,8,["title","label","to"])))),128))])),_:1}),(0,a.Wm)(d,{type:"primary",block:"",icon:"plus",color:"black",style:{"margin-top":"1rem"},onClick:n.createCollect},{default:(0,a.w5)((()=>[Br])),_:1},8,["onClick"]),(0,a.Wm)(m,{show:o.dialogShow,"onUpdate:show":t[1]||(t[1]=e=>o.dialogShow=e),title:"创建收藏夹","show-cancel-button":"",theme:"round-button","confirm-button-color":"#000","confirm-button-text":"创建","cancel-button-color":"grey",onConfirm:n.createConfirm},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{modelValue:o.cbTitle,"onUpdate:modelValue":t[0]||(t[0]=e=>o.cbTitle=e),placeholder:"收藏夹名字(8字内)",required:"",size:"large",maxlength:"8","input-align":"center"},null,8,["modelValue"])])),_:1},8,["show","onConfirm"])])}var Rr={name:"MyCollect",data(){return{collectBox:[],dialogShow:!1,cbTitle:""}},methods:{onClickLeft(){this.$router.back()},createCollect(){this.dialogShow=!0},createConfirm(){if(""===this.cbTitle)return void(0,l.F)("收藏夹名不能为空！");let e={name:this.cbTitle,content:[]},t=this.collectBox.filter((e=>e.name===this.cbTitle));if(0!==t.length)return void(0,l.F)("同名收藏夹已存在！");this.collectBox.splice(this.collectBox.length,0,e);const i={actions:this.collectBox,userId:this.$store.state.user.userId};this.$axios.get("collectUpdate",{params:i})}},mounted(){const e={userId:this.$store.state.user.userId};this.$axios("articleState",{params:e}).then((e=>{this.collectBox=e[0]}))},activated(){}};const qr=(0,k.Z)(Rr,[["render",Hr]]);var Mr=qr;const Tr={class:"collectDetail wrapper pt"},Nr=(0,a.Uk)("加载中..."),Gr={class:"bottomBtn"},Pr=(0,a.Uk)("移动"),Er=(0,a.Uk)("删除");function Yr(e,t,i,o,n,l){const r=(0,a.up)("van-icon"),c=(0,a.up)("van-nav-bar"),d=(0,a.up)("van-loading"),h=(0,a.up)("van-empty"),m=(0,a.up)("PostList"),u=(0,a.up)("van-tab"),p=(0,a.up)("van-tabs"),g=(0,a.up)("van-action-sheet"),w=(0,a.up)("van-field"),f=(0,a.up)("van-dialog"),v=(0,a.up)("CollectBox"),k=(0,a.up)("van-button"),y=(0,a.up)("van-col"),b=(0,a.up)("van-row");return(0,a.wg)(),(0,a.iD)("div",Tr,[(0,a.Wm)(c,{title:n.boxName,"left-arrow":"",onClickLeft:l.onClickLeft,fixed:""},{right:(0,a.w5)((()=>[n.isCollect?((0,a.wg)(),(0,a.iD)("span",{key:1,onClick:t[1]||(t[1]=e=>this.isCollect=!1)},"完成")):((0,a.wg)(),(0,a.j4)(r,{key:0,name:"weapp-nav",size:"18",color:"black",onClick:t[0]||(t[0]=e=>this.show=!0)}))])),_:1},8,["title","onClickLeft"]),(0,a.Wm)(p,{active:n.active,"onUpdate:active":t[2]||(t[2]=e=>n.active=e),swipeable:"",shrink:"",class:"bulk",id:"collectDetailBulk"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{title:"收藏顺序"},{default:(0,a.w5)((()=>[n.loading?((0,a.wg)(),(0,a.j4)(d,{key:0,size:"1rem",vertical:"",style:{"padding-top":"1rem"}},{default:(0,a.w5)((()=>[Nr])),_:1})):(0,a.kq)("",!0),(0,a.wy)((0,a._)("div",null,[0===n.list.length?((0,a.wg)(),(0,a.j4)(h,{key:0,description:"暂无收藏",style:{height:"10rem"}})):(0,a.kq)("",!0),(0,a._)("div",null,[((0,a.wg)(),(0,a.j4)(m,{ArticleList:n.list,isCollect:n.isCollect,ref:"PostList",key:n.key},null,8,["ArticleList","isCollect"]))])],512),[[s.F8,!n.loading]])])),_:1}),(0,a.Wm)(u,{title:"最近更新"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{description:"暂无收藏",style:{height:"10rem"}})])),_:1})])),_:1},8,["active"]),(0,a.Wm)(g,{show:n.show,"onUpdate:show":t[3]||(t[3]=e=>n.show=e),actions:n.actions,"cancel-text":"取消","close-on-click-action":"",title:"管理",onSelect:l.onSelect},null,8,["show","actions","onSelect"]),(0,a.Wm)(f,{show:n.dialogShow,"onUpdate:show":t[5]||(t[5]=e=>n.dialogShow=e),title:"修改名称","show-cancel-button":"",theme:"round-button","confirm-button-color":"#000","confirm-button-text":"修改","cancel-button-color":"grey",onConfirm:l.createConfirm},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{modelValue:n.cbTitle,"onUpdate:modelValue":t[4]||(t[4]=e=>n.cbTitle=e),placeholder:"收藏夹名字(8字内)",required:"",size:"large",maxlength:"8","input-align":"center"},null,8,["modelValue"])])),_:1},8,["show","onConfirm"]),((0,a.wg)(),(0,a.j4)(v,{ref:"CollectBox",onMove:l.move,key:n.key},null,8,["onMove"])),(0,a.wy)((0,a._)("div",Gr,[(0,a.Wm)(b,{gutter:"40",justify:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{span:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{type:"default",block:"",onClick:l.showSelect},{default:(0,a.w5)((()=>[Pr])),_:1},8,["onClick"])])),_:1}),(0,a.Wm)(y,{span:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{type:"danger",block:"",onClick:l.delConfirm},{default:(0,a.w5)((()=>[Er])),_:1},8,["onClick"])])),_:1})])),_:1})],512),[[s.F8,n.isCollect]])])}var Or={name:"CollectDetail",inject:["reload"],components:{PostList:Ft,CollectBox:hr},data(){return{dialogShow:!1,cbTitle:"",show:!1,boxName:"",active:0,collectBox:[],list:[],isCollect:!1,actions:[{name:"批量操作"},{name:"删除所有失效内容"},{name:"删除收藏夹",color:"red"}],checkedArr:[],loading:!0,key:1,scrollTop:0,overdue:[]}},methods:{showSelect(){this.checkedArr=this.$refs.PostList.checkedId,this.checkedArr.length&&(this.$refs.CollectBox.actionsShow=!0)},async move(e){const t={userId:this.$store.state.user.userId,boxName:this.boxName,URL:this.$store.state.URL};await this.$axios("collectDetail",{params:t}).then((e=>{this.collectBox=e[1]})),e!==this.boxName?r.V.confirm({title:"移动收藏",message:"确定将选中的内容内容移动至《"+e+"》收藏夹吗？"}).then((()=>{this.collectBox=this.collectBox.map((t=>(t.name===e&&(t.content=[...t.content,...this.checkedArr]),t))),this.del(),this.collectUpdate()})).catch((()=>{})):(0,l.F)("无效移动！")},del(){this.collectBox=this.collectBox.map((e=>(e.name===this.boxName&&(e.content=e.content.filter((e=>-1===this.checkedArr.indexOf(e)))),this.list=this.list.filter((e=>-1===this.checkedArr.indexOf(e.articleId))),e))),this.$refs.PostList.checkedId.length=0},collectUpdate(){const e={userId:this.$store.state.user.userId,actions:this.collectBox};this.$axios("collectUpdate",{params:e}).then((e=>{(0,l.F)("收藏更新！")}))},delConfirm(){this.checkedArr=this.$refs.PostList.checkedId,this.checkedArr.length&&r.V.confirm({title:"移出收藏",message:"确定将选中的内容内容移除收藏吗？"}).then((()=>{this.del(),this.collectUpdate()})).catch((()=>{}))},onClickLeft(){this.$router.back()},createConfirm(){if(""===this.cbTitle)return void(0,l.F)("收藏夹名不能为空！");let e=[];if(e=this.collectBox.filter((e=>e.name===this.cbTitle)),0!==e.length)return void(0,l.F)("同名收藏夹已存在！");e=this.collectBox.map((e=>(e.name===this.boxName&&(e.name=this.cbTitle,this.boxName=this.cbTitle),e)));const t={actions:this.collectBox,userId:this.$store.state.user.userId};this.$axios.get("collectUpdate",{params:t})},onSelect(e){"删除收藏夹"===e.name&&r.V.confirm({title:"收藏夹删除！",message:"删除收藏夹后，该收藏夹中的内容也会一并删除。操作不可逆！"}).then((()=>{let e=this.collectBox.filter((e=>e.name!==this.boxName));const t={userId:this.$store.state.user.userId,actions:e};this.$axios("collectUpdate",{params:t}).then((e=>{(0,l.F)("删除成功！"),this.$router.back()}))})).catch((()=>{})),"修改名称"===e.name&&(this.dialogShow=!0),"批量操作"===e.name&&(this.isCollect=!0),"删除所有失效内容"===e.name&&(this.collectBox=this.collectBox.filter((e=>(e.name===this.boxName&&(e.content=e.content.filter((e=>-1===this.overdue.indexOf(e)))),e))),this.list=this.list.filter((e=>!e.notExist)),this.collectUpdate())},loaded(){!0===this.loading&&setTimeout((()=>{this.loading=!1}),500)},dataGet(){this.boxName=this.$route.query.boxName,"默认收藏夹"===this.boxName&&(this.actions=[{name:"批量操作"},{name:"删除所有失效内容"}]);const e={userId:this.$store.state.user.userId,boxName:this.boxName,URL:this.$store.state.URL};this.$axios("collectDetail",{params:e}).then((e=>{this.collectBox=e[1],this.list=e[0],this.overdue=e[2],this.loaded()}))}},mounted(){this.dataGet()},activated(){!1===this.$route.meta.isBack?(Object.assign(this.$data,this.$options.data()),this.dataGet(),this.key=this.reload()):this.$nextTick((()=>{document.querySelector("#collectDetailBulk").scrollTop=this.scrollTop}))},beforeRouteEnter(e,t,i){-1!==t.path.indexOf("myCollect")&&(e.meta.isBack=!1),i()},deactivated(){this.scrollTop=document.querySelector("#collectDetailBulk").scrollTop},updated(){}};const Qr=(0,k.Z)(Or,[["render",Yr],["__scopeId","data-v-ed80bd46"]]);var Kr=Qr;const Zr={class:"history wrapper pt"},Jr=(0,a.Uk)("加载中..."),Xr={class:"bulk",id:"bulk",ref:"bulk"},ec={class:"p5 van-ellipsis",style:{"padding-left":"5px"}};function tc(e,t,i,o,n,l){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-loading"),d=(0,a.up)("van-empty"),h=(0,a.up)("van-button"),m=(0,a.up)("van-cell"),u=(0,a.up)("van-cell-group");return(0,a.wg)(),(0,a.iD)("div",Zr,[(0,a.Wm)(r,{title:"我的历史","left-arrow":"",onClickLeft:l.onClickLeft,fixed:""},null,8,["onClickLeft"]),n.loading?((0,a.wg)(),(0,a.j4)(c,{key:0,size:"1rem",vertical:"",style:{"padding-top":"1rem"}},{default:(0,a.w5)((()=>[Jr])),_:1})):(0,a.kq)("",!0),(0,a.wy)((0,a._)("div",Xr,[n.list.length?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:1},(0,a.Ko)(n.time,(e=>((0,a.wg)(),(0,a.j4)(u,{title:e,key:e},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.list,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.articleId},[l.show(e,t.date)?((0,a.wg)(),(0,a.j4)(m,{key:0,center:"",clickable:"",to:"/articleHome/"+t.articleId},{icon:(0,a.w5)((()=>[(0,a.Wm)(h,{type:t.isSubmit?"primary":"success",size:"mini"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,D.zw)(t.isSubmit?"头条":"社区"),1)])),_:2},1032,["type"])])),value:(0,a.w5)((()=>[(0,a._)("p",ec,(0,D.zw)(t.title),1)])),_:2},1032,["to"])):(0,a.kq)("",!0)])))),128))])),_:2},1032,["title"])))),128)):((0,a.wg)(),(0,a.j4)(d,{key:0,description:"暂无浏览记录"}))],512),[[s.F8,!n.loading]])])}var ic={name:"HistoryView",data(){return{myHistory:[],aught:0,now:0,DayBefore:0,yesterdayAught:0,list:[],time:["今天","昨天","前天"],loading:!0,scrollTop:0}},methods:{show(e,t){return"今天"===e&&t>this.aught&&t<this.now||("昨天"===e&&t>this.yesterdayAught&&t<this.aught||"前天"===e&&t>this.DayBefore&&t<this.yesterdayAught)},onClickLeft(){this.$router.back()},async historyGet(){this.aught=u(u().format("YYYY/MM/DD")).valueOf(),this.now=u().valueOf(),this.DayBefore=this.aught-1728e5,this.yesterdayAught=this.aught-864e5;const e={userId:this.$store.state.user.userId};await this.$axios.get("historyGet",{params:e}).then((e=>{this.myHistory=e[0],this.list=e[1].filter((e=>e))})),this.myHistory=this.myHistory.filter((e=>e.date>this.yesterdayAught));const t={userId:this.$store.state.user.userId,arr:this.myHistory};await this.$axios.get("historyUpdate",{params:t}),this.loaded()},loaded(){!0===this.loading&&setTimeout((()=>{this.loading=!1}),500)}},mounted(){this.historyGet()},activated(){!0!==this.$route.meta.isBack?(Object.assign(this.$data,this.$options.data()),this.historyGet()):this.$refs.bulk.scrollTop=this.scrollTop},beforeRouteEnter(e,t,i){-1!==t.path.indexOf("/article")&&(e.meta.isBack=!0),i()},beforeRouteLeave(){this.scrollTop=document.querySelector("#bulk").scrollTop}};const sc=(0,k.Z)(ic,[["render",tc]]);var ac=sc;const oc=e=>((0,a.dD)("data-v-0241cf07"),e=e(),(0,a.Cn)(),e),nc={class:"channelSelect wrapper"},lc=oc((()=>(0,a._)("div",{class:"top"},[(0,a._)("p",{class:"p2"},"选择感兴趣的内容"),(0,a._)("p",{class:"p5g"},"根据兴趣，生产私人定制")],-1))),rc={class:"main"},cc={class:"box"},dc={class:"p5"},hc={class:"bottom"},mc=(0,a.Uk)("一键全选并进入");function uc(e,t,s,o,n,l){const r=(0,a.up)("van-image"),c=(0,a.up)("van-checkbox"),d=(0,a.up)("van-checkbox-group"),h=(0,a.up)("van-grid-item"),m=(0,a.up)("van-grid"),u=(0,a.up)("van-button");return(0,a.wg)(),(0,a.iD)("div",nc,[lc,(0,a._)("div",rc,[(0,a.Wm)(m,{"column-num":3,square:"",gutter:10},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.allChannels,(e=>((0,a.wg)(),(0,a.j4)(h,{key:e.channelId},{default:(0,a.w5)((()=>[(0,a._)("div",cc,[(0,a.Wm)(r,{width:"100%",height:"100%",fit:"cover",src:i(9771),"lazy-load":""},null,8,["src"]),(0,a.Wm)(d,{modelValue:n.checked,"onUpdate:modelValue":t[0]||(t[0]=e=>n.checked=e),ref_for:!0,ref:"checkboxGroup"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{name:e.channelId},null,8,["name"])])),_:2},1032,["modelValue"]),(0,a._)("span",dc,(0,D.zw)(e.channelName),1)])])),_:2},1024)))),128))])),_:1})]),(0,a._)("div",hc,[(0,a.Wm)(u,{round:"",color:n.enterAllow?"red":"pink",block:"",onClick:l.enter},{default:(0,a.w5)((()=>[(0,a.Uk)((0,D.zw)(l.text(n.checked)),1)])),_:1},8,["color","onClick"]),(0,a.Wm)(u,{round:"",type:"primary",block:"",onClick:l.checkAll},{default:(0,a.w5)((()=>[mc])),_:1},8,["onClick"])])])}var pc={name:"ChannelSelect",data(){return{allChannels:[],checked:[],enterAllow:!1,allId:[]}},methods:{text(e){return this.enterAllow=!1,e.length?e.length<=3?"至少选择4个兴趣("+e.length+"/4)":(this.enterAllow=!0,"进入"):"至少选择4个兴趣"},enter(){this.enterAllow&&this.submit(this.checked)},submit(e){const t=l.F.loading({message:"私人定制生成中...",forbidClick:!0,duration:3e3,overlay:!0});setTimeout((()=>{const i={userId:this.$store.state.user.userId,channels:e};this.$axios.get("channelUpdate",{params:i}).then((e=>{t.clear,(0,l.F)({icon:"checked",message:"成功!",forbidClick:!0,onClose:()=>{window.restart()}})}))}),2e3)},checkAll(){this.checked=this.allId,this.submit(this.checked)}},mounted(){this.$axios.get("chaAllGet").then((e=>{this.allChannels=e,this.allId=e.map((e=>e.channelId))}))}};const gc=(0,k.Z)(pc,[["render",uc],["__scopeId","data-v-0241cf07"]]);var wc=gc;const fc={class:"subscribe wrapper pt"},vc=(0,a.Uk)("加载中..."),kc={key:0},yc=(0,a.Uk)("加载中..."),bc={key:0};function Cc(e,t,i,o,n,l){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-loading"),d=(0,a.up)("PersonalInfo"),h=(0,a.up)("van-empty"),m=(0,a.up)("van-tab"),u=(0,a.up)("van-tabs");return(0,a.wg)(),(0,a.iD)("div",fc,[(0,a.Wm)(r,{"left-arrow":"",onClickLeft:l.onClickLeft,fixed:"",title:"粉丝与关注"},null,8,["onClickLeft"]),(0,a.Wm)(u,{active:n.active,"onUpdate:active":t[0]||(t[0]=e=>n.active=e),swipeable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{title:this.$store.state.user&&n.userId==this.$store.state.user.userId?"我的关注":"Ta的关注"},{default:(0,a.w5)((()=>[n.loading?((0,a.wg)(),(0,a.j4)(c,{key:0,size:"1rem",vertical:"",style:{"padding-top":"1rem"}},{default:(0,a.w5)((()=>[vc])),_:1})):(0,a.kq)("",!0),(0,a.wy)((0,a._)("div",null,[n.inited?((0,a.wg)(),(0,a.iD)("div",kc,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.follows,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.userId},[(0,a.Wm)(d,{userInfo:e},null,8,["userInfo"])])))),128))])):(0,a.kq)("",!0),n.inited&&!n.follows.length?((0,a.wg)(),(0,a.j4)(h,{key:1,description:"暂无关注"})):(0,a.kq)("",!0)],512),[[s.F8,!n.loading]])])),_:1},8,["title"]),(0,a.Wm)(m,{title:this.$store.state.user&&n.userId==this.$store.state.user.userId?"我的粉丝":"Ta的粉丝"},{default:(0,a.w5)((()=>[n.loading?((0,a.wg)(),(0,a.j4)(c,{key:0,size:"1rem",vertical:"",style:{"padding-top":"1rem"}},{default:(0,a.w5)((()=>[yc])),_:1})):(0,a.kq)("",!0),(0,a.wy)((0,a._)("div",null,[n.inited?((0,a.wg)(),(0,a.iD)("div",bc,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.fans,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.userId},[(0,a.Wm)(d,{userInfo:e},null,8,["userInfo"])])))),128))])):(0,a.kq)("",!0),n.inited&&!n.fans.length?((0,a.wg)(),(0,a.j4)(h,{key:1,description:"暂无粉丝"})):(0,a.kq)("",!0)],512),[[s.F8,!n.loading]])])),_:1},8,["title"])])),_:1},8,["active"])])}const xc={class:"personalInfo"},Ic={class:"text"},_c={class:"p5"},Wc={class:"p6g van-ellipsis",style:{width:"5rem"}};function Lc(e,t,i,o,n,l){const r=(0,a.up)("van-image"),c=(0,a.up)("van-icon"),d=(0,a.up)("van-button"),h=(0,a.up)("van-cell");return(0,a.wg)(),(0,a.iD)("div",xc,[(0,a.Wm)(h,{center:"",clickable:"",to:"/personal/"+i.userInfo.userId},{icon:(0,a.w5)((()=>[(0,a.Wm)(r,{round:"",width:"1.5rem",height:"1.5rem","lazy-load":"",src:l.avatarGet(i.userInfo.avatar),fit:"cover","icon-size":"1.5rem","loading-icon":l.loadingIcon()},null,8,["src","loading-icon"])])),title:(0,a.w5)((()=>[(0,a._)("div",Ic,[(0,a._)("p",_c,[(0,a.Uk)((0,D.zw)(i.userInfo.nickname)+" ",1),"男"===i.userInfo.sex?((0,a.wg)(),(0,a.j4)(c,{key:0,"class-prefix":"iconfont icon-nan",size:"0.5rem",color:"blue"})):(0,a.kq)("",!0),"女"===i.userInfo.sex?((0,a.wg)(),(0,a.j4)(c,{key:1,"class-prefix":"iconfont icon-nv",size:"0.5rem",color:"pink"})):(0,a.kq)("",!0)]),(0,a._)("span",Wc,(0,D.zw)(i.userInfo.signature),1)])])),value:(0,a.w5)((()=>[(0,a.Wm)(d,{type:"primary",size:"small",onClick:[t[0]||(t[0]=(0,s.iM)((()=>{}),["stop"])),t[1]||(t[1]=e=>l.follow(i.userInfo.userId))],icon:n.followed?"success":"plus",color:n.followed?"grey":"#000"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,D.zw)(n.followed?"已关注":"关注Ta"),1)])),_:1},8,["icon","color"])])),_:1},8,["to"])])}var Ac={name:"PersonalInfo",inject:["avatarGet","loadingIcon"],props:{userInfo:{type:Object}},data(){return{myFollows:[],followed:!1,targetFans:[]}},methods:{async follow(e){this.$store.state.user?e==this.$store.state.user.userId?(0,l.F)("不能粉自己哦！"):(await this.targetFansGet(e),this.followed?await r.V.confirm({title:"取消关注"}).then((()=>{this.targetFans=this.targetFans.filter((e=>e!=this.$store.state.user.userId)),this.myFollows=this.myFollows.filter((t=>t!=e)),this.followed=!1})).catch((()=>{})):(this.targetFans.push(this.$store.state.user.userId),this.myFollows.push(e),this.followed=!0),this.subscribeUpdate(e)):this.loginState()},loginState(){r.V.confirm({title:"未登录",message:"你必须要登录才能使用此功能，是否前去登录?"}).then((()=>{this.$router.replace("/login")})).catch((()=>{}))},subscribeUpdate(e){const t={fan:this.targetFans,follow:this.myFollows,userId:this.$store.state.user.userId,authorId:e};this.$axios.get("subscribeUpdate",{params:t})},async targetFansGet(e){const t={userId:e};await this.$axios.get("subscribeListGet",{params:t}).then((e=>{this.targetFans=e[1]}))},async subscribeGet(){const e={userId:this.$store.state.user.userId};await this.$axios.get("subscribeListGet",{params:e}).then((e=>{this.myFollows=e[0],e[0].indexOf(this.userInfo.userId+"")>-1&&(this.followed=!0)}))}},mounted(){this.$store.state.user&&this.subscribeGet()}};const Sc=(0,k.Z)(Ac,[["render",Lc],["__scopeId","data-v-71719c40"]]);var zc=Sc,Dc={name:"SubscribeView",components:{PersonalInfo:zc},data(){return{followList:[],fanList:[],active:0,userId:0,follows:[],fans:[],inited:!1,mounted:!1,loading:!0}},methods:{onClickLeft(){this.$router.back()},async dataGet(){let e=this.$route.path.split("/");this.userId=e[e.length-2],this.active=e[e.length-1]-0,await this.subscribeGet(),this.detailGet()},async subscribeGet(){const e={userId:this.userId};await this.$axios.get("subscribeListGet",{params:e}).then((e=>{this.followList=e[0],this.fanList=e[1]}))},loaded(){!0===this.loading&&setTimeout((()=>{this.loading=!1}),100)},push(){if(!history.state.title){let e={title:"title",url:"http://www.maomao365.com"};history.pushState(e,"title")}},detailGet(){const e={followList:this.followList,fanList:this.fanList};this.$axios.get("subscribeDetailGet",{params:e}).then((e=>{this.follows=e[0],this.fans=e[1],this.inited=!0,this.loaded()}))}},mounted(){this.push(),this.mounted=!0,this.dataGet()},activated(){this.mounted?this.mounted=!1:this.$store.state.isBack||(this.push(),Object.assign(this.$data,this.$options.data()),this.dataGet())}};const $c=(0,k.Z)(Dc,[["render",Cc]]);var Uc=$c;const Fc={class:"search wrapper"},jc={key:0,class:"result"},Vc=(0,a.Uk)("加载中..."),Bc={key:1},Hc={key:1,class:"suggestion"},Rc={class:"van-ellipsis",style:{width:"8rem"}},qc={key:2,class:"history"},Mc=(0,a.Uk)("清空");function Tc(e,t,i,o,n,l){const r=(0,a.up)("van-icon"),c=(0,a.up)("van-search"),d=(0,a.up)("van-loading"),h=(0,a.up)("van-empty"),m=(0,a.up)("PostList"),u=(0,a.up)("van-tab"),p=(0,a.up)("PersonalInfo"),g=(0,a.up)("van-tabs"),w=(0,a.up)("van-cell"),f=(0,a.up)("van-button");return(0,a.wg)(),(0,a.iD)("div",Fc,[(0,a.Wm)(c,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),placeholder:"请输入搜索关键词",onSearch:t[1]||(t[1]=e=>l.onSearch(n.value)),"clear-trigger":"always",onClear:t[2]||(t[2]=e=>n.isResultShow=!1),onfocus:"isResultShow=false"},{left:(0,a.w5)((()=>[(0,a.Wm)(r,{name:"arrow-left",onClick:l.back},null,8,["onClick"])])),_:1},8,["modelValue"]),n.isResultShow?((0,a.wg)(),(0,a.iD)("div",jc,[n.loading?((0,a.wg)(),(0,a.j4)(d,{key:0,size:"1rem",vertical:"",style:{"padding-top":"1rem"}},{default:(0,a.w5)((()=>[Vc])),_:1})):((0,a.wg)(),(0,a.j4)(g,{key:1,active:n.active,"onUpdate:active":t[3]||(t[3]=e=>n.active=e),swipeable:"",shrink:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{title:"内容"},{default:(0,a.w5)((()=>[n.articleList.length?((0,a.wg)(),(0,a.j4)(m,{key:1,ArticleList:n.articleList},null,8,["ArticleList"])):((0,a.wg)(),(0,a.j4)(h,{key:0,image:"error",description:"没有搜索结果"}))])),_:1}),(0,a.Wm)(u,{title:"用户"},{default:(0,a.w5)((()=>[n.userList.length?((0,a.wg)(),(0,a.iD)("div",Bc,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.userList,(e=>((0,a.wg)(),(0,a.j4)(p,{userInfo:e,key:e.userId},null,8,["userInfo"])))),128))])):((0,a.wg)(),(0,a.j4)(h,{key:0,image:"error",description:"没有搜索结果"}))])),_:1})])),_:1},8,["active"]))])):""!==n.value?((0,a.wg)(),(0,a.iD)("div",Hc,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.searchSuggestion,(e=>((0,a.wg)(),(0,a.j4)(w,{icon:"search",key:e,clickable:"",onClick:(0,s.iM)((t=>l.onSearch(e)),["stop"])},{title:(0,a.w5)((()=>[(0,a._)("p",Rc,(0,D.zw)(e),1)])),_:2},1032,["onClick"])))),128))])):((0,a.wg)(),(0,a.iD)("div",qc,[n.searchHistory.length?((0,a.wg)(),(0,a.j4)(w,{key:0,title:"搜索历史"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{name:"delete",onClick:(0,s.iM)(l.cleanHistory,["stop"])},{default:(0,a.w5)((()=>[Mc])),_:1},8,["onClick"])])),_:1})):(0,a.kq)("",!0),(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.searchHistory,(e=>((0,a.wg)(),(0,a.j4)(f,{color:"#777",size:"mini",key:e,onClick:(0,s.iM)((t=>l.onSearch(e)),["stop"])},{default:(0,a.w5)((()=>[(0,a.Uk)((0,D.zw)(e),1)])),_:2},1032,["onClick"])))),128))])]))])}var Nc={name:"SearchView",components:{PersonalInfo:zc,PostList:Ft},data(){return{loading:!0,active:0,value:"",isResultShow:!1,searchHistory:[],searchSuggestion:[],articleList:[],userList:[]}},methods:{back(){this.$router.back()},onSearch(e){if(this.loading=!0,this.value=e,""!==e){-1===this.searchHistory.indexOf(e)&&(this.searchHistory.push(e),this.$store.commit("setHistory",this.searchHistory)),this.isResultShow=!0;const t={value:e,URL:this.$store.state.URL};this.$axios.get("search",{params:t}).then((e=>{this.articleList=e[1],this.userList=e[2],setTimeout((()=>{this.loading=!1}),1e3)}))}},cleanHistory(){this.searchHistory=[],this.$store.commit("setHistory",this.searchHistory)}},mounted(){this.$store.state.history?this.searchHistory=this.$store.state.history:this.$store.commit("setHistory",this.searchHistory)},watch:{value(e){if(""===e)this.isResultShow=!1;else{const t={value:e};this.$axios.get("search",{params:t}).then((e=>{this.searchSuggestion=e[0]}))}}}};const Gc=(0,k.Z)(Nc,[["render",Tc],["__scopeId","data-v-1782cb24"]]);var Pc=Gc;const Ec={class:"contact wrapper pt"},Yc={class:"btnBox"},Oc=(0,a.Uk)("反馈建议");function Qc(e,t,s,o,n,l){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-loading"),d=(0,a.up)("van-image"),h=(0,a.up)("van-button");return(0,a.wg)(),(0,a.iD)("div",Ec,[(0,a.Wm)(r,{title:"合作/加入","left-arrow":"",onClickLeft:l.onClickLeft,fixed:""},null,8,["onClickLeft"]),(0,a.Wm)(d,{width:"10rem",fit:"cover",src:i(4095),onClick:l.imgPreview,"lazy-load":""},{loading:(0,a.w5)((()=>[(0,a.Wm)(c,{type:"spinner",size:"20"})])),_:1},8,["src","onClick"]),(0,a._)("div",Yc,[(0,a.Wm)(h,{type:"primary",to:"feedback"},{default:(0,a.w5)((()=>[Oc])),_:1})])])}var Kc={name:"ContactView",data(){return{}},methods:{onClickLeft(){this.$router.back()},imgPreview(){(0,Ae.e)([i(4095)])}},mounted(){}};const Zc=(0,k.Z)(Kc,[["render",Qc],["__scopeId","data-v-5227a22e"]]);var Jc=Zc;const Xc=e=>((0,a.dD)("data-v-faf90440"),e=e(),(0,a.Cn)(),e),ed={class:"feedback wrapper pt"},td={class:"bulk",id:"bulk"},id=Xc((()=>(0,a._)("div",{class:"opinion",style:{padding:".3rem 0"}},[(0,a._)("p",{class:"p5"},[(0,a._)("i",null,"期待您的反馈")]),(0,a._)("p",{class:"p5"},[(0,a._)("i",null,"Offer your great opinion")])],-1))),sd={style:{display:"flex","justify-content":"space-between"}},ad=Xc((()=>(0,a._)("span",null,"常见问题",-1))),od={style:{display:"flex","justify-content":"space-between"}},nd=Xc((()=>(0,a._)("span",null,"最新问题",-1))),ld=(0,a.Uk)("加载中..."),rd={class:"bug p4"},cd={class:"greyBackground"},dd={class:"content"},hd={class:"p2b"},md={class:"top"},ud={class:"avatar"},pd={class:"nickname p3b"},gd={class:"mid"},wd=["onClick"],fd={key:0,class:"imgBox"},vd={class:"bottom"},kd={class:"time"},yd={class:"optionBox"},bd={class:"icon-span"},Cd={key:1,class:"commentBox"},xd={class:"comment"},Id={key:0},_d={key:1},Wd=Xc((()=>(0,a._)("span",null,[(0,a._)("b",null," :")],-1))),Ld=["onClick"],Ad=Xc((()=>(0,a._)("p",{class:"p4b black"},"问题描述",-1))),Sd=Xc((()=>(0,a._)("p",{class:"p4b black"},"问题截图(jpg/png/gif)",-1))),zd=Xc((()=>(0,a._)("p",{class:"p4b black"},"联系方式(方便我们更好地跟踪问题)",-1))),Dd=(0,a.Uk)(" 提交反馈 "),$d=Xc((()=>(0,a._)("p",{class:"p4b black"},"我的问题",-1))),Ud=Xc((()=>(0,a._)("p",{class:"p4b black"},"问题详情(可选)",-1))),Fd=Xc((()=>(0,a._)("p",{class:"p4b black"},"是否常见",-1))),jd=(0,a.Uk)(" 提交问题 "),Vd=Xc((()=>(0,a._)("u",null,"我可以问什么?",-1))),Bd=Xc((()=>(0,a._)("p",null,"问你想问的一切，包括但不限于以下内容:",-1))),Hd=Xc((()=>(0,a._)("ol",null,[(0,a._)("li",null,"1.。。。是什么?"),(0,a._)("li",null,"2.为什么。。。"),(0,a._)("li",null,"3.。。。怎么样?")],-1)));function Rd(e,t,i,o,n,l){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-cell"),d=(0,a.up)("van-cell-group"),h=(0,a.up)("van-loading"),m=(0,a.up)("van-skeleton"),u=(0,a.up)("van-image"),p=(0,a.up)("van-icon"),g=(0,a.up)("van-button"),w=(0,a.up)("van-field"),f=(0,a.up)("van-uploader"),v=(0,a.up)("van-form"),k=(0,a.up)("van-tab"),y=(0,a.up)("van-switch"),b=(0,a.up)("van-collapse-item"),C=(0,a.up)("van-collapse"),x=(0,a.up)("van-tabs"),I=(0,a.up)("van-popup");return(0,a.wg)(),(0,a.iD)("div",ed,[(0,a.Wm)(r,{title:"问题广场","left-arrow":"",onClickLeft:l.onClickLeft,fixed:""},null,8,["onClickLeft"]),(0,a._)("div",td,[id,(0,a.Wm)(d,null,{title:(0,a.w5)((()=>[(0,a._)("div",sd,[ad,(0,a._)("span",{onClick:t[0]||(t[0]=e=>l.goAllQ("FAQ"))},"全部")])])),default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.hotList,(e=>((0,a.wg)(),(0,a.j4)(c,{"is-link":"",key:e.id,center:"",to:"/questionDetail/"+e.id},{title:(0,a.w5)((()=>[(0,a.Uk)(" 【热点】"+(0,D.zw)(e.question),1)])),_:2},1032,["to"])))),128))])),_:1}),(0,a.Wm)(d,null,{title:(0,a.w5)((()=>[(0,a._)("div",od,[nd,(0,a._)("span",{onClick:t[1]||(t[1]=e=>l.goAllQ("NAQ"))},"全部")])])),default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.newList,(e=>((0,a.wg)(),(0,a.j4)(c,{"is-link":"",key:e.id,center:"",to:"/questionDetail/"+e.id},{title:(0,a.w5)((()=>[(0,a.Uk)(" 【最新】"+(0,D.zw)(e.question),1)])),_:2},1032,["to"])))),128))])),_:1}),(0,a.wy)((0,a.Wm)(h,{size:"24px",vertical:"",color:"#0094ff",style:{"margin-top":"1rem"}},{default:(0,a.w5)((()=>[ld])),_:1},512),[[s.F8,n.loading]]),((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(2,(e=>(0,a.wy)((0,a.Wm)(m,{title:"",avatar:"",row:4,key:e}),[[s.F8,n.loading]]))),64)),(0,a.wy)((0,a._)("div",rd,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.bugList,((e,i)=>((0,a.wg)(),(0,a.iD)("div",{class:"bugItem",key:e.id},[(0,a.wy)((0,a._)("p",cd,null,512),[[s.F8,0!==i]]),(0,a._)("div",dd,[(0,a.wy)((0,a._)("p",hd,"用户说",512),[[s.F8,0===i]]),(0,a._)("div",md,[(0,a._)("div",ud,[(0,a.Wm)(u,{width:"1rem",height:"1rem",fit:"cover",radius:"5px",src:l.avatarGet(e.avatar),"lazy-load":"","icon-size":"1rem","loading-icon":l.loadingIcon()},null,8,["src","loading-icon"])]),(0,a._)("div",pd,(0,D.zw)(e.nickname),1)]),(0,a._)("div",gd,[(0,a._)("div",{class:"text p3 van-multi-ellipsis--l3",onClick:t=>l.push("bugDetail/"+e.id)},(0,D.zw)(e.text),9,wd)]),e.imgs.length?((0,a.wg)(),(0,a.iD)("div",fd,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.imgs,((t,i)=>((0,a.wg)(),(0,a.iD)("div",{class:"square",key:t},[(0,a.Wm)(u,{width:"100%",height:"100%",fit:"cover",radius:"5px",onClick:(0,s.iM)((t=>l.imgPreview(e.imgs,i)),["stop"]),"lazy-load":"",src:this.$store.state.URL+"upload/bugImgs/"+t},{loading:(0,a.w5)((()=>[(0,a.Wm)(h,{type:"spinner",size:"20"})])),_:2},1032,["onClick","src"])])))),128))])):(0,a.kq)("",!0),(0,a._)("div",vd,[(0,a._)("div",kd,(0,D.zw)(l.before(e.date)),1),(0,a._)("div",yd,[(0,a.Wm)(g,{size:"mini",color:"transparent",disabled:""},{icon:(0,a.w5)((()=>[(0,a.Wm)(p,{name:"comment-o",color:"#000",size:"0.4rem"},{default:(0,a.w5)((()=>[(0,a._)("span",bd,(0,D.zw)(e.commentLength),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(g,{size:"mini",color:"transparent",onClick:t[2]||(t[2]=e=>l.actionShow())},{icon:(0,a.w5)((()=>[(0,a.Wm)(p,{name:"ellipsis",color:"#aaa",size:"0.5rem"})])),_:1})])]),e.comment.length?((0,a.wg)(),(0,a.iD)("div",Cd,[(0,a._)("div",xd,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.comment,(e=>((0,a.wg)(),(0,a.iD)("p",{class:"commentItem",key:e},[(0,a._)("span",null,[(0,a._)("b",null,(0,D.zw)(e.nickname),1)]),e.targetName?((0,a.wg)(),(0,a.iD)("span",Id," 回复 ")):(0,a.kq)("",!0),e.targetName?((0,a.wg)(),(0,a.iD)("span",_d,[(0,a._)("b",null,(0,D.zw)(e.targetName),1)])):(0,a.kq)("",!0),Wd,(0,a._)("span",null,(0,D.zw)(e.message),1)])))),128)),(0,a.wy)((0,a._)("span",{style:{color:"blue"},onClick:t=>l.push("bugDetail/"+e.id)},"查看所有评论>>",8,Ld),[[s.F8,e.commentLength>3]])])])):(0,a.kq)("",!0)])])))),128))],512),[[s.F8,!n.loading]])]),(0,a._)("div",{class:"btnBox",style:(0,D.j5)({right:n.scrollTop>200?".5rem":"3.5rem",width:n.scrollTop>200?"1rem":"3rem"})},[(0,a.Wm)(g,{icon:"edit",color:"black",round:"",block:"",onClick:l.popup,style:{height:"1rem"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,D.zw)(n.text),1)])),_:1},8,["onClick"])],4),(0,a.Wm)(I,{show:n.show,"onUpdate:show":t[12]||(t[12]=e=>n.show=e),position:"right",style:{width:"100%",height:"100%"},class:"popup"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{title:"问题反馈",onClickLeft:l.popDown},{left:(0,a.w5)((()=>[(0,a.Wm)(p,{name:"cross",size:"18"})])),_:1},8,["onClickLeft"]),(0,a.Wm)(x,{active:n.active,"onUpdate:active":t[11]||(t[11]=e=>n.active=e),animated:""},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{title:"提缺陷/建议"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{onSubmit:l.onSubmit},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{inset:"",class:"Q1"},{title:(0,a.w5)((()=>[Ad])),default:(0,a.w5)((()=>[(0,a.Wm)(w,{modelValue:n.message,"onUpdate:modelValue":t[3]||(t[3]=e=>n.message=e),rows:"3",autosize:"",type:"textarea",maxlength:"100",placeholder:'请尽量描述清晰，以便您对于产品的建议或所提缺陷能更清晰地反馈至开发团队。(如果需要向管理员提问，请移步至上方的"我想问/想要")',"show-word-limit":"",style:{"background-color":"#eee"},rules:[{required:!0,message:"请填写问题描述"}]},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,{inset:"",class:"Q1"},{title:(0,a.w5)((()=>[Sd])),default:(0,a.w5)((()=>[(0,a.Wm)(f,{modelValue:n.fileList,"onUpdate:modelValue":t[4]||(t[4]=e=>n.fileList=e),multiple:"","max-count":3,"after-read":l.afterRead,"before-read":l.beforeRead,"before-delete":l.beforeDelete},null,8,["modelValue","after-read","before-read","before-delete"])])),_:1}),(0,a.Wm)(d,{inset:"",class:"Q1"},{title:(0,a.w5)((()=>[zd])),default:(0,a.w5)((()=>[(0,a.Wm)(w,{label:"QQ",modelValue:n.qq,"onUpdate:modelValue":t[5]||(t[5]=e=>n.qq=e),style:{"background-color":"#eee"},placeholder:"请输入您的QQ号(可选)"},null,8,["modelValue"]),(0,a.Wm)(w,{label:"邮箱",modelValue:n.email,"onUpdate:modelValue":t[6]||(t[6]=e=>n.email=e),style:{"background-color":"#eee"},placeholder:"请输入您的邮箱(可选)"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(g,{round:"",block:"",color:"black","native-type":"submit",style:{"margin-top":".5rem"}},{default:(0,a.w5)((()=>[Dd])),_:1})])),_:1},8,["onSubmit"])])),_:1}),(0,a.Wm)(k,{title:"我想问/想要"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{onSubmit:l.submitQue},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{inset:""},{title:(0,a.w5)((()=>[$d])),default:(0,a.w5)((()=>[(0,a.Wm)(w,{placeholder:"请输入您的问题或想要的功能(至多16字)",modelValue:n.myQue,"onUpdate:modelValue":t[7]||(t[7]=e=>n.myQue=e),rules:[{required:!0,message:"请填写您的问题"}],style:{"background-color":"#eee"},clearable:"",maxlength:"16","show-word-limit":""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,{inset:"",class:"Q1"},{title:(0,a.w5)((()=>[Ud])),default:(0,a.w5)((()=>[(0,a.Wm)(w,{modelValue:n.queDetail,"onUpdate:modelValue":t[8]||(t[8]=e=>n.queDetail=e),rows:"3",autosize:"",type:"textarea",maxlength:"100",placeholder:"I had been waiting for so long ,let's talk about it","show-word-limit":"",style:{"background-color":"#eee"}},null,8,["modelValue"])])),_:1}),1e3===this.$store.state.user.userId?((0,a.wg)(),(0,a.j4)(d,{key:0,inset:"",class:"Q1"},{title:(0,a.w5)((()=>[Fd])),default:(0,a.w5)((()=>[(0,a.Wm)(y,{modelValue:n.isHot,"onUpdate:modelValue":t[9]||(t[9]=e=>n.isHot=e),size:"20"},null,8,["modelValue"])])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(g,{round:"",block:"",color:"black","native-type":"submit",style:{"margin-top":".5rem"}},{default:(0,a.w5)((()=>[jd])),_:1})])),_:1},8,["onSubmit"]),(0,a.Wm)(C,{modelValue:n.activeNames,"onUpdate:modelValue":t[10]||(t[10]=e=>n.activeNames=e),style:{"margin-top":".5rem"}},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{title:"",icon:"question","is-link":!1},{title:(0,a.w5)((()=>[Vd])),default:(0,a.w5)((()=>[Bd,Hd])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["active"])])),_:1},8,["show"])])}var qd={name:"ContactView",inject:["actionShow","avatarGet","loadingIcon"],data(){return{activeNames:[],show:!1,text:"问题反馈",active:0,message:"",fileList:[],myQue:"",queDetail:"",scrollTop:0,bugImgs:[],qq:"",email:"",bugList:[],loading:!0,isHot:!1,hotList:[],newList:[]}},methods:{onClickLeft(){this.$router.back()},popup(){this.show=!0},popDown(){this.show=!1},reset(){this.show=!1,this.message="",this.qq="",this.email="",this.fileList.length=0,this.myQue="",this.bugImgs.length=""},questionReset(){this.queDetail="",this.myQue="",this.show=!1,this.isHot=!1},goAllQ(e){"FAQ"===e?this.$router.push("questionList/FAQ"):this.$router.push("questionList/NAQ")},async onSubmit(){if(0===this.message.trim().length)return void l.F.fail("内容无意义！");let e=l.F.loading({forbidClick:!0,message:"提交中",overlay:!0,duration:0}),t=[];if(0!==this.bugImgs.length){const e=new FormData;this.bugImgs.map((t=>{e.append("bugImgs",t)})),await this.$axios.post("bugImgsUpload",e).then((e=>{t=e}))}let i={userId:this.$store.state.user.userId,text:this.message,imgs:t};this.$axios.post("bugSubmit",T().stringify(i)).then((t=>{this.bugList=[t,...this.bugList],e.clear(),l.F.success({message:"反馈成功！",overlay:!0,onClose:this.reset})}))},submitQue(){if(0===this.myQue.trim().length)return void l.F.fail("内容无意义！");0===this.queDetail.trim().length&&(this.queDetail=this.queDetail.trim());let e=l.F.loading({forbidClick:!0,message:"提交中",overlay:!0,duration:0}),t={question:this.myQue,questionMaker:this.$store.state.user.userId,desc:this.queDetail,isHot:this.isHot};this.$axios.post("addQuestion",T().stringify(t)).then((t=>{e.clear(),l.F.success({message:"提问成功！",overlay:!0,onClose:this.questionReset})}))},afterRead(e){this.bugImgs.push(e.file)},beforeDelete(e){return this.bugImgs.splice(this.bugImgs.indexOf(e),1),!0},beforeRead(e){let t=!0;return-1!==this.$store.state.imageType.indexOf(e.type)?(this.bugImgs.forEach((i=>{i.name===e.name&&(t=!1)})),!!t||(l.F.fail("重复图片！"),!1)):((0,l.F)("格式不支持"),!1)},scrollHandler(){this.scrollTop=document.querySelector("#bulk").scrollTop,this.$nextTick((()=>{this.scrollTop>200?this.text="":this.text="问题反馈"}))},imgPreview(e,t){e=e.map((e=>this.$store.state.URL+"upload/bugImgs/"+e)),(0,Ae.e)({images:e,startPosition:t})},before(e){return u(e).format("YYYY[年]MM[月]DD[日] HH:mm")},push(e){this.$router.push(e)},async dataGet(){await this.$axios.get("questionListGet",{params:{type:"FAQ",home:"home"}}).then((e=>{this.hotList=e})),await this.$axios.get("questionListGet",{params:{type:"NAQ",home:"home"}}).then((e=>{this.newList=e})),this.bugListGet()},async bugListGet(){this.$axios.get("bugListGet").then((e=>{this.bugList=e,this.$nextTick((()=>{setTimeout((()=>{this.loading=!1}),100)}))}))}},mounted(){document.getElementById("bulk").addEventListener("scroll",this.scrollHandler),this.dataGet()},beforeUnmount(){document.getElementById("bulk").removeEventListener("scroll",this.scrollHandler)}};const Md=(0,k.Z)(qd,[["render",Rd],["__scopeId","data-v-faf90440"]]);var Td=Md;const Nd={class:"bugDetail wrapper pbt"},Gd=(0,a.Uk)("加载中..."),Pd={key:0,class:"bugItem bulk"},Ed={class:"content"},Yd={class:"top"},Od={class:"nameDateReport"},Qd={nameDate:""},Kd={class:"nickname p4b"},Zd={class:"time p5"},Jd={class:"report"},Xd={class:"mid"},eh={class:"text p3 van-multi-ellipsis--l3"},th={key:0,class:"imgBox"},ih={class:"commentBox"},sh={class:"p3b",style:{"padding-bottom":".5rem"}},ah={class:"top"},oh={class:"nameDateReport"},nh={nameDate:""},lh={class:"nickname p4b"},rh={class:"time p5"},ch={class:"report"},dh={class:"mid"},hh=["onClick"],mh={key:0},uh=(0,a.Uk)("回复"),ph={class:"p4b"},gh={class:"bottomFrame"},wh={class:"btnBox"},fh=(0,a.Uk)(" 发送 ");function vh(e,t,i,o,n,l){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-loading"),d=(0,a.up)("van-skeleton"),h=(0,a.up)("van-image"),m=(0,a.up)("van-icon"),u=(0,a.up)("van-button"),p=(0,a.up)("van-divider"),g=(0,a.up)("van-empty"),w=(0,a.up)("van-field"),f=(0,a.up)("van-cell-group"),v=(0,a.up)("van-form"),k=(0,a.up)("van-popup");return(0,a.wg)(),(0,a.iD)("div",Nd,[(0,a.Wm)(r,{title:"问题详情","left-arrow":"",onClickLeft:l.onClickLeft,fixed:""},null,8,["onClickLeft"]),(0,a.wy)((0,a.Wm)(c,{size:"24px",vertical:"",color:"#0094ff",style:{"margin-top":"1rem"}},{default:(0,a.w5)((()=>[Gd])),_:1},512),[[s.F8,n.loading]]),((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(3,(e=>(0,a.wy)((0,a.Wm)(d,{title:"",avatar:"",row:4,key:e}),[[s.F8,n.loading]]))),64)),n.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",Pd,[(0,a._)("div",Ed,[(0,a._)("div",Yd,[(0,a.Wm)(h,{class:"avatar",width:"1rem",height:"1rem",fit:"cover",radius:"5px",src:l.avatarGet(n.bugDetail.avatar),"lazy-load":"","icon-size":"1rem","loading-icon":l.loadingIcon()},null,8,["src","loading-icon"]),(0,a._)("div",Od,[(0,a._)("div",Qd,[(0,a._)("div",Kd,(0,D.zw)(n.bugDetail.nickname),1),(0,a._)("div",Zd,(0,D.zw)(l.before(n.bugDetail.createdAt)),1)]),(0,a._)("div",Jd,[(0,a.Wm)(u,{size:"mini",color:"transparent",onClick:t[0]||(t[0]=e=>l.actionShow())},{icon:(0,a.w5)((()=>[(0,a.Wm)(m,{name:"ellipsis",color:"#aaa",size:"0.5rem"})])),_:1})])])]),(0,a._)("div",Xd,[(0,a._)("div",eh,(0,D.zw)(n.bugDetail.text),1)]),n.bugDetail.imgs.length?((0,a.wg)(),(0,a.iD)("div",th,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.bugDetail.imgs,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"square",key:e},[(0,a.Wm)(h,{width:"100%",height:"100%",fit:"cover",radius:"5px",onClick:(0,s.iM)((e=>l.imgPreview(n.bugDetail.imgs,t)),["stop"]),"lazy-load":"",src:this.$store.state.URL+"upload/bugImgs/"+e},{loading:(0,a.w5)((()=>[(0,a.Wm)(c,{type:"spinner",size:"20"})])),_:2},1032,["onClick","src"])])))),128))])):(0,a.kq)("",!0),(0,a.Wm)(p)]),(0,a._)("div",ih,[(0,a._)("p",sh,"评论 "+(0,D.zw)(n.bugDetail.comment.length),1),n.bugDetail.comment.length?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(g,{key:0,image:"https://fastly.jsdelivr.net/npm/@vant/assets/custom-empty-image.png","image-size":"80",description:"谁会成为第一个评论的人呢"})),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.bugDetail.comment,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"content",key:e},[(0,a._)("div",ah,[(0,a.Wm)(h,{class:"avatar",width:"1rem",height:"1rem",fit:"cover",radius:"5px",src:l.avatarGet(e.avatar),"lazy-load":"","icon-size":"1rem","loading-icon":l.loadingIcon()},null,8,["src","loading-icon"]),(0,a._)("div",oh,[(0,a._)("div",nh,[(0,a._)("div",lh,(0,D.zw)(e.nickname),1),(0,a._)("div",rh,(0,D.zw)(l.before(e.date)),1)]),(0,a._)("div",ch,[(0,a.Wm)(u,{size:"mini",color:"transparent",onClick:t[1]||(t[1]=e=>l.actionShow())},{icon:(0,a.w5)((()=>[(0,a.Wm)(m,{name:"ellipsis",color:"#aaa",size:"0.5rem"})])),_:1})])])]),(0,a._)("div",dh,[(0,a._)("div",{class:"text p4 van-multi-ellipsis--l3",onClick:t=>l.focus(e.nickname,e.userId)},[e.targetName?((0,a.wg)(),(0,a.iD)("span",mh,[uh,(0,a._)("span",ph,(0,D.zw)(e.targetName+":"),1)])):(0,a.kq)("",!0),(0,a.Uk)(" "+(0,D.zw)(e.message),1)],8,hh)]),(0,a.Wm)(p)])))),128))])])),(0,a._)("div",gh,[(0,a.Wm)(w,{"left-icon":"edit",placeholder:"我来说说",onClick:l.focus,disabled:""},null,8,["onClick"])]),(0,a.Wm)(k,{show:n.show,"onUpdate:show":t[3]||(t[3]=e=>n.show=e),position:"top"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{onSubmit:l.onSubmit},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{inset:""},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{modelValue:n.message,"onUpdate:modelValue":[t[2]||(t[2]=e=>n.message=e),l.inputChange],rows:"3",autosize:"",type:"textarea",maxlength:n.word_limit,placeholder:e.placeholder,ref:"commentInput"},null,8,["modelValue","maxlength","placeholder","onUpdate:modelValue"])])),_:1}),(0,a.Wm)(p),(0,a._)("div",wh,[(0,a.Wm)(u,{color:"black","native-type":"submit",size:"small"},{default:(0,a.w5)((()=>[fh])),_:1})])])),_:1},8,["onSubmit"])])),_:1},8,["show"])])}var kh={name:"BugDetail",inject:["actionShow","avatarGet","loadingIcon"],data(){return{id:0,bugDetail:[],loading:!0,show:!1,message:"",word_limit:200,isReply:!1,targetId:0}},methods:{onClickLeft(){this.$router.back()},imgPreview(e,t){e=e.map((e=>this.$store.state.URL+"upload/bugImgs/"+e)),(0,Ae.e)({images:e,startPosition:t})},before(e){return u(e).format("YYYY[年]MM[月]DD[日] HH:mm")},focus(e,t){t?(this.isReply=!0,this.placeholder="回复 "+e,this.targetId=t):(this.isReply=!1,this.placeholder="走心的评论更容易被看到哦",this.targetId=0),this.show=!0,this.$nextTick((()=>{this.$refs.commentInput.focus()}))},onSubmit(){if(0===this.message.trim().length)return void l.F.fail("无意义内容！");l.F.loading({message:"提交中...",overlay:!0,duration:0});const e={userId:this.$store.state.user.userId,message:this.message,targetId:this.targetId,id:this.id};this.$axios.get("addCommentInBug",{params:e}).then((e=>{this.bugDetail.comment.unshift(e),this.show=!1,this.message="",l.F.clear()}))},inputChange(e){e.length>=this.word_limit&&(0,l.F)("字数已达上限，超出内容已隐藏")},async dataGet(){this.bugDetailGet()},async bugDetailGet(){this.$axios.get("bugListGet",{params:{id:this.id}}).then((e=>{this.bugDetail=e,this.$nextTick((()=>{setTimeout((()=>{this.loading=!1}),100)}))}))}},mounted(){const e=this.$route.path.split("/");this.id=e[e.length-1],this.dataGet()}};const yh=(0,k.Z)(kh,[["render",vh],["__scopeId","data-v-984c63b4"]]);var bh=yh;const Ch=e=>((0,a.dD)("data-v-71f48669"),e=e(),(0,a.Cn)(),e),xh={class:"questionList wrapper pt"},Ih=Ch((()=>(0,a._)("span",null,"已回答",-1)));function _h(e,t,i,s,o,n){const l=(0,a.up)("van-nav-bar"),r=(0,a.up)("van-icon"),c=(0,a.up)("van-cell");return(0,a.wg)(),(0,a.iD)("div",xh,[(0,a.Wm)(l,{title:"问题列表","left-arrow":"",onClickLeft:n.onClickLeft,fixed:""},null,8,["onClickLeft"]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.list,(e=>((0,a.wg)(),(0,a.j4)(c,{"is-link":"",key:e.id,center:"",to:"/questionDetail/"+e.id,label:n.dateShow(e.createdAt)},(0,a.Nv)({title:(0,a.w5)((()=>[(0,a.Wm)(r,{name:"FAQ"===o.type?"fire":"underway",color:"FAQ"===o.type?"red":"blue",style:{"padding-right":"10px"}},null,8,["name","color"]),(0,a._)("span",null,(0,D.zw)(e.question),1)])),_:2},["暂无回答"!==e.answer&&"NAQ"===o.type?{name:"value",fn:(0,a.w5)((()=>[(0,a.Wm)(r,{name:"checked",color:"green"}),Ih]))}:void 0]),1032,["to","label"])))),128))])}var Wh={name:"ContactView",data(){return{list:[],type:""}},methods:{onClickLeft(){this.$router.back()},dateShow(e){return u(e).format("YYYY[年]MM[月]DD[日] HH:mm")}},mounted(){const e=this.$route.path.split("/");this.type=e[e.length-1];const t={type:this.type};this.$axios.get("questionListGet",{params:t}).then((e=>{this.list=e}))}};const Lh=(0,k.Z)(Wh,[["render",_h],["__scopeId","data-v-71f48669"]]);var Ah=Lh;const Sh=e=>((0,a.dD)("data-v-35b9f7bf"),e=e(),(0,a.Cn)(),e),zh={class:"questionDetail wrapper pt"},Dh={key:0,class:"top"},$h={class:"nameDateReport"},Uh={nameDate:""},Fh={class:"nickname p4b"},jh={class:"time p5"},Vh={class:"report"},Bh=Sh((()=>(0,a._)("p",{class:"p3b title",style:{color:"black"}},"问:",-1))),Hh={class:"p3b text-center"},Rh={key:1,class:"qDetail"},qh=Sh((()=>(0,a._)("p",{class:"p3b title",style:{color:"black"}},"问题详情:",-1))),Mh={class:"normal p5"},Th=Sh((()=>(0,a._)("p",{class:"p3b title",style:{color:"black"}},"答:",-1))),Nh={class:"btnBox"},Gh=(0,a.Uk)("我来回答"),Ph={class:"sendBtn"},Eh=(0,a.Uk)(" 发送 ");function Yh(e,t,i,o,n,l){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-image"),d=(0,a.up)("van-icon"),h=(0,a.up)("van-button"),m=(0,a.up)("van-divider"),u=(0,a.up)("van-field"),p=(0,a.up)("van-cell-group"),g=(0,a.up)("van-form"),w=(0,a.up)("van-popup");return(0,a.wg)(),(0,a.iD)("div",zh,[(0,a.Wm)(r,{title:"问题详情","left-arrow":"",onClickLeft:l.onClickLeft,fixed:""},null,8,["onClickLeft"]),!1===n.detail.isHot?((0,a.wg)(),(0,a.iD)("div",Dh,[(0,a.Wm)(c,{class:"avatar",width:"1rem",height:"1rem",fit:"cover",radius:"5px",src:l.avatarGet(n.detail.avatar),"lazy-load":"","icon-size":"1rem","loading-icon":l.loadingIcon()},null,8,["src","loading-icon"]),(0,a._)("div",$h,[(0,a._)("div",Uh,[(0,a._)("div",Fh,(0,D.zw)(n.detail.nickname),1),(0,a._)("div",jh,(0,D.zw)(l.dateShow(n.detail.createdAt)),1)]),(0,a._)("div",Vh,[(0,a.Wm)(h,{size:"mini",color:"transparent"},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"ellipsis",color:"#aaa",size:"0.5rem",onClick:t[0]||(t[0]=e=>l.actionShow())})])),_:1})])])])):(0,a.kq)("",!0),Bh,(0,a._)("p",Hh,(0,D.zw)(n.detail.question),1),(0,a.Wm)(m),""!==n.detail.desc?((0,a.wg)(),(0,a.iD)("div",Rh,[qh,(0,a._)("p",Mh,(0,D.zw)(n.detail.desc),1),(0,a.Wm)(m)])):(0,a.kq)("",!0),Th,(0,a._)("p",{class:(0,D.C_)("暂无回答"===n.detail.answer?"text-center p3b":"normal p5")},(0,D.zw)(n.detail.answer),3),(0,a.Wm)(m),(0,a.wy)((0,a._)("div",Nh,[(0,a.Wm)(h,{color:"black",onClick:t[1]||(t[1]=e=>n.show=!0)},{default:(0,a.w5)((()=>[Gh])),_:1})],512),[[s.F8,1e3===this.$store.state.user.userId]]),(0,a.Wm)(w,{show:n.show,"onUpdate:show":t[3]||(t[3]=e=>n.show=e),position:"top"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{onSubmit:l.onSubmit},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{inset:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:n.answer,"onUpdate:modelValue":t[2]||(t[2]=e=>n.answer=e),rows:"3",autosize:"",type:"textarea",placeholder:"填写你要向Ta回复的内容"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(m),(0,a._)("div",Ph,[(0,a.Wm)(h,{color:"black","native-type":"submit"},{default:(0,a.w5)((()=>[Eh])),_:1})])])),_:1},8,["onSubmit"])])),_:1},8,["show"])])}var Oh={name:"ContactView",inject:["avatarGet","actionShow","loadingIcon"],data(){return{id:0,detail:{},show:!1,answer:""}},methods:{onClickLeft(){this.$router.back()},dateShow(e){return u(e).format("YYYY[年]MM[月]DD[日] HH:mm")},reset(){this.show=!1,this.detail.answer=this.answer,this.answer=""},onSubmit(){r.V.confirm({title:"确定吗",message:"回答后不可修改，确定这样回答吗?"}).then((()=>{let e=l.F.loading({message:"提交中",overlay:!0,duration:0});const t={answer:this.answer,id:this.id};this.$axios.post("answerPost",T().stringify(t)).then((t=>{e.clear(),l.F.success({message:"回答成功！",overlay:!0,onClose:this.reset})}))})).catch((()=>{}))}},mounted(){const e=this.$route.path.split("/");this.id=e[e.length-1];const t={id:this.id};this.$axios.get("questionDetailGet",{params:t}).then((e=>{this.detail=e}))}};const Qh=(0,k.Z)(Oh,[["render",Yh],["__scopeId","data-v-35b9f7bf"]]);var Kh=Qh;const Zh={class:"bugDetail wrapper pbt"},Jh={style:{display:"flex","justify-content":"flex-end"}};function Xh(e,t,i,s,o,n){const l=(0,a.up)("van-nav-bar"),r=(0,a.up)("van-switch"),c=(0,a.up)("van-cell"),d=(0,a.up)("van-cell-group");return(0,a.wg)(),(0,a.iD)("div",Zh,[(0,a.Wm)(l,{title:"设置","left-arrow":"",onClickLeft:n.onClickLeft,fixed:"",onClickRight:n.onClickRight,"right-text":"保存"},null,8,["onClickLeft","onClickRight"]),(0,a.Wm)(d,{title:"兼容设置"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{title:"ios适配",label:"目前仅对焦点问题进行适配",center:""},{value:(0,a.w5)((()=>[(0,a._)("div",Jh,[(0,a.Wm)(r,{modelValue:o.checked,"onUpdate:modelValue":t[0]||(t[0]=e=>o.checked=e)},null,8,["modelValue"])])])),_:1})])),_:1})])}var em={name:"BugDetail",inject:["actionShow","avatarGet"],data(){return{checked:!1}},methods:{onClickLeft(){this.$router.back()},onClickRight(){r.V.confirm({title:"保存设置"}).then((()=>{l.F.loading({message:"保存中...",overlay:!0}),this.$store.state.setup||(this.$store.state.setup={}),this.$store.state.setup.system=this.checked,this.$store.commit("setSetUp",this.$store.state.setup),l.F.clear()})).catch((()=>{}))}},mounted(){l.F.loading({message:"加载设置中...",overlay:!0}),this.checked=!(!this.$store.state.setup||!this.$store.state.setup.system),this.$nextTick((()=>{l.F.clear()}))}};const tm=(0,k.Z)(em,[["render",Xh]]);var im=tm;const sm={class:"wrapper pt"},am={class:"bottom",ref:"bottom"},om=(0,a.Uk)("App下载(android)"),nm=(0,a.Uk)("网页版");function lm(e,t,i,s,o,n){const l=(0,a.up)("van-nav-bar"),r=(0,a.up)("van-divider"),c=(0,a.up)("van-cell"),d=(0,a.up)("van-cell-group"),h=(0,a.up)("van-skeleton"),m=(0,a.up)("van-button");return(0,a.wg)(),(0,a.iD)("div",sm,[(0,a.Wm)(l,{fixed:"",title:"App下载",ref:"top"},null,512),(0,a._)("div",{class:"main",style:(0,D.j5)({height:o.mainHeight+"px"}),ref:"top"},[(0,a.Wm)(r),(0,a.Wm)(h,{title:"",row:2,loading:o.loading,"title-width":"20%"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{title:"版本",inset:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{title:"版本号",value:o.newVersion},null,8,["value"]),(0,a.Wm)(c,{title:"更新时间",value:o.date},null,8,["value"])])),_:1})])),_:1},8,["loading"]),(0,a.Wm)(r),(0,a.Wm)(h,{title:"",row:7,loading:o.loading,"title-width":"20%"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{title:"更新内容",inset:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.content,(e=>((0,a.wg)(),(0,a.j4)(c,{title:e,key:e},null,8,["title"])))),128))])),_:1})])),_:1},8,["loading"]),(0,a.Wm)(r),(0,a.Wm)(h,{title:"",row:4,loading:o.loading,"title-width":"40%"},null,8,["loading"])],4),(0,a._)("div",am,[(0,a._)("div",null,[(0,a.Wm)(m,{type:"primary",color:"black",onClick:n.download},{default:(0,a.w5)((()=>[om])),_:1},8,["onClick"])]),(0,a._)("div",null,[(0,a.Wm)(m,{type:"primary",color:"green",onClick:n.goGit},{default:(0,a.w5)((()=>[nm])),_:1},8,["onClick"])])],512)])}var rm={name:"AppDownload",components:{},data(){return{newVersion:"",apkName:"",content:[],date:"",indexArr:[0,4,6,8,10,12,14],mainHeight:0,loading:!0}},methods:{versionCheck(){this.$axios.get("versionCheck").then((e=>{this.apkName=e[0].at(-1);const t=this.apkName.match(/202.{11}/)[0];for(let s in this.indexArr)this.date=this.date+t.slice(this.indexArr[s],this.indexArr[+s+1]),s<2?this.date=this.date+"/":2===+s?this.date=this.date+" ":3!==+s&&4!==+s||(this.date=this.date+":");let i=e[1].match(/v.{5}v/)[0].replaceAll("v","");this.newVersion=i,this.content=e[1].match(/-\d.+-/g),setTimeout((()=>{this.loading=!1}),2e3)}))},download(){const e=document.createElement("a");e.href=this.$store.state.URL+"/version/apk/"+this.apkName,e.setAttribute("download","DINOEYE"),e.style.display="none",document.body.appendChild(e),setTimeout((()=>{e.click(),document.body.removeChild(e)}),66)},goGit(){location=this.$store.state.gitUrl},heightGet(){this.$nextTick((()=>{const e=(0,p.EL)(this.$refs.top).top;this.mainHeight=(0,p.EL)(this.$refs.bottom).top-e}))}},created(){},mounted(){this.versionCheck(),this.heightGet(),window.onresize=this.heightGet}};const cm=(0,k.Z)(rm,[["render",lm],["__scopeId","data-v-18a829c5"]]);var dm=cm;const hm={class:"miniList wrapper pt"};function mm(e,t,i,s,o,n){const l=(0,a.up)("van-nav-bar"),r=(0,a.up)("van-cell");return(0,a.wg)(),(0,a.iD)("div",hm,[(0,a.Wm)(l,{title:"实验室","left-arrow":"",fixed:"",onClickLeft:n.onClickLeft},null,8,["onClickLeft"]),(0,a.Wm)(r,{title:"英语学习","is-link":"",to:"EWMPage"}),(0,a.Wm)(r,{title:"音乐电台","is-link":"",to:"/MusicPage"}),(0,a.Wm)(r,{title:"贪吃蛇","is-link":"",to:"snakePage"})])}var um={name:"MiniList",inject:["developing"],data(){return{index:0}},methods:{onClickLeft(){this.$router.back()},goodnight(){this.index++,this.index>=5?this.$router.push("/MusicPage"):this.developing()}},mounted(){}};const pm=(0,k.Z)(um,[["render",mm]]);var gm=pm;const wm={class:"ewmPages wrapper pt"};function fm(e,t,i,s,o,n){const l=(0,a.up)("van-nav-bar"),r=(0,a.up)("EnWordMemory");return(0,a.wg)(),(0,a.iD)("div",wm,[(0,a.Wm)(l,{title:"英语学习","left-arrow":"",fixed:"",onClickLeft:n.onClickLeft},null,8,["onClickLeft"]),(0,a.Wm)(r)])}const vm=e=>((0,a.dD)("data-v-1cb11c7f"),e=e(),(0,a.Cn)(),e),km={class:"enWordMemory wrapper"},ym={class:"listBox"},bm={class:"list"},Cm={style:{display:"flex","justify-content":"space-between"}},xm=vm((()=>(0,a._)("span",null,"单词列表",-1))),Im={key:0,class:"swipeBox"},_m=["onClick"],Wm={style:{"padding-right":"10px"}},Lm=["onClick"],Am={key:1,class:"writingFrMem"},Sm={class:"box",ref:"box"},zm={class:"wordInput"},Dm={class:"btnBox",style:{padding:"10px"}},$m=(0,a.Uk)("确定"),Um={style:{display:"flex","justify-content":"center","align-items":"center","padding-top":"2rem"}},Fm={key:0,border:"1",cellspacing:"20"},jm=vm((()=>(0,a._)("caption",null,"复盘",-1))),Vm=vm((()=>(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{style:{color:"blue"}},"单词释义"),(0,a._)("th",{style:{color:"green"}},"正确答案"),(0,a._)("th",{style:{color:"red"}},"我的答案")])],-1))),Bm={style:{color:"blue"}},Hm={style:{color:"green"}},Rm={style:{color:"red"}},qm=(0,a.Uk)("退出");function Mm(e,t,i,o,n,l){const r=(0,a.up)("van-icon"),c=(0,a.up)("van-button"),d=(0,a.up)("van-field"),h=(0,a.up)("van-cell"),m=(0,a.up)("van-swipe-cell"),u=(0,a.up)("van-cell-group"),p=(0,a.up)("van-action-sheet"),g=(0,a.up)("van-empty"),w=(0,a.up)("van-popup");return(0,a.wg)(),(0,a.iD)("div",km,[(0,a._)("div",ym,[(0,a._)("div",bm,[(0,a.Wm)(u,{inset:""},{title:(0,a.w5)((()=>[(0,a._)("div",Cm,[xm,(0,a.Wm)(c,{size:"mini",color:"transparent",onClick:t[0]||(t[0]=e=>this.show=!0)},{icon:(0,a.w5)((()=>[(0,a.Wm)(r,{name:"ellipsis",color:"#aaa",size:"0.5rem"})])),_:1})])])),default:(0,a.w5)((()=>[(0,a._)("div",{style:(0,D.j5)({height:n.height+"px"}),class:"bulk",ref:"bulk"},[n.writingFrMem?((0,a.wg)(),(0,a.iD)("div",Am,[(0,a._)("p",null,(0,D.zw)((n.readyWords[n.index].id>9?"":"0")+n.readyWords[n.index].id+"-"+n.readyWords[n.index].mean),1)])):((0,a.wg)(),(0,a.iD)("div",Im,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.words,(e=>((0,a.wg)(),(0,a.j4)(m,{key:e.id},{right:(0,a.w5)((()=>[(0,a.Wm)(c,{square:"",type:"danger",text:"删除",onClick:t=>l.delWord(e.id),style:{height:"100%"}},null,8,["onClick"])])),default:(0,a.w5)((()=>[(0,a.Wm)(h,{style:(0,D.j5)({background:l.integrityCheck(e)?"red":"rgb(210, 247, 136)"})},{title:(0,a.w5)((()=>[(0,a._)("div",{onClick:t=>l.editWord(e.id),style:{display:"flex"}},[(0,a._)("span",Wm,(0,D.zw)(e.id>9?e.id:"0"+e.id)+".",1),e.id==n.target.id&&n.target.state&&"word"===n.target.state?((0,a.wg)(),(0,a.j4)(d,{key:0,style:{padding:"0!important"},modelValue:e.word,"onUpdate:modelValue":t=>e.word=t,ref_for:!0,ref:"wordInput"+e.id,"input-align":"left",onBlur:l.onBlur,onKeyup:(0,s.D2)(l.onBlur,["enter"])},null,8,["modelValue","onUpdate:modelValue","onBlur","onKeyup"])):((0,a.wg)(),(0,a.iD)("span",{key:1,style:(0,D.j5)({color:l.integrityCheck(e)?"white":"black"})},(0,D.zw)(e.word.length?e.word:"单词不见了"),5))],8,_m)])),value:(0,a.w5)((()=>[(0,a._)("div",{onClick:t=>l.editMean(e.id),style:{display:"flex","justify-content":"flex-end"}},[e.id==n.target.id&&n.target.state&&"mean"===n.target.state?((0,a.wg)(),(0,a.j4)(d,{key:0,style:{padding:"0!important"},modelValue:e.mean,"onUpdate:modelValue":t=>e.mean=t,ref_for:!0,ref:"meanInput"+e.id,"input-align":"right",onBlur:l.onBlur,onKeyup:(0,s.D2)(l.onBlur,["enter"])},null,8,["modelValue","onUpdate:modelValue","onBlur","onKeyup"])):((0,a.wg)(),(0,a.iD)("span",{key:1,style:(0,D.j5)({color:l.integrityCheck(e)?"white":"grey"})},(0,D.zw)(e.mean.length?e.mean:"暂无释义"),5))],8,Lm)])),_:2},1032,["style"])])),_:2},1024)))),128))]))],4)])),_:1})])]),(0,a._)("div",Sm,[(0,a._)("div",zm,[(0,a.Wm)(u,{inset:"",title:this.writingFrMem?"默写ing":"听写ing"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:n.newWords,"onUpdate:modelValue":t[1]||(t[1]=e=>n.newWords=e),label:"单词",placeholder:"请输入单词",style:{background:"#eee"},clearable:"",onKeyup:(0,s.D2)(l.submit,["enter"])},null,8,["modelValue","onKeyup"])])),_:1},8,["title"]),(0,a._)("div",Dm,[(0,a.Wm)(c,{type:"primary",block:"",round:"",onClick:l.submit},{default:(0,a.w5)((()=>[$m])),_:1},8,["onClick"])])])],512),(0,a.Wm)(p,{show:n.show,"onUpdate:show":t[2]||(t[2]=e=>n.show=e),actions:n.actions,"cancel-text":"取消","close-on-click-action":"",onSelect:l.onSelect},null,8,["show","actions","onSelect"]),(0,a.Wm)(w,{show:n.showPop,"onUpdate:show":t[4]||(t[4]=e=>n.showPop=e),style:{height:"100%"},closeable:"","close-icon":"arrow-down","close-icon-position":"top-left",position:"bottom"},{default:(0,a.w5)((()=>[(0,a._)("div",Um,[n.mistake.length?((0,a.wg)(),(0,a.iD)("table",Fm,[jm,Vm,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.mistake,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",Bm,(0,D.zw)(e.mean),1),(0,a._)("td",Hm,(0,D.zw)(e.word),1),(0,a._)("td",Rm,(0,D.zw)(e.mistake),1)])))),128))])])):((0,a.wg)(),(0,a.j4)(g,{key:1,image:"https://fastly.jsdelivr.net/npm/@vant/assets/custom-empty-image.png","image-size":"80",description:"完全正确"}))]),(0,a.Wm)(c,{type:"primary",block:"",onClick:t[3]||(t[3]=e=>this.$router.back()),style:{"margin-top":"1rem"}},{default:(0,a.w5)((()=>[qm])),_:1})])),_:1},8,["show"])])}var Tm={name:"EnWordMemory",data(){return{words:[],readyWords:[],mistake:[],newWords:"",height:null,target:{id:-1},show:!1,actions:[{name:"开始默写",disabled:!1},{name:"开始听写",disabled:!0}],integrityChecked:!1,writingFrMem:!1,index:0,showPop:!1}},methods:{integrityCheck(e){return!(e.word.trim().length&&e.mean.trim().length)&&this.integrityChecked},addWord(){if(this.newWords.trim().length){const e={};e.word=this.newWords,e.id=this.words.length?this.words.at(-1).id+1:1,e.mean="",this.words.push(e),this.newWords="",this.$nextTick((()=>{this.$refs.bulk.scrollTop=this.$refs.bulk.scrollHeight}))}},check(){if(this.newWords.trim().length){if(this.newWords.trim()!==this.readyWords[this.index].word){l.F.fail({message:"错误!",icon:"cross"});const e={...this.readyWords[this.index],mistake:this.newWords.trim()};this.mistake.push(e)}this.newWords="",this.index===this.readyWords.length-1?this.showPop=!0:this.index++}},submit(){this.writingFrMem?this.check():this.addWord()},setHeight(){const e=(0,p.EL)(this.$refs.box).top,t=(0,p.EL)(this.$refs.bulk).top;this.height=e-t},delWord(e){this.words=this.words.filter((t=>t.id!==e))},editWord(e){this.target=this.words.find((t=>t.id===e)),this.target.state="word",this.$nextTick((()=>{this.$refs["wordInput"+e][0].focus()}))},editMean(e){this.target=this.words.find((t=>t.id===e)),this.target.state="mean",this.$nextTick((()=>{this.$refs["meanInput"+e][0].focus()}))},onBlur(){this.target={id:-1}},onSelect(e){if("开始默写"===e.name){const e=[];if(this.words.forEach((t=>{t.word.trim().length&&t.mean.trim().length||e.push(t.id)})),e.length)return this.integrityChecked=!0,void(0,l.F)("存在释义或单词不完整的项目");r.V.confirm({title:"进入默写",message:"共有"+this.words.length+"个单词会进行默写,确定吗"}).then((()=>{this.writingFrMem=!0,this.actions.forEach((e=>{"开始默写"===e.name?e.disabled=!0:e.disabled=!1})),this.readyWords.length=0,this.words.forEach((e=>{this.readyWords.push(e)})),this.readyWords.sort((()=>.5-Math.random(0,1)));this.readyWords.map((e=>e.id))})).catch((()=>{}))}else"开始听写"===e.name&&r.V.confirm({title:"退出默写",message:"退出默写后下次需要重新开始,确定吗"}).then((()=>{this.writingFrMem=!1,this.actions.forEach((e=>{"开始听写"===e.name?e.disabled=!0:e.disabled=!1}))})).catch((()=>{}))}},mounted(){this.$nextTick((()=>{this.setHeight()}))}};const Nm=(0,k.Z)(Tm,[["render",Mm],["__scopeId","data-v-1cb11c7f"]]);var Gm=Nm,Pm={name:"EwmPages",components:{EnWordMemory:Gm},data(){return{}},methods:{onClickLeft(){this.$router.back()}},mounted(){}};const Em=(0,k.Z)(Pm,[["render",fm]]);var Ym=Em;const Om={class:"musicPage wrapper pt"},Qm={class:"fieldBox"},Km=(0,a.Uk)("提交"),Zm={class:"box"},Jm=(0,a.Uk)("加载中..."),Xm={key:0,class:"box"};function eu(e,t,i,o,n,l){const r=(0,a.up)("van-button"),c=(0,a.up)("van-nav-bar"),d=(0,a.up)("van-field"),h=(0,a.up)("van-popup"),m=(0,a.up)("van-loading"),u=(0,a.up)("van-empty"),p=(0,a.up)("APlayer");return(0,a.wg)(),(0,a.iD)("div",Om,[(0,a.Wm)(c,{title:"音乐电台","left-arrow":"",fixed:"",onClickLeft:l.onClickLeft,onClickRight:l.onClickRight},{right:(0,a.w5)((()=>[(0,a.Wm)(r,{icon:"ellipsis",color:"transparent"})])),_:1},8,["onClickLeft","onClickRight"]),(0,a.Wm)(h,{show:n.show,"onUpdate:show":t[1]||(t[1]=e=>n.show=e),position:this.$store.state.setup&&this.$store.state.setup.system?"top":"bottom","close-on-click-overlay":!1},{default:(0,a.w5)((()=>[(0,a._)("div",Qm,[(0,a.Wm)(d,{modelValue:n.pwd,"onUpdate:modelValue":t[0]||(t[0]=e=>n.pwd=e),center:"",clearable:"",label:"口令",placeholder:"请输入口令",onKeyup:(0,s.D2)(l.check,["enter"])},{button:(0,a.w5)((()=>[(0,a.Wm)(r,{size:"small",type:"primary",onClick:l.check},{default:(0,a.w5)((()=>[Km])),_:1},8,["onClick"])])),_:1},8,["modelValue","onKeyup"])])])),_:1},8,["show","position"]),(0,a.wy)((0,a._)("div",Zm,[(0,a.Wm)(m,{size:"24px",vertical:"",color:"#1989fa"},{default:(0,a.w5)((()=>[Jm])),_:1})],512),[[s.F8,n.loading&&n.passed]]),n.passed?((0,a.wg)(),(0,a.j4)(p,{class:"bulk",onLoaded:l.loaded,ref:"APlayer",key:n.key,onChildReload:l.childReload},null,8,["onLoaded","onChildReload"])):((0,a.wg)(),(0,a.iD)("div",Xm,[(0,a.Wm)(u,{image:"https://fastly.jsdelivr.net/npm/@vant/assets/custom-empty-image.png","image-size":"80",description:"暂无内容"})]))])}const tu=e=>((0,a.dD)("data-v-a8e2a8b6"),e=e(),(0,a.Cn)(),e),iu={class:"musicRadio wrapper"},su=tu((()=>(0,a._)("div",{id:"player"},null,-1))),au={class:"uploadBox"},ou={class:"select"},nu=(0,a.Uk)("选择文件"),lu={class:"select"},ru={class:"p5"},cu=(0,a.Uk)("你将为 "),du={class:"bolder"},hu=(0,a.Uk)("上传歌词"),mu={key:0,class:"p5"},uu={key:1,class:"p5"},pu=(0,a.Uk)("你选择了 "),gu=(0,a.Uk)("提交"),wu={class:"cellBox"},fu={class:"title"},vu={class:"p3"},ku={class:"songTitle p5"},yu=(0,a.Uk)("  "),bu={class:"singer p5-5g"};function Cu(e,t,i,o,n,l){const r=(0,a.up)("van-action-sheet"),c=(0,a.up)("van-button"),d=(0,a.up)("van-uploader"),h=(0,a.up)("van-popup"),m=(0,a.up)("van-nav-bar"),u=(0,a.up)("van-tag"),p=(0,a.up)("van-cell");return(0,a.wg)(),(0,a.iD)("div",iu,[su,(0,a.Wm)(r,{show:n.show,"onUpdate:show":t[0]||(t[0]=e=>n.show=e),actions:n.actions,"cancel-text":"取消",description:"上传内容","close-on-click-action":"",onSelect:l.onSelect},null,8,["show","actions","onSelect"]),(0,a.Wm)(h,{show:n.popShow,"onUpdate:show":t[2]||(t[2]=e=>n.popShow=e),position:"top",style:{width:"100%"},round:""},{default:(0,a.w5)((()=>[(0,a._)("div",au,[(0,a.Wm)(d,{"after-read":l.afterRead,modelValue:n.fileList,"onUpdate:modelValue":t[1]||(t[1]=e=>n.fileList=e),"max-count":1,"before-read":l.beforeRead},{default:(0,a.w5)((()=>[(0,a._)("div",ou,[(0,a.Wm)(c,{icon:"plus",type:"primary"},{default:(0,a.w5)((()=>[nu])),_:1})])])),_:1},8,["after-read","modelValue","before-read"]),(0,a._)("div",lu,[(0,a.wy)((0,a._)("p",ru,[cu,(0,a._)("span",du,(0,D.zw)(this.targetSong?this.targetSong.name:""),1),hu],512),[[s.F8,!n.upSong]]),n.fileList.length?((0,a.wg)(),(0,a.iD)("p",uu,[pu,(0,a._)("span",null,(0,D.zw)(n.mp3?n.mp3.file.name:""),1)])):((0,a.wg)(),(0,a.iD)("p",mu," 请选择"+(0,D.zw)(n.upSong?".mp3":".lrc")+"文件 ",1))]),n.fileList.length?((0,a.wg)(),(0,a.j4)(c,{key:0,icon:"circle",color:"black",onClick:l.songSubmit},{default:(0,a.w5)((()=>[gu])),_:1},8,["onClick"])):(0,a.kq)("",!0)])])),_:1},8,["show"]),(0,a.Wm)(h,{show:n.audioListShow,"onUpdate:show":t[3]||(t[3]=e=>n.audioListShow=e),position:"bottom",style:{width:"100%",height:"70%"},round:""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{title:"那么，你要为哪首歌上传歌词呢?"}),(0,a._)("div",wu,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.audio,((e,t)=>((0,a.wg)(),(0,a.j4)(p,{key:e,"is-link":"",center:"",onClick:t=>l.upLrc(e)},{title:(0,a.w5)((()=>[(0,a._)("div",fu,[(0,a._)("span",vu,(0,D.zw)(t+1),1),(0,a._)("div",null,[(0,a._)("div",ku,[(0,a.Wm)(u,{type:e.lrc?"success":"danger",round:!!e.lrc},{default:(0,a.w5)((()=>[(0,a.Uk)((0,D.zw)(e.lrc?"有歌词":"无歌词"),1)])),_:2},1032,["type","round"]),yu,(0,a._)("span",null,(0,D.zw)(e.name),1)]),(0,a._)("span",bu,(0,D.zw)(e.artist),1)])])])),_:2},1032,["onClick"])))),128))])])),_:1},8,["show"])])}var xu=i(1985),Iu=i.n(xu),_u={name:"MusicRadio",components:{},data(){return{audio:[],show:!1,popShow:!1,audioListShow:!1,mp3:null,lrc:null,upSong:!0,fileList:[],targetSong:null,actions:[{name:"上传歌曲",subname:"mp3文件"},{name:"上传歌词",subname:"lrc文件"}]}},methods:{onClickLeft(){this.$router.back()},showAction(){this.show=!0},onSelect(e){this.actions.indexOf(e)?this.audioListShow=!0:(this.popShow=!0,this.upSong=!0)},upLrc(e){this.targetSong=e,this.upSong=!1,this.audioListShow=!1,this.popShow=!0},afterRead(e){this.mp3=e},beforeRead(e){const t=e.name.slice(-4);if(this.upSong){if(".mp3"!==t)return(0,l.F)("上传歌曲请选择.mp3文件"),!1}else if(".lrc"!==t)return(0,l.F)("上传歌词请选择.lrc文件"),!1;return!0},async songSubmit(){l.F.loading({message:"提交中",overlay:!0,duration:0});const e=new FormData;let t;e.append("mp3",this.mp3.file),this.upSong?t=await this.$axios.post("audioUpload",e):(e.append("songName",this.targetSong.url.split("/").at(-1)),t=await this.$axios.post("lrcUpload",e)),"ok"===t?l.F.success({message:"上传成功!",overlay:!0,onClose:()=>{this.$emit("childReload")}}):l.F.fail("出错啦"+t)},async initAudio(){await this.audioListGet();const e=new(Iu())({container:document.getElementById("player"),mini:!1,autoplay:!1,theme:"#111",loop:"all",order:"random",preload:"auto",volume:.7,mutex:!0,listFolded:!1,listMaxHeight:90,lrcType:1,audio:[]});this.audio.length&&e.list.add(this.audio),this.$nextTick((()=>{this.$emit("loaded")}))},async audioListGet(){await this.$axios.get("audioListGet").then((e=>{this.audio=e.map((e=>{let t="";e.cover.length&&(t=e.cover);const i=e.title,s=e.artist,a=this.$store.state.URL+"upload/audio/song/"+e.url,o=e.lrc;return{artist:s,cover:t,name:i,url:a,lrc:o}}))}))}},mounted(){this.initAudio()}};const Wu=(0,k.Z)(_u,[["render",Cu],["__scopeId","data-v-a8e2a8b6"]]);var Lu=Wu,Au={name:"MusicPage",components:{APlayer:Lu},inject:["reload"],data(){return{pwd:"",passed:!0,show:!1,loading:!0,key:0}},methods:{onClickLeft(){this.$router.back()},onClickRight(){this.$refs.APlayer.showAction()},check(){const e=u().hour()*u().minute();+this.pwd.trim()===e?(this.show=!1,this.passed=!0):l.F.fail("口令错误")},loaded(){setTimeout((()=>{this.loading=!1}),1e3)},childReload(){this.key=this.reload()}},mounted(){}};const Su=(0,k.Z)(Au,[["render",eu],["__scopeId","data-v-6e0ecf6c"]]);var zu=Su;const Du={class:"snake wrapper pt"};function $u(e,t,i,s,o,n){const l=(0,a.up)("van-nav-bar"),r=(0,a.up)("RetroSnake");return(0,a.wg)(),(0,a.iD)("div",Du,[(0,a.Wm)(l,{title:"贪吃蛇","left-arrow":"",fixed:"",onClickLeft:n.onClickLeft},null,8,["onClickLeft"]),((0,a.wg)(),(0,a.j4)(r,{key:o.key,onChildReload:n.childReload},null,8,["onChildReload"]))])}const Uu={class:"retroSnake wrapper"},Fu={class:"gameBox",style:{padding:"10px",border:"10px black solid"},ref:"gameBox"},ju={class:"snake",ref:"snake"},Vu={class:"handler"},Bu={class:"btnBox"},Hu={class:"btnBox"},Ru={style:{padding:"0 10px",display:"flex","justify-content":"center","align-items":"center"}},qu={class:"btnBox"},Mu={class:"btnBox"};function Tu(e,t,i,s,o,n){const l=(0,a.up)("van-button");return(0,a.wg)(),(0,a.iD)("div",Uu,[(0,a._)("div",Fu,[(0,a._)("div",{class:"stage",style:(0,D.j5)(n.stageStyle)},[(0,a._)("div",ju,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.length,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{style:(0,D.j5)(t===o.head?n.snakeHeadStyle:n.snakeItemStyle(t)),key:t,class:"snakeItem"},null,4)))),128))],512),(0,a._)("div",{class:"food",style:(0,D.j5)(n.foodStyle)},[(0,a._)("div",{class:"slice",style:(0,D.j5)(n.sliceStyle)},null,4),(0,a._)("div",{class:"slice",style:(0,D.j5)(n.sliceStyle)},null,4),(0,a._)("div",{class:"slice",style:(0,D.j5)(n.sliceStyle)},null,4),(0,a._)("div",{class:"slice",style:(0,D.j5)(n.sliceStyle)},null,4)],4)],4),(0,a._)("div",{class:"info",style:(0,D.j5)(n.infoStyle)},[(0,a._)("span",null,"SCORE:"+(0,D.zw)(o.score),1),(0,a._)("span",null,"LEVEL:"+(0,D.zw)(o.level),1)],4),(0,a._)("div",Vu,[(0,a._)("div",null,[(0,a._)("div",Bu,[(0,a.Wm)(l,{icon:"arrow-up",type:"primary",color:"#74856c",onClick:t[0]||(t[0]=e=>n.directionChange({key:"ArrowUp"}))})])]),(0,a._)("div",null,[(0,a._)("span",Hu,[(0,a.Wm)(l,{icon:"arrow-left",type:"primary",color:"#74856c",onClick:t[1]||(t[1]=e=>n.directionChange({key:"ArrowLeft"}))})]),(0,a._)("div",Ru,[(0,a.Wm)(l,{icon:"circle",type:"primary",color:"black",round:""})]),(0,a._)("div",qu,[(0,a.Wm)(l,{icon:"arrow",type:"primary",color:"#74856c",onClick:t[2]||(t[2]=e=>n.directionChange({key:"ArrowRight"}))})])]),(0,a._)("div",null,[(0,a._)("div",Mu,[(0,a.Wm)(l,{icon:"arrow-down",type:"primary",color:"#74856c",onClick:t[3]||(t[3]=e=>n.directionChange({key:"ArrowDown"}))})])])])],512)])}var Nu={name:"RetroSnake",components:{},data(){return{boxWidth:0,boxHeight:0,unit:10,stageWidth:0,stageHeight:0,snakeSituation:{left:0,top:0},foodSituation:{left:0,top:0},direction:null,timer:null,keyArr:["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],reObj:{ArrowUp:"ArrowDown",ArrowDown:"ArrowUp",ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft"},length:1,head:0,css:{},score:0,level:1}},methods:{onClickLeft(){this.$router.back()},init(){this.getSize(),this.getFoodSituation()},foodMeet(){this.getFoodSituation(),this.length++,this.score+=100,this.score%300===0&&(this.level++,this.move()),this.css[this.length-1]={left:null,top:null},this.css[this.length-1].left=this.snakeSituation.left,this.css[this.length-1].top=this.snakeSituation.top},getFoodSituation(){this.foodSituation.left=~~(Math.random()*this.stageWidth/this.unit)*this.unit,this.foodSituation.top=~~(Math.random()*this.stageHeight/this.unit)*this.unit},getSize(){this.boxWidth=this.$refs.gameBox.clientWidth,this.boxHeight=this.$refs.gameBox.clientHeight,this.stageWidth=~~((this.boxWidth-20)/this.unit)*this.unit,this.stageHeight=~~(.65*(this.boxHeight-20)/this.unit)*this.unit},directionChange(e){this.keyActive&&this.keyArr.indexOf(e.key)>-1&&this.direction!==e.key&&(this.keyActive=!1,(this.length<2||this.reObj[this.direction]!==e.key)&&(this.direction=e.key))},snakeItemStyle(e){return{width:"10px",height:"10px",left:this.css[e]?this.css[e].left+"px":0,top:this.css[e]?this.css[e].top+"px":0}},isGameOver(){let e=this.snakeSituation.top<0||this.snakeSituation.top>this.stageHeight-this.unit||this.snakeSituation.left<0||this.snakeSituation.left>this.stageWidth-this.unit;for(let t in this.css)+t!==this.head&&this.css[t].left===this.snakeSituation.left&&this.css[t].top===this.snakeSituation.top&&(e=!0);if(e){clearInterval(this.timer);for(let e in this.css)this.css[e].left=~~(Math.random()*this.stageWidth/this.unit)*this.unit,this.css[e].top=~~(Math.random()*this.stageHeight/this.unit)*this.unit;l.F.fail({message:"YOU DEAD!",onClose:()=>{confirm("重新开始?")?this.$emit("childReload"):this.$router.back()}})}},move(){clearInterval(this.timer),this.timer=setInterval((()=>{if(this.direction){switch(this.css[this.head]={left:null,top:null},this.css[this.head].left=this.snakeSituation.left,this.css[this.head].top=this.snakeSituation.top,this.head--,this.head<0&&(this.head=this.length-1),this.direction){case"ArrowUp":this.snakeSituation.top-=this.unit;break;case"ArrowDown":this.snakeSituation.top+=this.unit;break;case"ArrowLeft":this.snakeSituation.left-=this.unit;break;case"ArrowRight":this.snakeSituation.left+=this.unit;break}this.isGameOver(),this.foodSituation.left===this.snakeSituation.left&&this.foodSituation.top===this.snakeSituation.top&&this.foodMeet()}this.keyActive=!0}),300-30*this.level)}},mounted(){window.onresize=this.init,this.init(),document.addEventListener("keydown",(e=>{this.directionChange(e)})),this.move()},computed:{stageStyle(){return{width:this.stageWidth+"px",height:this.stageHeight+"px"}},infoStyle(){let e=~~(.05*(this.boxHeight-20)/this.unit)*this.unit+"px";const t=parseInt(e)/2+"px";return{height:e,"font-size":e,margin:t}},foodStyle(){let e=this.unit+"px",t=this.unit+"px",i=this.foodSituation.left+"px",s=this.foodSituation.top+"px";return{width:e,height:t,left:i,top:s}},sliceStyle(){let e=this.unit/2+"px",t=this.unit/2+"px";return{width:e,height:t}},snakeHeadStyle(){let e=this.unit+"px",t=this.unit+"px",i=this.snakeSituation.left+"px",s=this.snakeSituation.top+"px";return{width:e,height:t,left:i,top:s,backgroundColor:"red"}}}};const Gu=(0,k.Z)(Nu,[["render",Tu],["__scopeId","data-v-ee1f2bda"]]);var Pu=Gu,Eu={name:"SnakePage",inject:["reload"],components:{RetroSnake:Pu},data(){return{key:0}},methods:{onClickLeft(){this.$router.back()},childReload(){this.key=this.reload()}},mounted(){}};const Yu=(0,k.Z)(Eu,[["render",$u]]);var Ou=Yu;const Qu=[{path:"/admin",name:"admin",component:z,meta:{index:2}},{path:"/comAdd",name:"comAdd",component:P,meta:{index:3}},{path:"/chaAdd",name:"chaAdd",component:ie,meta:{index:3}},{path:"/articlesList",name:"articlesList",component:pe,meta:{index:3}},{path:"/article/:id",name:"article",component:Fe,meta:{index:4}},{path:"/announceList",name:"announceList",component:Ge,meta:{index:3}},{path:"/login",name:"login",component:_n,meta:{index:2}},{path:"/channelSelect",name:"channelSelect",component:wc,meta:{index:2}},{path:"/register",name:"register",component:jn,meta:{index:3}},{path:"/profileEdit",name:"profileEdit",component:qn,meta:{index:2}},{path:"/draftList",name:"draftList",component:dl,meta:{index:2}},{path:"/myCollect",name:"myCollect",component:Mr,meta:{index:2}},{path:"/history",name:"history",component:ac,meta:{index:2,keepAlive:!0,spe:!0}},{path:"/collectDetail",name:"collectDetail",component:Kr,meta:{index:3,keepAlive:!0,spe:!0}},{path:"/submit",name:"submit",component:Zo,meta:{index:101}},{path:"/post",name:"post",component:gn,meta:{index:101}},{path:"/search",name:"/search",component:Pc,meta:{index:2}},{path:"/articleHome/:id",name:"articleHome",component:pr,meta:{index:100,keepAlive:!0}},{path:"/personal/:id",name:"personal",component:jr,meta:{index:100,keepAlive:!0}},{path:"/subscribe/:id/:active",name:"subscribe",component:Uc,meta:{index:100,keepAlive:!0}},{path:"/contact",name:"contact",component:Jc,meta:{index:2}},{path:"/feedback",name:"feedback",component:Td,meta:{index:3}},{path:"/bugDetail/:id",name:"bugDetail",component:bh,meta:{index:4}},{path:"/questionList/:type",name:"questionList",component:Ah,meta:{index:4}},{path:"/questionDetail/:id",name:"questionDetail",component:Kh,meta:{index:5}},{path:"/answerList/:id",name:"answerList",component:Ss,meta:{index:2}},{path:"/replyToMe/:id",name:"replyList",component:ta,meta:{index:2}},{path:"/newSubscribe/:id",name:"newSubscribe",component:ga,meta:{index:2}},{path:"/directMessage/:id",name:"directMessage",component:Aa,meta:{index:100,keepAlive:!0}},{path:"/communityItem/:id",name:"communityItem",component:Pi,meta:{index:2,keepAlive:!0,spe:!0}},{path:"/",name:"home",component:gi,meta:{index:1,keepAlive:!0,needRefresh:!1,dynamicScroll:0,spe:!0}},{path:"/my",name:"my",component:ko,meta:{index:1,keepAlive:!0,spe:!0}},{path:"/messageNotice",name:"messageNotice",component:rs,meta:{index:1,keepAlive:!0,spe:!0}},{path:"/community",name:"community",component:Ri,meta:{index:1,keepAlive:!0,spe:!0}},{path:"/setup",name:"setup",component:im,meta:{index:2}},{path:"/appDownload",name:"appDownload",component:dm,meta:{index:3}},{path:"/miniList",name:"miniList",component:gm,meta:{index:2}},{path:"/EWMPage",name:"EWMPage",component:Ym,meta:{index:3}},{path:"/MusicPage",name:"MusicPage",component:zu,meta:{index:3}},{path:"/snakePage",name:"snakePage",component:Ou,meta:{index:3}}],Ku=(0,_.p7)({history:(0,_.r5)(),routes:Qu});Ku.beforeEach((e=>{"/"===e.path||"/community"===e.path||"/my"===e.path||"/messageNotice"===e.path?sessionStorage["quit"]=1:sessionStorage["quit"]=0}));var Zu=Ku,Ju=i(65);const Xu=(e,t)=>{"object"===typeof t&&(t=JSON.stringify(t)),window.localStorage.setItem(e,t)},ep=e=>{const t=window.localStorage.getItem(e);try{return JSON.parse(t)}catch(i){return t}},tp=i(6265),ip="USER_KEY",sp="HISTORY_KEY",ap="SCROLL_KEY",op="DATE_KEY",np="SETUP_KEY";var lp=(0,Ju.MT)({state:{size:10,URL:"https://dinoeye.asia/",gitUrl:"https://dinoeye.asia/",user:ep(ip),history:ep(sp),lastDate:ep(op),include:[],setup:ep(np),imageType:["image/jpeg","image/png","image/gif","image/webp"],scrollLocation:ep(ap),communityClass:["推荐","生活","游戏","数码科技","影视动漫"],isBack:ep("BACK_KEY")},getters:{},mutations:{setUser(e,t){e.user=t,Xu(ip,JSON.stringify(e.user))},setHistory(e,t){e.history=t,Xu(sp,JSON.stringify(e.history))},setLastDate(e,t){e.lastDate=t,Xu(op,JSON.stringify(e.lastDate))},setSetUp(e,t){e.setup=t,Xu(np,JSON.stringify(e.setup))},setScroll(e,t){e.scrollLocation=t,Xu(ap,e.scrollLocation)},setBack(e,t){e.isBack=t,Xu("BACK_KEY",e.isBack)},includeAdd(e,t){-1===e.include.indexOf(t)&&e.include.push(t)},includeDel(e,t){e.include.indexOf(t),e.include.splice(e.include.indexOf(t),1)},UserRefresh(e,t){let i;tp.get(e.URL+"users/userDataRefresh",{params:{userId:t}}).then((e=>{i=e,this.commit("setUser",i.data)}))}},actions:{},modules:{}}),rp=i(1738),cp=i(8791);i(5110),i(3434);const dp=(0,s.ri)(I),hp=jo().create({baseURL:"https://dinoeye.asia/users/",timeout:15e3});hp.interceptors.request.use((e=>e)),hp.interceptors.response.use((e=>e.data));const mp=jo().create({baseURL:"https://dinoeye.asia/admins/",timeout:15e3});mp.interceptors.request.use((e=>e)),mp.interceptors.response.use((e=>e.data)),dp.config.globalProperties.$axios=hp,dp.config.globalProperties.$axios2=mp,dp.use(lp).use(Zu).use(cp.ZP).use(rp.J).mount("#app")},9771:function(e,t,i){"use strict";e.exports=i.p+"img/cat.9ef7a159.jpeg"},4095:function(e,t,i){"use strict";e.exports=i.p+"img/contact.bbc513e0.jpg"},6876:function(e){"use strict";e.exports="data:image/png;base64,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"},7205:function(e){"use strict";e.exports="data:image/png;base64,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"},4654:function(){}},t={};function i(s){var a=t[s];if(void 0!==a)return a.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,i),o.exports}i.m=e,function(){var e=[];i.O=function(t,s,a,o){if(!s){var n=1/0;for(d=0;d<e.length;d++){s=e[d][0],a=e[d][1],o=e[d][2];for(var l=!0,r=0;r<s.length;r++)(!1&o||n>=o)&&Object.keys(i.O).every((function(e){return i.O[e](s[r])}))?s.splice(r--,1):(l=!1,o<n&&(n=o));if(l){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[s,a,o]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.p=""}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,o,n=s[0],l=s[1],r=s[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(a in l)i.o(l,a)&&(i.m[a]=l[a]);if(r)var d=r(i)}for(t&&t(s);c<n.length;c++)o=n[c],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(d)},s=self["webpackChunkdinoeye"]=self["webpackChunkdinoeye"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(9916)}));s=i.O(s)})();
//# sourceMappingURL=app.2b5f6fd5.js.map