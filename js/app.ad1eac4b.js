(function(){var e={4780:function(e,t,s){"use strict";var i=s(9242),a=s(3396);const o={id:"app",class:"Router wrapper"};function l(e,t,s,l,n,r){const c=(0,a.up)("router-view"),d=(0,a.up)("van-action-sheet"),m=(0,a.up)("van-share-sheet"),u=(0,a.up)("ActionSheet");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a.Wm)(c,null,{default:(0,a.w5)((({Component:t})=>[(0,a.Wm)(i.uT,{name:n.transitionName},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)(a.Ob,null,[e.$route.meta.keepAlive?((0,a.wg)(),(0,a.j4)((0,a.LL)(t),{key:e.$route.path})):(0,a.kq)("",!0)],1024))])),_:2},1032,["name"]),(0,a.Wm)(i.uT,{name:n.transitionName},{default:(0,a.w5)((()=>[e.$route.meta.keepAlive?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)((0,a.LL)(t),{key:0}))])),_:2},1032,["name"])])),_:1}),(0,a.Wm)(d,{show:n.show,"onUpdate:show":t[0]||(t[0]=e=>n.show=e),actions:n.actions,onSelect:r.onSelect,"cancel-text":"取消",title:"你认为此内容有什么问题？",closeable:!1,"close-on-click-action":""},null,8,["show","actions","onSelect"]),(0,a.Wm)(m,{show:n.showShare,"onUpdate:show":t[1]||(t[1]=e=>n.showShare=e),title:"立即分享",options:n.options,onSelect:r.shareSelect},null,8,["show","options","onSelect"]),(0,a.Wm)(d,{show:n.actSheetShow,"onUpdate:show":t[3]||(t[3]=e=>n.actSheetShow=e),"cancel-text":"取消",title:"操作",closeable:!1},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)(u,{articleId:n.articleId,key:n.key,onCloseAction:t[2]||(t[2]=e=>n.actSheetShow=!1)},null,8,["articleId"]))])),_:1},8,["show"])])}var n=s(9733),r=s(6431),c=s(5743),d=s.n(c),m=s(893),u=s.n(m);s(8212);d().locale("zh-cn"),d().extend(u());var h=d(),p=s(253);const g={class:"ActionSheet wrapper"},f=(0,a.Uk)("加载中...");function w(e,t,s,i,o,l){const n=(0,a.up)("van-loading"),r=(0,a.up)("van-grid-item"),c=(0,a.up)("van-grid");return(0,a.wg)(),(0,a.iD)("div",g,[o.loading?((0,a.wg)(),(0,a.j4)(n,{key:0,size:"1rem",vertical:"",style:{"padding-top":"1rem"}},{default:(0,a.w5)((()=>[f])),_:1})):((0,a.wg)(),(0,a.j4)(c,{key:1,clickable:"","column-num":4,border:!1,"icon-size":"1rem"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{icon:"warning",text:"举报","icon-color":"grey",onClick:l.report},null,8,["onClick"]),o.delShow?((0,a.wg)(),(0,a.j4)(r,{key:0,icon:"delete",text:"删除","icon-color":"grey",onClick:t[0]||(t[0]=e=>l.delArticle(s.articleId))})):(0,a.kq)("",!0),o.editShow?((0,a.wg)(),(0,a.j4)(r,{key:1,icon:"edit",text:"编辑","icon-color":"grey",onClick:t[1]||(t[1]=e=>l.editArticle(s.articleId))})):(0,a.kq)("",!0)])),_:1}))])}var v={props:{articleId:{type:Number}},inject:["report"],data(){return{loading:!0,authorId:-1,type:null,delShow:!1,editShow:!1}},methods:{delArticle(e){r.V.confirm({title:"确定吗",message:"关于此文章的一切都会消失，仍旧如此吗"}).then((()=>{n.F.loading({message:"删除中...",overlay:!0,loadingType:"spinner",duration:0});const t={articleId:e};this.$axios.get("delArticle",{params:t}).then((e=>{console.log(e),n.F.clear(),n.F.success({message:"删除成功！",overlay:!0,onClose:()=>{this.$router.back()}})}))})).catch((()=>{}))},editArticle(){this.isSubmit?this.$router.push({path:"/submit",query:{articleId:this.articleId}}):this.$router.push({path:"/post",query:{articleId:this.articleId}}),this.$emit("closeAction")},init(){if(this.articleId&&this.$store.state.user){const e={articleId:this.articleId};this.$axios.get("articleItemGet",{params:e}).then((e=>{this.isSubmit=e[0].isSubmit,e[0].authorId===this.$store.state.user.userId&&(this.delShow=!0,this.editShow=!0),this.type=e[0].isSubmit,this.loading=!1}))}else this.loading=!1}},mounted(){this.init()}},k=s(89);const y=(0,k.Z)(v,[["render",w]]);var b=y,C={name:"App",components:{ActionSheet:b},provide(){return{reload:this.reload,getId:this.getId,before:this.before,isExistChecked:this.isExistChecked,untilMin:this.untilMin,goPersonal:this.goPersonal,goArticle:this.goArticle,minHeight:this.minHeight,developing:this.developing,toLogin:this.toLogin,report:this.report,share:this.share,actionShow:this.actionShow,avatarGet:this.avatarGet}},data(){return{show:!1,actions:[{name:"发布 违法违规 内容",color:"#ee0a24"},{name:"发布 色情低俗 内容",color:"#ee0a24"},{name:"发布 有害信息 内容",color:"#ee0a24"},{name:"发布 垃圾广告 内容",color:"#ee0a24"},{name:"发布 钱物交易 内容",color:"#ee0a24"},{name:"发布 辱骂/引战 内容",color:"#ee0a24"},{name:"发布 无意义 内容",color:"#ee0a24"},{name:"发布 侵权/抄袭 内容",color:"#ee0a24"},{name:"发布 侵犯隐私 内容",color:"#ee0a24"},{name:"发布 血腥/暴力 内容",color:"#ee0a24"},{name:"发布 令人羡慕/嫉妒 内容",color:"#ee0a24"}],options:[[{name:"微信",icon:"wechat"},{name:"朋友圈",icon:"wechat-moments"},{name:"微博",icon:"weibo"},{name:"QQ",icon:"qq"}],[{name:"复制链接",icon:"link"},{name:"分享海报",icon:"poster"},{name:"二维码",icon:"qrcode"},{name:"小程序码",icon:"weapp-qrcode"}]],actSheetShow:!1,key:-1,showShare:!1,transitionName:"",include:[],backAble:!0,myHistory:{},backTwice:!0,articleId:null}},methods:{actionShow(e){this.articleId=e,this.key=this.reload(),this.actSheetShow=!0},avatarGet(e){return e&&0!==e.length?this.$store.state.URL+"upload/avatar/"+e:this.$store.state.URL+"/images/avatar/notlogin.png"},report(){this.show=!0},share(){this.showShare=!0},onSelect(){n.F.success("举报成功!"),this.actSheetShow=!1},shareSelect(){n.F.success("到此为止!"),this.showShare=!1},developing(){(0,n.F)("敬请期待！")},toLogin(){r.V.confirm({title:"未登录",message:"你必须要登录才能使用此功能，是否前去登录?"}).then((()=>{this.$router.replace("/login")})).catch((()=>{}))},minHeight(e,t){this.$nextTick((()=>{const s=(0,p.EL)(e);return t?{"min-height":`calc(100vh - ${s.top+"px"})`}:{"min-height":`calc(100vh - 50px - ${s.top+"px"})`}}))},untilMin(e){return h(e).format("MM/DD HH:mm")},before(e){const t=h(e),s=h().valueOf(),i=t.diff(s,"day",!0);return i<=-7?h(e).format("YYYY/MM/DD"):h(e).fromNow()},getId(e){const t=e.split("/"),s=t[t.length-1];return s},reload(){return(new Date).getTime()},goPersonal(e){this.$router.push("/personal/"+e)},goArticle(e){this.$router.push("/articleHome/"+e)},async isExistChecked(e){return await this.$axios.get("isExistChecked",{params:{articleId:e,userId:0}}).then((e=>(e||n.F.fail({message:"文章已删除!",duration:3e3,overlay:!0,onClose:this.$router.back}),e)))},fun(){!0===this.backTwice&&(!0===this.backAble?(history.back(),this.$store.commit("setBack",!0),this.backAble=!1):(this.$store.commit("setBack",!1),this.backAble=!0))},toastShow(){(0,n.F)({message:"再按一次退出应用",position:"bottom",duration:2e3})}},watch:{$route(e,t){!0!==t.meta.keepAlive||t.meta.spe?this.backTwice=!1:this.backTwice=!0,100===e.meta.index&&100===t.meta.index?this.transitionName="scale":e.meta.index>t.meta.index?this.transitionName="slide":e.meta.index<t.meta.index?this.transitionName="back":this.transitionName=""}},created(){window.toastShow=this.toastShow},mounted(){this.$store.commit("setBack",!1),window.addEventListener("popstate",this.fun,!1)}};const I=(0,k.Z)(C,[["render",l]]);var x=I,_=s(2483);const L={class:"Admin wrapper pt"};function A(e,t,s,i,o,l){const n=(0,a.up)("van-nav-bar"),r=(0,a.up)("van-cell"),c=(0,a.up)("van-cell-group"),d=(0,a.up)("van-collapse-item"),m=(0,a.up)("van-collapse");return(0,a.wg)(),(0,a.iD)("div",L,[(0,a.Wm)(n,{title:"应用管理","left-text":"返回","left-arrow":"",onClickLeft:l.onClickLeft,fixed:""},null,8,["onClickLeft"]),(0,a.Wm)(m,{modelValue:o.activeNames,"onUpdate:modelValue":t[0]||(t[0]=e=>o.activeNames=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"1",title:"社区管理"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{title:"增加社区","is-link":"",to:"/comAdd"}),(0,a.Wm)(r,{title:"单元格","is-link":""})])),_:1})])),_:1}),(0,a.Wm)(d,{name:"2",title:"频道管理"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{title:"增加频道","is-link":"",to:"/chaAdd"}),(0,a.Wm)(r,{title:"单元格","is-link":""})])),_:1})])),_:1}),(0,a.Wm)(d,{name:"3",title:"审核"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{title:"文章审核","is-link":"",to:"/articlesList"}),(0,a.Wm)(r,{title:"单元格","is-link":""})])),_:1})])),_:1}),(0,a.Wm)(d,{name:"4",title:"公告管理"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{title:"公告管理","is-link":"",to:"/announceList"})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var W={name:"AdminView",data(){return{activeNames:[]}},methods:{onClickLeft(){this.$router.back()}},mounted(){}};const S=(0,k.Z)(W,[["render",A]]);var D=S,$=s(7139);const U={class:"comAdd wrapper pt"},z={class:"iconBox_edit"},F={class:"p7"},V={style:{margin:"16px"}},j={style:{margin:"16px"}},B={class:"outBox"},R={class:"iconBox"},q={class:"textBox"};function H(e,t,s,o,l,n){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-icon"),d=(0,a.up)("van-field"),m=(0,a.up)("van-switch"),u=(0,a.up)("van-checkbox"),h=(0,a.up)("van-checkbox-group"),p=(0,a.up)("van-cell-group"),g=(0,a.up)("van-button"),f=(0,a.up)("van-form"),w=(0,a.up)("van-cell"),v=(0,a.up)("van-grid-item"),k=(0,a.up)("van-grid"),y=(0,a.up)("van-popup");return(0,a.wg)(),(0,a.iD)("div",U,[(0,a.Wm)(r,{title:"增加社区","left-text":"返回","left-arrow":"",onClickLeft:n.onClickLeft,fixed:""},null,8,["onClickLeft"]),(0,a._)("div",z,[(0,a._)("div",{class:"background",style:(0,$.j5)({background:l.background})},[(0,a._)("div",{class:"foreground",style:(0,$.j5)({background:l.foreground})},[(0,a.Wm)(c,{"class-prefix":l.icon,class:"iconfont",color:l.color,size:"0.8rem"},null,8,["class-prefix","color"])],4),(0,a._)("span",F,[(0,a.wy)((0,a.Wm)(c,{name:"fire"},null,512),[[i.F8,l.isHot]]),(0,a.Uk)((0,$.zw)(l.communityName),1)])],4)]),(0,a.Wm)(f,{onSubmit:n.onSubmit},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{inset:""},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:l.icon,"onUpdate:modelValue":t[0]||(t[0]=e=>l.icon=e),name:"图标",label:"图标",placeholder:"图标",rules:[{required:!0,message:"未填写"}]},null,8,["modelValue"]),(0,a.Wm)(d,{modelValue:l.communityName,"onUpdate:modelValue":t[1]||(t[1]=e=>l.communityName=e),name:"社区名",label:"社区名",placeholder:"社区名",rules:[{required:!0,message:"未填写"}]},null,8,["modelValue"]),(0,a.Wm)(d,{modelValue:l.color,"onUpdate:modelValue":t[2]||(t[2]=e=>l.color=e),name:"图标颜色",label:"图标颜色",placeholder:"图标颜色",rules:[{required:!0,message:"未填写"}]},null,8,["modelValue"]),(0,a.Wm)(d,{modelValue:l.foreground,"onUpdate:modelValue":t[3]||(t[3]=e=>l.foreground=e),name:"前景色",label:"前景色",placeholder:"前景色",rules:[{required:!0,message:"未填写"}]},null,8,["modelValue"]),(0,a.Wm)(d,{modelValue:l.background,"onUpdate:modelValue":t[4]||(t[4]=e=>l.background=e),name:"背景色",label:"背景色",placeholder:"背景色",rules:[{required:!0,message:"未填写"}]},null,8,["modelValue"]),(0,a.Wm)(d,{name:"switch",label:"热门"},{input:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:l.isHot,"onUpdate:modelValue":t[5]||(t[5]=e=>l.isHot=e),size:"20"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,{name:"checkboxGroup",label:"社区分类"},{input:(0,a.w5)((()=>[(0,a.Wm)(h,{modelValue:l.communityClass,"onUpdate:modelValue":t[6]||(t[6]=e=>l.communityClass=e),direction:"horizontal"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.allCommunityClass,(e=>((0,a.wg)(),(0,a.j4)(u,{name:e,shape:"square",key:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,$.zw)(e),1)])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,a._)("div",V,[(0,a.Wm)(g,{round:"",block:"",color:l.editing?"red":"black","native-type":"submit"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,$.zw)(l.editing?"确定":"提交"),1)])),_:1},8,["color"])])])),_:1},8,["onSubmit"]),(0,a._)("div",j,[(0,a.Wm)(g,{round:"",block:"",color:l.editing?"green":"lightblue",onClick:n.cancelOrShow},{default:(0,a.w5)((()=>[(0,a.Uk)((0,$.zw)(l.editing?"取消":"编辑"),1)])),_:1},8,["color","onClick"])]),(0,a.Wm)(y,{show:l.show,"onUpdate:show":t[7]||(t[7]=e=>l.show=e),position:"bottom",style:{width:"100%",height:"80%"},class:"pop"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.allCommunitys,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e},[(0,a.Wm)(w,{title:e.communityClass},null,8,["title"]),(0,a.Wm)(k,{direction:"horizontal","column-num":2,clickable:"",gutter:"0.2rem"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.content,(e=>((0,a.wg)(),(0,a.j4)(v,{key:e,onClick:t=>n.comSelect(e)},{default:(0,a.w5)((()=>[(0,a._)("div",B,[(0,a._)("div",R,[(0,a._)("div",{class:"foreground",style:(0,$.j5)({background:e.foreground})},[(0,a.Wm)(c,{"class-prefix":e.icon+" iconfont",color:e.color,size:"0.6rem"},null,8,["class-prefix","color"])],4)]),(0,a._)("p",q,(0,$.zw)(e.communityName),1)])])),_:2},1032,["onClick"])))),128))])),_:2},1024)])))),128))])),_:1},8,["show"])])}var N=s(5410),G=s.n(N),T={name:"comAdd",data(){return{icon:"icon-xiugai",communityName:"",color:"",foreground:"",background:"",isHot:!0,communityClass:[],show:!1,allCommunitys:[],allCommunityClass:this.$store.state.communityClass,editing:!1,editedId:-1}},methods:{onClickLeft(){this.$router.back()},async onSubmit(){let e={icon:this.icon,communityName:this.communityName,color:this.color,foreground:this.foreground,background:this.background,isHot:this.isHot,communityClass:this.communityClass};n.F.loading({message:"提交中...",overlay:!0,loadingType:"spinner",duration:0}),this.editing?await r.V.confirm({title:"确定修改吗"}).then((async()=>{e={...e,communityId:this.editedId};let t=G().stringify(e);await this.$axios2.post("comAdd",t).then((e=>{console.log(e)}))})).catch((()=>{})):await r.V.confirm({title:"确定增加吗"}).then((async()=>{let t=G().stringify(e);await this.$axios2.post("comAdd",t).then((e=>{console.log(e)}))})).catch((()=>{})),n.F.clear(),n.F.success("成功！"),this.editing=!1},async cancelOrShow(){this.editing?this.editing=!1:(await this.communityGet(),this.show=!0)},comSelect(e){this.icon=e.icon,this.communityName=e.communityName,this.color=e.color,this.foreground=e.foreground,this.background=e.background,this.isHot=e.isHot,this.communityClass=e.communityClass.split(" "),this.editedId=e.communityId,this.show=!1,this.editing=!0},async communityGet(){const e={userId:this.$store.state.user.userId};await this.$axios.get("comGet",{params:e}).then((e=>{this.allCommunitys=this.allCommunityClass.map((t=>{let s={};return s.communityClass=t,s.content=e.filter((e=>e.communityClass.indexOf(t)>-1)),s}))}))}},mounted(){}};const M=(0,k.Z)(T,[["render",H],["__scopeId","data-v-528cf4e4"]]);var E=M;const P={class:"comAdd wrapper pt"},Y={class:"iconBox"},O={class:"p7"},Q={style:{margin:"16px"}},K=(0,a.Uk)(" 增加频道 "),Z={style:{margin:"16px"}},J=(0,a.Uk)(" 修改频道 ");function X(e,t,s,o,l,n){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-icon"),d=(0,a.up)("van-field"),m=(0,a.up)("van-cell-group"),u=(0,a.up)("van-button"),h=(0,a.up)("van-form");return(0,a.wg)(),(0,a.iD)("div",P,[(0,a.Wm)(r,{title:"增加频道","left-text":"返回","left-arrow":"",onClickLeft:n.onClickLeft,fixed:""},null,8,["onClickLeft"]),(0,a._)("div",Y,[(0,a._)("div",{class:"background",style:(0,$.j5)({background:l.background})},[(0,a._)("div",{class:"foreground",style:(0,$.j5)({background:l.foreground})},[(0,a.Wm)(c,{"class-prefix":l.icon,class:"iconfont",color:l.color,size:"0.8rem"},null,8,["class-prefix","color"])],4),(0,a._)("span",O,[(0,a.wy)((0,a.Wm)(c,{name:"fire"},null,512),[[i.F8,l.isHot]]),(0,a.Uk)((0,$.zw)(l.channelName),1)])],4)]),(0,a.Wm)(h,{onSubmit:n.onSubmit},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{inset:""},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:l.channelName,"onUpdate:modelValue":t[0]||(t[0]=e=>l.channelName=e),name:"频道名",label:"频道名",placeholder:"频道名",rules:[{required:!0,message:"未填写"}]},null,8,["modelValue"])])),_:1}),(0,a._)("div",Q,[(0,a.Wm)(u,{round:"",block:"",type:"primary","native-type":"submit"},{default:(0,a.w5)((()=>[K])),_:1})]),(0,a._)("div",Z,[(0,a.Wm)(u,{round:"",block:"",type:"primary","native-type":"submit"},{default:(0,a.w5)((()=>[J])),_:1})])])),_:1},8,["onSubmit"])])}var ee={name:"comAdd",data(){return{icon:"icon-xiugai",channelName:"频道名",color:"white",foreground:"pink",background:"red",isHot:!0}},methods:{onClickLeft(){this.$router.back()},onSubmit(){const e={channelName:this.channelName};this.$axios2.get("chaAdd",{params:e}).then((e=>{console.log(e)}))}},mounted(){}};const te=(0,k.Z)(ee,[["render",X],["__scopeId","data-v-0b777718"]]);var se=te;const ie=e=>((0,a.dD)("data-v-4325a7e4"),e=e(),(0,a.Cn)(),e),ae={class:"articlesList wrapper pt"},oe={key:0},le={class:"custom-title van-multi-ellipsis--l2"},ne={key:1},re={class:"custom-title van-multi-ellipsis--l2"},ce=ie((()=>(0,a._)("br",null,null,-1))),de={class:"custom-title van-multi-ellipsis--l2"};function me(e,t,s,i,o,l){const n=(0,a.up)("van-nav-bar"),r=(0,a.up)("van-cell"),c=(0,a.up)("van-icon"),d=(0,a.up)("van-button"),m=(0,a.up)("van-swipe-cell");return(0,a.wg)(),(0,a.iD)("div",ae,[(0,a.Wm)(n,{title:"文章管理与审核","left-text":"返回","left-arrow":"",onClickLeft:l.onClickLeft,"right-text":o.managing?"管理":"审核",fixed:"",onClickRight:t[0]||(t[0]=e=>o.managing=!o.managing)},null,8,["onClickLeft","right-text"]),o.managing?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",oe,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.list,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.articleId},[(0,a.Wm)(r,{"is-link":"",to:"/article/"+e.articleId,label:e.updatedAt},{title:(0,a.w5)((()=>[(0,a._)("span",le,(0,$.zw)(e.title),1)])),_:2},1032,["to","label"])])))),128))])),o.managing?((0,a.wg)(),(0,a.iD)("div",ne,[(0,a.Wm)(r,{title:"在轮播"},{"right-icon":(0,a.w5)((()=>[(0,a.Wm)(c,{name:"checked",color:"blue",size:"0.5rem"})])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.list2,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.articleId},[(0,a.Wm)(m,{"before-close":l.beforeClose,"stop-propagation":"",name:e.inSwipe+"-"+e.articleId},{right:(0,a.w5)((()=>[(0,a.Wm)(d,{square:"",type:"danger",text:e.inSwipe?"下轮播":"上轮播"},null,8,["text"])])),default:(0,a.w5)((()=>[(0,a.Wm)(r,{"is-link":"",to:"/article/"+e.articleId,label:e.updatedAt},{title:(0,a.w5)((()=>[(0,a._)("span",re,(0,$.zw)(e.title),1)])),_:2},1032,["to","label"])])),_:2},1032,["before-close","name"])])))),128)),ce,(0,a.Wm)(r,{title:"不在轮播"},{"right-icon":(0,a.w5)((()=>[(0,a.Wm)(c,{name:"clear",color:"red",size:"0.5rem"})])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.list3,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.articleId},[(0,a.Wm)(m,{"before-close":l.beforeClose,"stop-propagation":"",name:e.inSwipe+"-"+e.articleId},{right:(0,a.w5)((()=>[(0,a.Wm)(d,{square:"",type:"primary",text:e.inSwipe?"下轮播":"上轮播"},null,8,["text"])])),default:(0,a.w5)((()=>[(0,a.Wm)(r,{"is-link":"",to:"/article/"+e.articleId,label:e.updatedAt},{title:(0,a.w5)((()=>[(0,a._)("span",de,(0,$.zw)(e.title),1)])),_:2},1032,["to","label"])])),_:2},1032,["before-close","name"])])))),128))])):(0,a.kq)("",!0)])}var ue={name:"articlesList",data(){return{list:[],list2:[],list3:[],managing:!0}},methods:{onClickLeft(){this.$router.back()},beforeClose({name:e,position:t}){switch(t){case"left":case"cell":case"outside":return!0;case"right":console.log(e.split("-")),"false"===e.split("-")[0]?r.V.confirm({title:"上轮播",message:"确定将此文章发布到首页轮播图吗?"}).then((()=>{const t={articleId:e.split("-")[1],action:"up"};this.$axios2.get("swipeKa",{params:t}).then((e=>{console.log(e),this.$router.go(0)}))})).catch((()=>{})):r.V.confirm({title:"下轮播",message:"确定将此文章从轮播图上撤下吗?"}).then((()=>{const t={articleId:e.split("-")[1],action:"down"};this.$axios2.get("swipeKa",{params:t}).then((e=>{console.log(e),this.$router.go(0)}))})).catch((()=>{}))}}},mounted(){"false"===this.$route.query.managing?this.managing=!1:this.managing=!0,this.$axios2.get("articlesList").then((e=>{this.list=e[0].map((e=>(e.updatedAt=h(e.updatedAt).format("YYYY-MM-DD HH:mm:ss"),e))),this.list2=e[1].map((e=>(e.updatedAt=h(e.updatedAt).format("YYYY-MM-DD HH:mm:ss"),e))),this.list3=e[2].map((e=>(e.updatedAt=h(e.updatedAt).format("YYYY-MM-DD HH:mm:ss"),e)))}))}};const he=(0,k.Z)(ue,[["render",me],["__scopeId","data-v-4325a7e4"]]);var pe=he;const ge={class:"article wrapper pt"};function fe(e,t,s,i,o,l){const n=(0,a.up)("van-nav-bar"),r=(0,a.up)("van-action-sheet"),c=(0,a.up)("ArticleItem");return(0,a.wg)(),(0,a.iD)("div",ge,[(0,a.Wm)(n,{title:"文章详情","left-text":"返回","left-arrow":"",onClickLeft:l.onClickLeft,fixed:"","right-text":o.managing?"":"审核",onClickRight:t[0]||(t[0]=e=>o.show=!0)},null,8,["onClickLeft","right-text"]),(0,a.Wm)(r,{show:o.show,"onUpdate:show":t[1]||(t[1]=e=>o.show=e),actions:o.actions,onSelect:l.onSelect,"cancel-text":"取消","close-on-click-action":""},null,8,["show","actions","onSelect"]),(0,a._)("div",null,[0!==o.articleId?((0,a.wg)(),(0,a.j4)(c,{key:0,ArticleId:o.articleId,ref:"item",onArticleState:l.articleState},null,8,["ArticleId","onArticleState"])):(0,a.kq)("",!0)])])}const we={class:"articleItem wrapper p4",ref:"article"},ve={class:"article"},ke={class:"van-multi-ellipsis--l2 p3b title"},ye={key:0,class:"author"},be={class:"avatarBox"},Ce={class:"info"},Ie={class:"p5b"},xe={class:"p6g postTime"},_e={key:0,class:"subscribe"},Le=["innerHTML"];function Ae(e,t,s,i,o,l){const n=(0,a.up)("van-image"),r=(0,a.up)("router-link"),c=(0,a.up)("van-button");return(0,a.wg)(),(0,a.iD)("div",we,[o.articleItem.cover&&" "!==o.articleItem.cover?((0,a.wg)(),(0,a.j4)(n,{key:0,width:"100%",height:"5rem",fit:"cover",src:this.$store.state.URL+"upload/cover/"+o.articleItem.cover,alt:""},null,8,["src"])):(0,a.kq)("",!0),(0,a._)("div",ve,[(0,a._)("p",ke,(0,$.zw)(o.articleItem.title),1),o.user.userId?((0,a.wg)(),(0,a.iD)("div",ye,[(0,a._)("div",be,[(0,a.Wm)(r,{to:"/personal/"+o.articleItem.authorId},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{width:"1rem",height:"1rem",round:"",fit:"cover",src:l.avatarGet(o.user.avatar)},null,8,["src"])])),_:1},8,["to"])]),(0,a._)("div",Ce,[(0,a.Wm)(r,{to:"/personal/"+o.articleItem.authorId},{default:(0,a.w5)((()=>[(0,a._)("p",Ie,(0,$.zw)(o.user.nickname),1),(0,a._)("p",xe,(0,$.zw)(l.before(o.createdAt)),1)])),_:1},8,["to"])]),this.$store.state.user&&this.$store.state.user.userId==o.user.userId?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",_e,[(0,a.Wm)(c,{size:"small",color:o.subscribeState?"grey":"#000",icon:o.subscribeState?"success":"plus",onClick:t[0]||(t[0]=e=>l.subscribe(o.user.userId))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,$.zw)(o.subscribeState?"已关注":"关注Ta"),1)])),_:1},8,["color","icon"])]))])):(0,a.kq)("",!0),(0,a._)("p",null,[(0,a.Wm)(c,{size:"mini",icon:"guide-o",type:"primary",to:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,$.zw)(o.channel.channelName),1)])),_:1})]),o.articleItem.content?((0,a.wg)(),(0,a.iD)("div",{key:1,innerHTML:o.articleItem.content,class:"content"},null,8,Le)):(0,a.kq)("",!0)])],512)}var We=s(1835),Se={name:"articleItem",inject:["avatarGet"],props:{ArticleId:{type:Number},Admin:{type:Boolean,default:!0}},data(){return{articleId:this.ArticleId,articleItem:{},user:{},channel:{},createdAt:"",manage:!0,images:[],admin:this.Admin,subscribeState:!1,subscribeList:[],fanList:[]}},methods:{loginState(){r.V.confirm({title:"未登录",message:"你必须要登录才能使用此功能，是否前去登录?"}).then((()=>{this.$router.replace("/login")})).catch((()=>{}))},before(e){const t=h(e),s=h().valueOf(),i=t.diff(s,"day",!0);return i<=-7?h(e).format("YYYY/MM/DD"):h(e).fromNow()},onClickLeft(){this.$router.back()},imgPreview(e){(0,We.e)({images:this.images,startPosition:e})},subscribe(e){this.$store.state.user?this.subscribeState?r.V.confirm({title:"取消关注"}).then((()=>{this.subscribeList=this.subscribeList.filter((t=>t-0!==e)),this.subscribeState=!1,this.fanList=this.fanList.filter((e=>e-0!=this.$store.state.user.userId)),this.subscribeUpdate()})).catch((()=>{})):(this.subscribeList.push(e),this.fanList.push(this.$store.state.user.userId),this.subscribeState=!0,this.subscribeUpdate()):this.loginState()},async articleDataGet(){if(!0===this.admin){const e={articleId:this.articleId};await this.$axios2.get("articleItemGet",{params:e}).then((e=>{e[0].content=e[0].content.replace(/(http)[\S]+(1337\/)/gi,this.$store.state.URL),this.articleItem=e[0],this.user=e[1],this.channel=e[2],this.manage=e[3],this.$emit("articleState",this.manage),this.createdAt=this.articleItem.createdAt}))}else{const e={articleId:this.articleId,URL:this.$store.state.URL};await this.$axios.get("articleItemGet",{params:e}).then((e=>{this.articleItem=e[0],this.user=e[1],console.log(this.user),this.channel=e[2],this.images=e[3],this.createdAt=this.articleItem.createdAt}))}},async targetFansGet(e){const t={userId:e};await this.$axios.get("subscribeListGet",{params:t}).then((e=>{this.fanList=e[1]}))},async subscribeGet(){const e={userId:this.$store.state.user.userId};await this.$axios.get("subscribeListGet",{params:e}).then((e=>{this.subscribeList=e[0]})),await this.targetFansGet(this.articleItem.authorId),this.fanList.indexOf(this.$store.state.user.userId+"")>-1&&(this.subscribeState=!0)},async dataGet(){await this.articleDataGet(),this.$store.state.user&&this.subscribeGet()},subscribeUpdate(){const e={fan:this.fanList,follow:this.subscribeList,userId:this.$store.state.user.userId,authorId:this.articleItem.authorId};this.$axios.get("subscribeUpdate",{params:e})}},created(){window.imgPreview=this.imgPreview},mounted(){this.dataGet()},updated(){const e=this.$refs.article,t=(0,p.EL)(e);this.$emit("reload",t.height)}};const De=(0,k.Z)(Se,[["render",Ae],["__scopeId","data-v-ca064934"]]);var $e=De,Ue={name:"ArticleView",components:{ArticleItem:$e},data(){return{articleId:0,show:!1,actions:[{name:"打回"},{name:"通过"}],managing:!0}},methods:{articleState(e){this.managing=e},onClickLeft(){this.$router.replace({path:"/articlesList",query:{managing:this.managing}})},onSelect(e){"打回"===e.name?r.V.confirm({title:"打回投稿",message:"确定打回此投稿吗?"}).then((()=>{const t={articleId:this.articleId,action:"No"};this.$axios2.get("auditAct",{params:t}).then((t=>{console.log(t),this.$router.back(),(0,n.F)(e.name)}))})).catch((()=>{})):r.V.confirm({title:"审核通过",message:"确定此投稿合格给予通过吗?"}).then((()=>{const t={articleId:this.articleId,action:"Yes"};console.log(t),this.$axios2.get("auditAct",{params:t}).then((t=>{console.log(t),this.$router.back(),(0,n.F)(e.name)}))})).catch((()=>{}))}},mounted(){const e=this.$route.path.split("/");this.articleId=parseInt(e[e.length-1])}};const ze=(0,k.Z)(Ue,[["render",fe]]);var Fe=ze;const Ve={class:"announceList wrapper pt"},je=(0,a.Uk)("增加公告"),Be={style:{margin:"16px"}},Re=(0,a.Uk)(" 提交 "),qe={class:"van-multi-ellipsis--l2"},He={class:"van-multi-ellipsis--l2"};function Ne(e,t,s,i,o,l){const n=(0,a.up)("van-nav-bar"),r=(0,a.up)("van-cell"),c=(0,a.up)("van-field"),d=(0,a.up)("van-switch"),m=(0,a.up)("van-cell-group"),u=(0,a.up)("van-button"),h=(0,a.up)("van-form"),p=(0,a.up)("van-popup"),g=(0,a.up)("van-card"),f=(0,a.up)("van-swipe-cell");return(0,a.wg)(),(0,a.iD)("div",Ve,[(0,a.Wm)(n,{title:"公告管理","left-text":"返回","left-arrow":"",onClickLeft:l.onClickLeft,fixed:""},null,8,["onClickLeft"]),(0,a.Wm)(r,{"is-link":"",onClick:t[0]||(t[0]=e=>o.show=!0)},{default:(0,a.w5)((()=>[je])),_:1}),(0,a.Wm)(p,{show:o.show,"onUpdate:show":t[4]||(t[4]=e=>o.show=e),position:"top",style:{height:"100%"},closeable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{onSubmit:l.onSubmit,style:{"margin-top":"30vh"}},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{inset:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:o.type,"onUpdate:modelValue":t[1]||(t[1]=e=>o.type=e),name:"类型",label:"类型",placeholder:"类型",rules:[{required:!0,message:"请填写类型"}]},null,8,["modelValue"]),(0,a.Wm)(c,{modelValue:o.message,"onUpdate:modelValue":t[2]||(t[2]=e=>o.message=e),rows:"1",autosize:"",label:"内容",type:"textarea",placeholder:"请输入内容",rules:[{required:!0,message:"请输入内容"}]},null,8,["modelValue"]),(0,a.Wm)(c,{name:"switch",label:"最新"},{input:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:o.checked,"onUpdate:modelValue":t[3]||(t[3]=e=>o.checked=e),size:"20"},null,8,["modelValue"])])),_:1})])),_:1}),(0,a._)("div",Be,[(0,a.Wm)(u,{round:"",block:"",type:"primary","native-type":"submit"},{default:(0,a.w5)((()=>[Re])),_:1})])])),_:1},8,["onSubmit"])])),_:1},8,["show"]),(0,a.Wm)(m,{title:"当前公告"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.showList,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a.Wm)(f,{"before-close":l.beforeClose,"stop-propagation":"",name:e.inSwipe+"-"+e.articleId},{right:(0,a.w5)((()=>[(0,a.Wm)(u,{square:"",type:"danger",text:"编辑",class:"delete-button",onClick:t=>l.edit(e)},null,8,["onClick"])])),left:(0,a.w5)((()=>[(0,a.Wm)(u,{square:"",type:"danger",text:"删除",class:"delete-button",onClick:t=>l.del(e)},null,8,["onClick"])])),default:(0,a.w5)((()=>[(0,a.Wm)(g,{title:e.type},{num:(0,a.w5)((()=>[(0,a.Uk)((0,$.zw)(l.untilMin(e.updatedAt)),1)])),desc:(0,a.w5)((()=>[(0,a._)("p",qe,(0,$.zw)(e.message),1)])),_:2},1032,["title"])])),_:2},1032,["before-close","name"])])))),128))])),_:1}),(0,a.Wm)(m,{title:"其他公告"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.otherList,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a.Wm)(f,{"before-close":l.beforeClose,"stop-propagation":"",name:e.inSwipe+"-"+e.articleId},{right:(0,a.w5)((()=>[(0,a.Wm)(u,{square:"",type:"danger",text:"编辑",class:"delete-button",onClick:t=>l.edit(e)},null,8,["onClick"])])),left:(0,a.w5)((()=>[(0,a.Wm)(u,{square:"",type:"danger",text:"删除",class:"delete-button",onClick:t=>l.del(e)},null,8,["onClick"])])),default:(0,a.w5)((()=>[(0,a.Wm)(g,{title:e.type},{num:(0,a.w5)((()=>[(0,a.Uk)((0,$.zw)(l.untilMin(e.updatedAt)),1)])),desc:(0,a.w5)((()=>[(0,a._)("p",He,(0,$.zw)(e.message),1)])),_:2},1032,["title"])])),_:2},1032,["before-close","name"])])))),128))])),_:1})])}var Ge={name:"AnnounceView",inject:["untilMin"],data(){return{showList:[],otherList:[],show:!1,message:"",type:"",checked:!1,editing:!1}},methods:{onClickLeft(){this.$router.back()},beforeClose(){},async onSubmit(){let e;e=this.editing?{message:this.message,type:this.type,show:this.checked,id:this.target.id}:{message:this.message,type:this.type,show:this.checked},await this.$axios2.get("announceAdd",{params:e}),history.go(0)},edit(e){this.show=!0,this.$nextTick((()=>{this.editing=!0,this.target=e,this.type=e.type,this.message=e.message,this.checked=e.show}))},del(e){r.V.confirm({title:"确定吗"}).then((()=>{this.$axios2.get("announceDel",{params:{id:e.id}}),history.go(0)})).catch((()=>{}))}},mounted(){this.$axios2.get("announceGet").then((e=>{this.showList=e[0],this.otherList=e[1]}))}};const Te=(0,k.Z)(Ge,[["render",Ne],["__scopeId","data-v-3c9573db"]]);var Me=Te;const Ee=e=>((0,a.dD)("data-v-32b3543d"),e=e(),(0,a.Cn)(),e),Pe={class:"Home pbt p3 wrapper"},Ye=(0,a.Uk)("动态"),Oe={key:0,class:"height100"},Qe={class:"bulk dynamicBulk",ref:"dynamicBulk"},Ke={class:"outBox"},Ze={class:"box"},Je=Ee((()=>(0,a._)("p",{class:"p6 van-ellipsis"},"全部",-1))),Xe={class:"box"},et={class:"p6 van-ellipsis"},tt=(0,a.Uk)("加载中... "),st={key:2,class:"",style:{height:"calc(100% - 3rem)"}},it={key:1},at={class:"notLogin"},ot=(0,a.Uk)("去登录"),lt=(0,a.Uk)("全部"),nt={class:"box"},rt={class:"van-multi-ellipsis--l2"},ct=Ee((()=>(0,a._)("div",{class:"placeholder"},null,-1)));function dt(e,t,s,i,o,l){const n=(0,a.up)("van-badge"),r=(0,a.up)("van-icon"),c=(0,a.up)("van-tab"),d=(0,a.up)("van-image"),m=(0,a.up)("van-tabs"),u=(0,a.up)("van-loading"),h=(0,a.up)("van-empty"),p=(0,a.up)("PostList"),g=(0,a.up)("van-list"),f=(0,a.up)("van-pull-refresh"),w=(0,a.up)("van-button"),v=(0,a.up)("router-link"),k=(0,a.up)("van-swipe-item"),y=(0,a.up)("van-swipe"),b=(0,a.up)("ChannelList"),C=(0,a.up)("van-nav-bar"),I=(0,a.up)("ChannelEdit"),x=(0,a.up)("van-popup"),_=(0,a.up)("TabBar");return(0,a.wg)(),(0,a.iD)("div",Pe,[(0,a.Wm)(m,{active:o.active,"onUpdate:active":t[5]||(t[5]=e=>o.active=e),shrink:"",class:"out height100",onChange:l.onChange},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"dynamics height100"},{title:(0,a.w5)((()=>[(0,a.Wm)(n,{dot:"",color:o.dynamicMaker.length?"red":"transparent"},{default:(0,a.w5)((()=>[Ye])),_:1},8,["color"])])),default:(0,a.w5)((()=>[o.logined?((0,a.wg)(),(0,a.iD)("div",Oe,[(0,a._)("div",Qe,[(0,a.Wm)(f,{modelValue:o.refreshing,"onUpdate:modelValue":t[2]||(t[2]=e=>o.refreshing=e),"head-height":80,style:{"min-height":"100%"},onRefresh:l.onRefresh},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{active:o.active2,"onUpdate:active":t[0]||(t[0]=e=>o.active2=e),shrink:"","line-height":"0","before-change":l.peopleChange,class:"shadow",sticky:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{name:"-1"},{title:(0,a.w5)((()=>[(0,a._)("div",Ke,[(0,a._)("div",Ze,[(0,a.Wm)(r,{name:"weapp-nav",size:"1.3rem"}),Je])])])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.follows,(e=>((0,a.wg)(),(0,a.j4)(c,{key:e.userId,name:e.userId},{title:(0,a.w5)((()=>[(0,a._)("div",{class:"outBox",style:(0,$.j5)({background:e.userId==o.targetId?"#eee":"white"})},[(0,a._)("div",Xe,[(0,a.Wm)(n,{dot:"",color:l.hasNewDynamic(e.userId)},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{round:"",width:"1.3rem",height:"1.3rem",src:l.avatarGet(e.avatar),"lazy-load":"",fit:"cover"},null,8,["src"])])),_:2},1032,["color"]),(0,a._)("p",et,(0,$.zw)(e.nickname),1)])],4)])),_:2},1032,["name"])))),128))])),_:1},8,["active","before-change"]),o.loading?((0,a.wg)(),(0,a.j4)(u,{key:0,size:"1rem",vertical:"",style:{"padding-top":"1rem"}},{default:(0,a.w5)((()=>[tt])),_:1})):o.list.length?((0,a.wg)(),(0,a.iD)("div",st,[(0,a.Wm)(g,{loading:o.dynamicLoading,"onUpdate:loading":t[1]||(t[1]=e=>o.dynamicLoading=e),finished:o.dynamicFinished,"finished-text":"没有更多了",onLoad:l.onLoad},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{ArticleList:o.list},null,8,["ArticleList"])])),_:1},8,["loading","finished","onLoad"])])):((0,a.wg)(),(0,a.j4)(h,{key:1,image:"error",description:"还没有关注任何用户或其未发布动态"}))])),_:1},8,["modelValue","onRefresh"])],512)])):((0,a.wg)(),(0,a.iD)("div",it,[(0,a.Wm)(h,{image:"error",description:"未登录，无法查看动态"}),(0,a._)("div",at,[(0,a.Wm)(w,{color:"#000",to:"/login"},{default:(0,a.w5)((()=>[ot])),_:1})])]))])),_:1}),(0,a.Wm)(c,{title:"头条",class:"headline"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{active:o.active1,"onUpdate:active":t[4]||(t[4]=e=>o.active1=e),shrink:"",swipeable:"",onChange:l.channelChange,class:"height100B bulk allChannel"},{"nav-right":(0,a.w5)((()=>[ct,(0,a.Wm)(r,{name:"wap-nav",class:"edit",onClick:l.showPop},null,8,["onClick"])])),default:(0,a.w5)((()=>[(0,a.Wm)(c,{name:-1},{title:(0,a.w5)((()=>[lt])),default:(0,a.w5)((()=>[(0,a.Wm)(f,{modelValue:o.refreshingAll,"onUpdate:modelValue":t[3]||(t[3]=e=>o.refreshingAll=e),"head-height":80,style:{"min-height":"calc(100vh - 96px)"},onRefresh:l.onRefreshAll},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{autoplay:3e3,"indicator-color":"white"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.swipe,(e=>((0,a.wg)(),(0,a.j4)(k,{key:e.articleId},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{to:"/articleHome/"+e.articleId},{default:(0,a.w5)((()=>[(0,a._)("div",nt,[(0,a.Wm)(d,{width:"10rem",height:"5rem",fit:"cover",src:e.cover},null,8,["src"]),(0,a._)("p",rt,(0,$.zw)(e.title),1)])])),_:2},1032,["to"])])),_:2},1024)))),128))])),_:1}),((0,a.wg)(),(0,a.j4)(b,{channelId:-1,currentChannel:o.currentChannel,params:o.channelParams,key:o.allChannelKey,onRefreshed:l.refreshed},null,8,["currentChannel","params","onRefreshed"]))])),_:1},8,["modelValue","onRefresh"])])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.myChannels,(e=>((0,a.wg)(),(0,a.j4)(c,{key:e.id,name:e.channelId,class:"height100B"},{title:(0,a.w5)((()=>[(0,a.Uk)((0,$.zw)(e.channelName),1)])),default:(0,a.w5)((()=>[(0,a.Wm)(b,{channelId:e.channelId,currentChannel:o.currentChannel,params:o.channelParams,ref_for:!0,ref:"channel"},null,8,["channelId","currentChannel","params"])])),_:2},1032,["name"])))),128))])),_:1},8,["active","onChange"])])),_:1})])),_:1},8,["active","onChange"]),(0,a.Wm)(x,{show:o.show,"onUpdate:show":t[6]||(t[6]=e=>o.show=e),position:"right",style:{width:"100%",height:"100%"},class:"pop"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{title:"频道偏好",onClickLeft:l.onClickLeft,"right-text":!0===o.isEditing?"完成":"编辑",onClickRight:l.onClickRight},{left:(0,a.w5)((()=>[(0,a.Wm)(r,{name:"cross",size:"18"})])),_:1},8,["onClickLeft","right-text","onClickRight"]),o.show?((0,a.wg)(),(0,a.j4)(I,{key:0,my:o.myChannels,isEdit:o.isEditing,ref:"headerChild"},null,8,["my","isEdit"])):(0,a.kq)("",!0)])),_:1},8,["show"]),(0,a.Wm)(_)])}const mt=e=>((0,a.dD)("data-v-32d5f6e5"),e=e(),(0,a.Cn)(),e),ut={class:"postList"},ht={key:0,class:"exist"},pt={class:"author"},gt={class:"aBox"},ft=["onClick"],wt={class:"p5"},vt={key:0,class:"inputBox"},kt=["value"],yt=["onClick"],bt={class:"title p4 van-multi-ellipsis--l2"},Ct={class:"text p5g"},It={class:"van-multi-ellipsis--l3"},xt={class:"imgs"},_t={class:"bottom"},Lt={class:"p6g"},At={class:"p5g"},Wt=(0,a.Uk)("  "),St={key:1,class:"notExist"},Dt=mt((()=>(0,a._)("div",{class:"info",style:{color:"red"}},[(0,a._)("span",null,"抱歉，该内容已被删除或失效！")],-1)));function $t(e,t,s,o,l,n){const r=(0,a.up)("van-image"),c=(0,a.up)("van-col"),d=(0,a.up)("van-row"),m=(0,a.up)("van-icon"),u=(0,a.up)("van-skeleton");return(0,a.wg)(),(0,a.iD)("div",ut,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.ArticleList,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"postItem",key:e.articleId},[e.notExist?((0,a.wg)(),(0,a.iD)("div",St,[Dt,(0,a.Wm)(u,{title:"",row:1,animate:!1})])):((0,a.wg)(),(0,a.iD)("div",ht,[(0,a._)("div",pt,[(0,a._)("div",gt,[(0,a._)("div",{class:"left",onClick:(0,i.iM)((t=>n.goPersonal(e.authorId)),["stop"])},[(0,a.Wm)(r,{round:"",width:"0.8rem",height:"0.8rem",fit:"cover",src:n.avatarGet(e.avatar),"lazy-load":""},null,8,["src"]),(0,a._)("span",wt,(0,$.zw)(e.authorName),1)],8,ft),s.isCollect?((0,a.wg)(),(0,a.iD)("div",vt,[(0,a.wy)((0,a._)("input",{type:"checkbox",value:e.articleId,"onUpdate:modelValue":t[0]||(t[0]=e=>l.checkedId=e),onClick:t[1]||(t[1]=(0,i.iM)((()=>{}),["stop"]))},null,8,kt),[[i.e8,l.checkedId]])])):(0,a.kq)("",!0)])]),(0,a._)("div",{class:"main",onClick:t=>n.goArticle(e.articleId)},[(0,a._)("div",bt,(0,$.zw)(e.title),1),(0,a._)("div",Ct,[(0,a._)("p",It,(0,$.zw)(e.text),1)]),(0,a._)("div",xt,[(0,a.Wm)(d,{style:{width:"100%"},gutter:"5"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.urls,((t,s)=>((0,a.wg)(),(0,a.j4)(c,{span:"8",key:t,style:{position:"relative"},onClick:(0,i.iM)((t=>n.imageView(e.urls,s)),["stop"])},{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("p",{class:"imgCount p6"},(0,$.zw)(e.urls.length>10?"10+":e.urls.length)+"张",513),[[i.F8,2===s&&e.urls.length>3]]),s<3?((0,a.wg)(),(0,a.j4)(r,{key:0,width:"100%",height:"1.8rem",fit:"cover",src:t,"lazy-load":"",radius:"0.08rem"},null,8,["src"])):(0,a.kq)("",!0)])),_:2},1032,["onClick"])))),128))])),_:2},1024)]),(0,a._)("div",_t,[(0,a._)("span",Lt,(0,$.zw)(n.before(e.createdAt))+"- -"+(0,$.zw)(e.channelName),1),(0,a._)("div",At,[(0,a.Wm)(m,{name:"comment"},{default:(0,a.w5)((()=>[(0,a.Uk)(" "+(0,$.zw)(e.commentCount),1)])),_:2},1024),Wt,(0,a.Wm)(m,{name:"good-job"},{default:(0,a.w5)((()=>[(0,a.Uk)(" "+(0,$.zw)(e.likeCount),1)])),_:2},1024)])])],8,yt)]))])))),128))])}var Ut={name:"postList",inject:["before","goPersonal","goArticle","avatarGet"],props:{ArticleList:{type:Array},isCollect:{type:Boolean,default:!1}},data(){return{checkedId:[]}},methods:{imageView(e,t){(0,We.e)({images:e,startPosition:t,closeable:!0})}},mounted(){}};const zt=(0,k.Z)(Ut,[["render",$t],["__scopeId","data-v-32d5f6e5"]]);var Ft=zt;const Vt={class:"channelEdit"},jt=["onClick"],Bt=["onClick"];function Rt(e,t,s,o,l,n){const r=(0,a.up)("van-cell"),c=(0,a.up)("van-icon"),d=(0,a.up)("van-grid-item"),m=(0,a.up)("van-grid");return(0,a.wg)(),(0,a.iD)("div",Vt,[(0,a.Wm)(r,{title:"我的频道"}),(0,a.Wm)(m,{gutter:10,class:"p4",clickable:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.myChannels,(e=>((0,a.wg)(),(0,a.j4)(d,{key:e.channelId,class:"grid"},{default:(0,a.w5)((()=>[(0,a._)("div",{onClick:t=>n.clearOrGo(e.channelId),class:"box"},[(0,a.wy)((0,a.Wm)(c,{name:"clear",class:"clear",size:"0.5rem",color:"red"},null,512),[[i.F8,s.isEdit]]),(0,a._)("p",null,(0,$.zw)(e.channelName),1)],8,jt)])),_:2},1024)))),128))])),_:1}),(0,a.Wm)(r,{title:"推荐频道"}),(0,a.Wm)(m,{gutter:10,class:"p4",clickable:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.recChannels,(e=>((0,a.wg)(),(0,a.j4)(d,{key:e.channelId,class:"grid"},{default:(0,a.w5)((()=>[(0,a._)("div",{onClick:t=>n.addOrGo(e.channelId),class:"box"},[(0,a.wy)((0,a.Wm)(c,{name:"add",class:"add",size:"0.5rem",color:"blue"},null,512),[[i.F8,s.isEdit]]),(0,a._)("p",null,(0,$.zw)(e.channelName),1)],8,Bt)])),_:2},1024)))),128))])),_:1})])}var qt={name:"ChannelEdit",props:{my:{type:Array},isEdit:{type:Boolean,default:!1},isSelect:{type:Boolean,default:!1}},data(){return{myChannels:this.my,allChannels:[],select:this.isSelect,selectedCom:[]}},methods:{clear(e){let t=[];t=this.myChannels.filter((t=>t.channelId!==e)),this.myChannels=t},go(e){!0===this.select&&(this.selectedCom=this.allChannels.filter((t=>t.channelId===e)),this.$emit("hidPop"))},add(e){this.allChannels.forEach((t=>{t.channelId===e&&this.myChannels.push(t)}))},clearOrGo(e){!0===this.isEdit?this.clear(e):this.go(e)},addOrGo(e){!0===this.isEdit?this.add(e):this.go(e)}},mounted(){this.$axios.get("chaAllGet").then((e=>{this.allChannels=e}))},computed:{recChannels(){let e=this.allChannels.map((e=>e.channelId)),t=this.myChannels.map((e=>e.channelId)),s=e.filter((e=>!t.find((t=>t===e)))),i=[];return this.allChannels.forEach((e=>{-1!==s.indexOf(e.channelId)&&i.push(e)})),i}}};const Ht=(0,k.Z)(qt,[["render",Rt],["__scopeId","data-v-11553261"]]);var Nt=Ht;const Gt={ref:"channelListBulk"};function Tt(e,t,s,i,o,l){const n=(0,a.up)("SubmitList"),r=(0,a.up)("van-list"),c=(0,a.up)("van-pull-refresh");return(0,a.wg)(),(0,a.iD)("div",Gt,[(0,a.Wm)(c,{modelValue:o.refreshing,"onUpdate:modelValue":t[1]||(t[1]=e=>o.refreshing=e),"head-height":80,style:{"min-height":"calc(100vh - 96px)"},onRefresh:l.onRefresh,disabled:-1===s.currentChannel},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{loading:o.loading,"onUpdate:loading":t[0]||(t[0]=e=>o.loading=e),finished:o.finished,"finished-text":"没有更多了",onLoad:l.onLoad},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{ArticleList:o.list},null,8,["ArticleList"])])),_:1},8,["loading","finished","onLoad"])])),_:1},8,["modelValue","onRefresh","disabled"])],512)}const Mt={class:"submitList"},Et={class:"van-multi-ellipsis--l2"},Pt={class:"van-multi-ellipsis--l2 lineClamp2",style:{}},Yt={style:{float:"right","padding-right":"0.4rem"}};function Ot(e,t,s,i,o,l){const n=(0,a.up)("van-image"),r=(0,a.up)("van-icon"),c=(0,a.up)("van-cell");return(0,a.wg)(),(0,a.iD)("div",Mt,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.ArticleList,(e=>((0,a.wg)(),(0,a.j4)(c,{key:e.articleId,"title-style":"flex:2",to:"/articleHome/"+e.articleId,style:{height:"2.5rem"}},{title:(0,a.w5)((()=>[(0,a._)("div",Et,[(0,a._)("p",Pt,(0,$.zw)(e.title),1)])])),value:(0,a.w5)((()=>[(0,a.Wm)(n,{width:"100%",height:"100%",fit:"cover",src:e.cover,radius:"0.08rem"},null,8,["src"])])),label:(0,a.w5)((()=>[(0,a.Uk)((0,$.zw)(l.before(e.createdAt))+(0,$.zw)(e.isAll?"-["+e.channelName+"]":" by--"+e.authorName)+" ",1),(0,a._)("div",Yt,[(0,a.Wm)(r,{name:"comment-o"}),(0,a.Uk)(" "+(0,$.zw)(e.commentCount),1)])])),_:2},1032,["to"])))),128))])}var Qt={name:"submitList",props:{ArticleList:{type:Array}},data(){return{}},methods:{before(e){const t=h(e),s=h().valueOf(),i=t.diff(s,"day",!0);return i<=-7?h(e).format("YYYY/MM/DD"):h(e).fromNow()}},mounted(){}};const Kt=(0,k.Z)(Qt,[["render",Ot],["__scopeId","data-v-2486d4fb"]]);var Zt=Kt,Jt={name:"ChannelList",inject:["minHeight"],props:{channelId:{type:Number},currentChannel:{type:Number},params:{type:Object}},components:{SubmitList:Zt},data(){return{loading:!1,finished:!1,size:this.$store.state.size,skip:0,list:[],refreshing:!1,top:0}},methods:{onRefresh(){if(!0===this.loading)return n.F.fail({overlay:!0,message:"不要在加载时刷新!"}),void(this.refreshing=!1);this.loading=!0,this.finished=!1,this.skip=0,this.onLoad()},onLoad(){if(this.channelId===this.currentChannel){const e={...this.params,skip:this.skip,size:this.size};this.$axios.get("articlesList",{params:e}).then((e=>{setTimeout((()=>{this.refreshing?(this.list=[...e],(0,n.F)("刷新成功"),this.refreshing=!1):this.list=[...this.list,...e],-1===this.currentChannel&&this.$emit("refreshed",!1),this.loading=!1,e.length<this.size?this.finished=!0:this.skip=this.skip+this.size}),100)}))}},getHeight(){return{"min-height":`calc(100vh - 50px - ${this.top+"px"})`}}},mounted(){this.$nextTick((()=>{this.top=(0,p.EL)(this.$refs.channelListBulk).top}))},activated(){},deactivated(){}};const Xt=(0,k.Z)(Jt,[["render",Tt]]);var es=Xt;const ts=e=>((0,a.dD)("data-v-51d60d1e"),e=e(),(0,a.Cn)(),e),ss={class:"tabBar"},is=(0,a.Uk)("首页"),as=(0,a.Uk)("社区"),os=(0,a.Uk)("管理"),ls=ts((()=>(0,a._)("span",null,"消息",-1))),ns=(0,a.Uk)("我的");function rs(e,t,s,i,o,l){const n=(0,a.up)("van-button"),r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-tabbar-item"),d=(0,a.up)("van-icon"),m=(0,a.up)("van-tabbar"),u=(0,a.up)("van-grid-item"),h=(0,a.up)("van-grid"),p=(0,a.up)("van-action-sheet");return(0,a.wg)(),(0,a.iD)("div",ss,[(0,a.Wm)(r,{fixed:""},{right:(0,a.w5)((()=>[(0,a.Wm)(n,{icon:"search",to:"/search",color:"transparent"})])),_:1}),(0,a.Wm)(m,{modelValue:o.active,"onUpdate:modelValue":t[0]||(t[0]=e=>o.active=e),route:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{icon:"wap-home",to:"/"},{default:(0,a.w5)((()=>[is])),_:1}),(0,a.Wm)(c,{icon:"friends",to:"/community"},{default:(0,a.w5)((()=>[as])),_:1}),o.isAdmin?((0,a.wg)(),(0,a.j4)(c,{key:1,icon:"add",to:"/admin"},{default:(0,a.w5)((()=>[os])),_:1})):((0,a.wg)(),(0,a.j4)(c,{key:0,icon:"add",onClick:l.showPopup,class:"add"},null,8,["onClick"])),(0,a.Wm)(c,{icon:"chat",to:"/messageNotice"},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"chat",dot:o.newNotice},null,8,["dot"])])),default:(0,a.w5)((()=>[ls])),_:1}),(0,a.Wm)(c,{icon:"manager",to:"/my"},{default:(0,a.w5)((()=>[ns])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(p,{show:o.show,"onUpdate:show":t[3]||(t[3]=e=>o.show=e),"cancel-text":"取消",title:"发布","close-on-click-action":""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{clickable:"","column-num":3,border:!1},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{icon:"notes-o",text:"文章投稿",to:"/submit",onClick:t[1]||(t[1]=e=>o.show=!1)}),(0,a.Wm)(u,{icon:"tv-o",text:"视频投稿",onClick:l.developing},null,8,["onClick"]),(0,a.Wm)(u,{icon:"description",text:"帖子/动态",to:"/post",onClick:t[2]||(t[2]=e=>o.show=!1)})])),_:1})])),_:1},8,["show"])])}var cs={name:"TabBar",inject:["developing","toLogin"],data(){return{active:-1,show:!1,isAdmin:!1,newNotice:!1}},methods:{showPopup(){this.$store.state.user?this.show=!0:this.toLogin()},hidden(){this.show=!1},init(){this.$store.state.user&&(this.$axios.get("userDoneUpdate",{params:{userId:this.$store.state.user.userId}}),this.$axios.get("getMessageNotice",{params:{userId:this.$store.state.user.userId}}).then((e=>{!0===e.newNotice&&(this.newNotice=e.newNotice)})),1e3===this.$store.state.user.userId&&(this.isAdmin=!0))}},mounted(){},activated(){this.init()},deactivated(){this.newNotice=!1}};const ds=(0,k.Z)(cs,[["render",rs],["__scopeId","data-v-51d60d1e"]]);var ms=ds,us={name:"HomeView",inject:["minHeight","avatarGet","reload"],components:{ChannelEdit:Nt,PostList:Ft,ChannelList:es,TabBar:ms},data(){return{active2:0,active:1,active1:0,logined:!1,show:!1,myChannels:[],isEditing:!1,swipe:[],articleList:[],followList:[],follows:[],targetId:-2,list:[],loading:!0,dynamicMaker:[],originalChannel:[],dynamicLoading:!1,dynamicSkip:0,dynamicFinished:!1,dynamicParams:{},size:this.$store.state.size,currentChannel:-2,channelParams:{},refreshing:!1,dynamicScrollTop:0,scrollLocation:{},refreshingAll:!1,allChannelKey:0}},methods:{showPop(){this.originalChannel=[...this.myChannels],this.show=!0},onRefreshAll(){this.allChannelKey=this.reload()},refreshed(e){this.refreshingAll&&((0,n.F)("刷新成功!"),this.refreshingAll=e)},async onRefresh(){if(this.loading)return n.F.fail({overlay:!0,message:"不要在加载时刷新!"}),void(this.refreshing=!1);await this.newDynamicCheck(),await this.peopleChange(this.targetId),this.refreshing=!1},onClickLeft(){this.myChannels=[...this.originalChannel],this.show=!1,this.isEditing=!1},async onClickRight(){if(!0===this.logined)if(!1===this.isEditing)this.isEditing=!0;else{if(this.$refs.headerChild.myChannels.length<4)return void n.F.fail("至少保留四个！");this.isEditing=!1,this.myChannels=this.$refs.headerChild.myChannels;let e=[];e=this.$refs.headerChild.myChannels.map((e=>e.channelId));const t={userId:this.$store.state.user.userId,channels:e};await this.$axios.get("channelUpdate",{params:t}),this.show=!1,this.isEditing=!1}else r.V.confirm({title:"未登录",message:"你必须要登录才能使用此功能，是否前去登录?"}).then((()=>{this.$router.replace("/login")})).catch((()=>{}))},async hadLogin(){this.logined=!0;const e={userId:this.$store.state.user.userId};await this.$axios.get("chaListShow",{params:e}).then((e=>{this.myChannels=e[0],this.channelChange(-1)})),await this.$axios.get("subscribeListGet",{params:e}).then((e=>{this.followList=e[0]})),await this.$axios.get("dynamicMakerIdGet",{params:{userId:this.$store.state.user.userId}}).then((e=>{this.dynamicMaker=e}));const t={followList:this.dynamicMaker};await this.$axios.get("subscribeDetailGet",{params:t}).then((e=>{this.follows=e[0]})),await this.peopleChange(-1)},notLogin(){this.logined=!1,this.$axios.get("chaAllGet").then((e=>{this.myChannels=e,this.channelChange(-1)}))},async peopleChange(e){if(this.dynamicSkip=0,this.list=[],this.loading=!0,this.targetId=e,!this.followList.length)return this.list=[],void setTimeout((()=>{this.loading=!1}),100);-1==e?this.dynamicParams={followList:this.followList,URL:this.$store.state.URL}:(this.dynamicMaker.splice(this.dynamicMaker.indexOf(e),1),await this.$axios.get("dynamicRead",{params:{userId:this.$store.state.user.userId,dynamic:this.dynamicMaker}}),this.dynamicParams={URL:this.$store.state.URL,userId:e}),this.onLoad()},hasNewDynamic(e){return-1===this.dynamicMaker.indexOf(e)?"transparent":"red"},async onLoad(){const e={...this.dynamicParams,skip:this.dynamicSkip,size:this.size};await this.$axios.get("dynamicsGet",{params:e}).then((e=>{setTimeout((()=>{this.list=[...this.list,...e],0===this.dynamicSkip&&(this.loading=!1),this.dynamicLoading=!1,e.length<this.size?this.dynamicFinished=!0:this.dynamicSkip=this.dynamicSkip+this.size}),100)}))},async newDynamicCheck(){await this.$axios.get("dynamicMakerIdGet",{params:{userId:this.$store.state.user.userId}}).then((e=>{this.dynamicMaker=e}));const e={followList:this.dynamicMaker};await this.$axios.get("subscribeDetailGet",{params:e}).then((e=>{this.follows=e[0]}))},onChange(e){e?this.$nextTick((()=>{document.querySelector(".allChannel").scrollTop=this.scrollLocation[this.active1]})):this.$nextTick((()=>{document.querySelector(".dynamicBulk").addEventListener("scroll",this.scrollHandler,!1),document.querySelector(".dynamicBulk").scrollTop=this.dynamicScrollTop}))},channelChange(e){this.$nextTick((()=>{document.querySelector(".allChannel").scrollTop=this.scrollLocation[e]})),this.currentChannel=e,this.logined?this.channelParams={channelId:e,URL:this.$store.state.URL,userId:this.$store.state.user.userId}:this.channelParams={channelId:e,URL:this.$store.state.URL}},scrollHandler(){switch(this.active){case 0:this.dynamicScrollTop=this.$refs.dynamicBulk.scrollTop;break;case 1:this.scrollLocation[this.active1]=document.querySelector(".allChannel").scrollTop;break}},async announceGet(){let e,t;await this.$axios.get("announceGet").then((s=>{e=s.message,t=s.type})),(!this.$store.state.lastDate||Date.now()-this.$store.state.lastDate>=864e5)&&0!==e.length&&r.V.alert({title:t,message:e}).then((()=>{this.$store.commit("setLastDate",Date.now())}))}},mounted(){this.announceGet(),this.$store.state.user?this.hadLogin():this.notLogin();const e={url:this.$store.state.URL};this.$axios.get("swipeGet",{params:e}).then((e=>{this.swipe=e})),this.$nextTick((()=>{document.querySelector(".allChannel").addEventListener("scroll",this.scrollHandler)}))},activated(){!0===this.$route.meta.needRefresh?n.F.loading({message:"数据加载中...",overlay:!0,duration:2e3,onClose:()=>{window.ddd()}}):(this.$store.state.user&&this.newDynamicCheck(),this.$nextTick((()=>{this.active?document.querySelector(".allChannel").scrollTop=this.scrollLocation[this.active1]:this.active||(document.querySelector(".dynamicBulk").scrollTop=this.dynamicScrollTop)})))},beforeRouteEnter(e,t,s){-1!==t.path.indexOf("/login")||-1!==t.path.indexOf("channelSelect")?e.meta.needRefresh=!0:e.meta.needRefresh=!1,s()},beforeRouteLeave(e,t,s){s()},deactivated(){}};const hs=(0,k.Z)(us,[["render",dt],["__scopeId","data-v-32b3543d"]]);var ps=hs;const gs=e=>((0,a.dD)("data-v-76bf9625"),e=e(),(0,a.Cn)(),e),fs={class:"community pbt wrapper",ref:""},ws={class:"box"},vs={class:"p6"},ks={class:"box"},ys={class:"foreground",style:{background:"black"}},bs=gs((()=>(0,a._)("span",{class:"p6"}," 全部社区 ",-1))),Cs={class:"box"},Is=["onClick"],xs={class:"minus"},_s={class:"p6"},Ls=["onClick"],As=["onClick"],Ws=["value"],Ss={class:"p5"};function Ds(e,t,s,o,l,n){const r=(0,a.up)("van-icon"),c=(0,a.up)("van-tab"),d=(0,a.up)("van-tabs"),m=(0,a.up)("CommunityList"),u=(0,a.up)("van-cell"),h=(0,a.up)("van-empty"),p=(0,a.up)("van-col"),g=(0,a.up)("van-row"),f=(0,a.up)("TabBar");return(0,a.wg)(),(0,a.iD)("div",fs,[(0,a.Wm)(d,{active:l.active,"onUpdate:active":t[6]||(t[6]=e=>l.active=e),shrink:"",class:"out bulk allCommunity",onChange:n.onChange},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{title:"推荐"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{active:l.active3,"onUpdate:active":t[1]||(t[1]=e=>l.active3=e),class:"myCommunitys","line-height":"0",shrink:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.myCommuitys,(e=>((0,a.wg)(),(0,a.j4)(c,{key:e.communityId},{title:(0,a.w5)((()=>[(0,a._)("div",ws,[(0,a._)("div",{class:"foreground",style:(0,$.j5)({background:e.foreground})},[(0,a.Wm)(r,{"class-prefix":e.icon,class:"iconfont",color:e.color,size:"0.8rem",onClick:(0,i.iM)((t=>n.goCommunityItem(e.communityId)),["stop"])},null,8,["class-prefix","color","onClick"])],4),(0,a._)("span",vs,(0,$.zw)(e.communityName),1)])])),_:2},1024)))),128)),(0,a.Wm)(c,null,{title:(0,a.w5)((()=>[(0,a._)("div",ks,[(0,a._)("div",ys,[(0,a.Wm)(r,{name:"more",color:"white",size:"0.8rem",onClick:t[0]||(t[0]=(0,i.iM)((e=>l.active=1),["stop"]))})]),bs])])),_:1})])),_:1},8,["active"]),void 0!==l.communityParams.isSubmit?((0,a.wg)(),(0,a.j4)(m,{params:l.communityParams,key:l.key},null,8,["params"])):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(c,{title:"社区"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{title:"我的社区"},{extra:(0,a.w5)((()=>[(0,a._)("span",{onClick:t[2]||(t[2]=(...e)=>n.edit&&n.edit(...e))},(0,$.zw)(!1===l.isEditing?"编辑":"完成"),1)])),_:1}),0===n.myCommuitys.length?((0,a.wg)(),(0,a.j4)(h,{key:0,image:"https://fastly.jsdelivr.net/npm/@vant/assets/custom-empty-image.png","image-size":"80",description:"点击“编辑”添加社区吧"})):((0,a.wg)(),(0,a.j4)(d,{key:1,active:l.active2,"onUpdate:active":t[3]||(t[3]=e=>l.active2=e),class:"myCommunitys","line-height":"0",shrink:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.myCommuitys,(e=>((0,a.wg)(),(0,a.j4)(c,{key:e.communityId},{title:(0,a.w5)((()=>[(0,a._)("div",Cs,[(0,a._)("div",{class:"foreground",style:(0,$.j5)({background:e.foreground}),onClick:(0,i.iM)((t=>n.clear(e.communityId)),["stop"])},[(0,a._)("div",xs,[(0,a.wy)((0,a.Wm)(r,{name:"minus",size:"0.4rem"},null,512),[[i.F8,l.isEditing]])]),(0,a.Wm)(r,{"class-prefix":e.icon,class:"iconfont",color:e.color,size:"0.8rem"},null,8,["class-prefix","color"])],12,Is),(0,a._)("span",_s,(0,$.zw)(e.communityName),1)])])),_:2},1024)))),128))])),_:1},8,["active"])),(0,a.Wm)(d,{active:l.active1,"onUpdate:active":t[5]||(t[5]=e=>l.active1=e),swipeable:"",class:"in"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.communityClass,((e,s)=>((0,a.wg)(),(0,a.j4)(c,{key:e},{title:(0,a.w5)((()=>[(0,a.Uk)((0,$.zw)(l.titles[s]),1)])),default:(0,a.w5)((()=>[(0,a.Wm)(g,{justify:"left",class:"row",gutter:"5"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e,(e=>((0,a.wg)(),(0,a.j4)(p,{span:"6",key:e,class:"iconBox"},{default:(0,a.w5)((()=>[(0,a._)("div",{class:"background",style:(0,$.j5)({background:e.background}),onClick:t=>n.goCommunityItem(e.communityId)},[(0,a.wy)((0,a.Wm)(r,{name:"star",size:".4rem",color:"white",class:"star"},null,512),[[i.F8,!l.isEditing&&e.selected]]),(0,a.wy)((0,a._)("div",{class:"inputBox",onClick:(0,i.iM)((t=>n.clearAndAdd(e.communityId)),["prevent"])},[(0,a.wy)((0,a._)("input",{type:"checkbox",value:e.communityId,"onUpdate:modelValue":t[4]||(t[4]=e=>l.checkedNames=e)},null,8,Ws),[[i.e8,l.checkedNames]])],8,As),[[i.F8,l.isEditing]]),(0,a._)("div",{class:"foreground",style:(0,$.j5)({background:e.foreground})},[(0,a.Wm)(r,{"class-prefix":e.icon,class:"iconfont",color:e.color,size:"0.8rem"},null,8,["class-prefix","color"])],4),(0,a._)("span",Ss,[(0,a.wy)((0,a.Wm)(r,{name:"fire"},null,512),[[i.F8,e.isHot]]),(0,a.Uk)((0,$.zw)(e.communityName),1)])],12,Ls)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["active"])])),_:1})])),_:1},8,["active","onChange"]),(0,a.Wm)(f)],512)}const $s={class:"communityList",ref:"communityListBulk"};function Us(e,t,s,i,o,l){const n=(0,a.up)("PostList"),r=(0,a.up)("van-list"),c=(0,a.up)("van-pull-refresh");return(0,a.wg)(),(0,a.iD)("div",$s,[(0,a.Wm)(c,{modelValue:o.refreshing,"onUpdate:modelValue":t[1]||(t[1]=e=>o.refreshing=e),"head-height":80,style:(0,$.j5)(l.minHeight(e.$refs.communityListBulk,!0)),onRefresh:l.onRefresh},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{loading:o.loading,"onUpdate:loading":t[0]||(t[0]=e=>o.loading=e),finished:o.finished,"finished-text":"没有更多了",onLoad:l.onLoad},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{ArticleList:o.list},null,8,["ArticleList"])])),_:1},8,["loading","finished","onLoad"])])),_:1},8,["modelValue","style","onRefresh"])],512)}var zs={name:"CommunityList",inject:["minHeight"],props:{params:{type:Object}},components:{PostList:Ft},data(){return{loading:!1,finished:!1,size:this.$store.state.size,skip:0,list:[],refreshing:!1,loaderArr:[]}},methods:{onRefresh(){if(!0===this.loading)return n.F.allowMultiple(),n.F.fail({overlay:!0,message:"不要在加载时刷新!"}),void(this.refreshing=!1);this.loadedArr=this.list.map((e=>e.articleId)),this.loading=!0,this.finished=!1,this.onLoad()},onLoad(){let e;e=this.refreshing?{...this.params,skip:this.skip,size:this.size,URL:this.$store.state.URL,loadedArr:this.loadedArr}:{...this.params,skip:this.skip,size:this.size,URL:this.$store.state.URL},this.$axios.get("articlesList",{params:e}).then((e=>{setTimeout((()=>{this.refreshing?(this.list=[...e,...this.list],this.loading=!1,this.refreshing=!1,(0,n.F)({position:"bottom",message:e.length?"新增了"+e.length+"条内容":"已经空了"})):(this.list=[...this.list,...e],this.loading=!1),e.length<this.size?this.finished=!0:this.skip=this.skip+this.size}),500)}))}},mounted(){}};const Fs=(0,k.Z)(zs,[["render",Us]]);var Vs=Fs,js={name:"communityView",inject:["reload"],components:{CommunityList:Vs,TabBar:ms},data(){return{active:0,active1:0,active2:0,active3:0,allCommunitys:[],titles:this.$store.state.communityClass,checkedNames:[],isEditing:!1,logined:!1,articleList:[],communityParams:{},key:0,scrollLocation:0}},methods:{goCommunityItem(e){!1===this.isEditing&&this.$router.push("/communityItem/"+e)},edit(){if(!1===this.logined)r.V.confirm({title:"未登录",message:"你必须要登录才能使用此功能，是否前去登录?"}).then((()=>{this.$router.replace("/login")})).catch((()=>{}));else if(!1===this.isEditing)this.isEditing=!0;else{this.isEditing=!1,console.log(this.checkedNames);const e={userId:this.$store.state.user.userId,community:this.checkedNames};this.$axios.get("communityUpdate",{params:e}).then((e=>{console.log(e),this.key=this.reload(),(0,n.F)("社区偏好已更新!")}))}},clear(e){this.isEditing?this.checkedNames=this.checkedNames.filter((t=>t!==e)):this.goCommunityItem(e)},clearAndAdd(e){this.checkedNames.indexOf(e)>-1?this.checkedNames=this.checkedNames.filter((t=>t!==e)):this.checkedNames.push(e)},articleListGet(){this.logined?this.communityParams={isSubmit:!1,userId:this.$store.state.user.userId}:this.communityParams={isSubmit:!1}},async dataGet(){if(this.$store.state.user){this.logined=!0;const e={userId:this.$store.state.user.userId};await this.$axios.get("comListShow",{params:e}).then((e=>{this.checkedNames=e.map((e=>e.communityId))}))}else this.checkedNames=[1,2,3,5];await this.$axios.get("comGet").then((e=>{this.allCommunitys=e})),this.articleListGet()},scrollHandler(){this.active||(this.scrollLocation=document.querySelector(".allCommunity").scrollTop)},onChange(e){this.$nextTick((()=>{e||(document.querySelector(".allCommunity").scrollTop=this.scrollLocation)}))}},mounted(){this.$nextTick((()=>{document.querySelector(".allCommunity").addEventListener("scroll",this.scrollHandler)})),this.dataGet()},computed:{myCommuitys(){let e=[];return e=this.allCommunitys.filter((e=>-1!==this.checkedNames.indexOf(e.communityId))),e},communityClass(){let e=[[],[],[],[],[]];return this.allCommunitys.forEach((t=>{this.titles.forEach(((s,i)=>{-1!==t.communityClass.indexOf(s)&&(-1!==this.checkedNames.indexOf(t.communityId)?t.selected=!0:t.selected=!1,e[i].push(t))}))})),e}},activated(){this.$nextTick((()=>{this.active||(document.querySelector(".allCommunity").scrollTop=this.scrollLocation)}))}};const Bs=(0,k.Z)(js,[["render",Ds],["__scopeId","data-v-76bf9625"]]);var Rs=Bs;const qs={class:"communityItem pt wrapper"},Hs={class:"bulk communityItemBulk"};function Ns(e,t,s,i,o,l){const n=(0,a.up)("van-nav-bar"),r=(0,a.up)("CommunityList");return(0,a.wg)(),(0,a.iD)("div",qs,[(0,a._)("div",Hs,[(0,a.Wm)(n,{title:"社区-"+o.communityItem.communityName,"left-arrow":"",onClickLeft:l.onClickLeft,fixed:""},null,8,["title","onClickLeft"]),void 0!==o.communityParams.isSubmit?((0,a.wg)(),(0,a.j4)(r,{params:o.communityParams,key:o.key},null,8,["params"])):(0,a.kq)("",!0)])])}var Gs={name:"communityView",inject:["getId","reload"],components:{CommunityList:Vs},data(){return{communityItem:{},communityParams:{},scrollTop:0,key:0}},methods:{onClickLeft(){this.$router.back()},async dataGet(){const e=this.getId(this.$route.path);await this.$axios.get("comGet",{params:{communityId:e}}).then((e=>{this.communityItem=e,console.log(this.communityItem)})),this.communityParams={isSubmit:!1,communityId:e}}},mounted(){this.dataGet()},activated(){!0!==this.$route.meta.isBack?(Object.assign(this.$data,this.$options.data()),this.dataGet(),this.key=this.reload()):document.querySelector(".communityItemBulk").scrollTop=this.scrollTop},beforeRouteEnter(e,t,s){-1!==t.path.indexOf("/article")&&(e.meta.isBack=!0),s()},beforeRouteLeave(){this.scrollTop=document.querySelector(".communityItemBulk").scrollTop}};const Ts=(0,k.Z)(Gs,[["render",Ns]]);var Ms=Ts;const Es={class:"messageNotice wrapper pt"},Ps={key:0},Ys={class:"notLogin"},Os=(0,a.Uk)("去登录"),Qs={key:1},Ks={class:"DM"},Zs=["onClick"],Js={class:"nameDateReport"},Xs={class:"nameDate"},ei={class:"nickname p4b"},ti={class:"time p5 van-ellipsis"},si={class:"report"},ii={class:"time p5"};function ai(e,t,s,o,l,n){const r=(0,a.up)("van-empty"),c=(0,a.up)("van-button"),d=(0,a.up)("van-icon"),m=(0,a.up)("van-grid-item"),u=(0,a.up)("van-grid"),h=(0,a.up)("van-image"),p=(0,a.up)("van-pull-refresh"),g=(0,a.up)("van-tab"),f=(0,a.up)("van-tabs"),w=(0,a.up)("TabBar");return(0,a.wg)(),(0,a.iD)("div",Es,[(0,a.Wm)(f,{active:l.active,"onUpdate:active":t[1]||(t[1]=e=>l.active=e),shrink:"",class:"out"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{title:"消息"},{default:(0,a.w5)((()=>[this.$store.state.user?((0,a.wg)(),(0,a.iD)("div",Qs,[(0,a.Wm)(p,{modelValue:l.refreshing,"onUpdate:modelValue":t[0]||(t[0]=e=>l.refreshing=e),"head-height":80,style:{"min-height":"calc(100vh - 96px)"},onRefresh:n.onRefresh},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{"column-num":3,clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{text:"回复我的",to:"/replyToMe/"+this.$store.state.user.userId},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"comment",dot:l.notice.newComment},null,8,["dot"])])),_:1},8,["to"]),(0,a.Wm)(m,{icon:"friends",text:"关注",to:"/newSubscribe/"+this.$store.state.user.userId},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"friends",dot:l.notice.newSubscribe},null,8,["dot"])])),_:1},8,["to"]),(0,a.Wm)(m,{icon:"smile-comment",text:"我的问题",to:"/answerList/"+this.$store.state.user.userId},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"smile-comment",dot:l.notice.newAnswer},null,8,["dot"])])),_:1},8,["to"])])),_:1}),(0,a._)("div",Ks,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.chatList,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"top",key:e.oppositeId,onClick:t=>n.goDM(e.oppositeId)},[(0,a.Wm)(h,{class:"avatar",width:"1rem",height:"1rem",fit:"cover",round:"",src:n.avatarGet(e.avatar)},null,8,["src"]),(0,a._)("div",Js,[(0,a._)("div",Xs,[(0,a._)("div",ei,(0,$.zw)(e.nickname),1),(0,a._)("div",ti,(0,$.zw)(e.message),1)]),(0,a._)("div",si,[(0,a._)("div",ii,(0,$.zw)(n.untilMin(+e.date)),1),(0,a.wy)((0,a._)("div",{class:"badge p5"},(0,$.zw)(e.unread),513),[[i.F8,e.unread]])])])],8,Zs)))),128))])])),_:1},8,["modelValue","onRefresh"])])):((0,a.wg)(),(0,a.iD)("div",Ps,[(0,a.Wm)(r,{image:"error",description:"未登录，无法查看消息"}),(0,a._)("div",Ys,[(0,a.Wm)(c,{color:"#000",to:"/login"},{default:(0,a.w5)((()=>[Os])),_:1})])]))])),_:1})])),_:1},8,["active"]),(0,a.Wm)(w)])}var oi={name:"MessageNotice",inject:["before","untilMin","avatarGet"],components:{TabBar:ms},data(){return{active:0,notice:{},refreshing:!1,chatList:[]}},methods:{onRefresh(){setTimeout((()=>{this.refreshing=!1,(0,n.F)("刷新成功")}),500)},goDM(e){this.$router.push("/directMessage/"+e)},dataGet(){this.$store.state.user&&(this.$axios.get("getMessageNotice",{params:{userId:this.$store.state.user.userId,toNew:!0}}).then((e=>{this.notice=e})),this.$axios.get("getDMList",{params:{userId:this.$store.state.user.userId}}).then((e=>{this.chatList=e})))}},mounted(){this.dataGet()},activated(){this.dataGet()}};const li=(0,k.Z)(oi,[["render",ai],["__scopeId","data-v-f8f9dd84"]]);var ni=li;const ri=e=>((0,a.dD)("data-v-b98890d8"),e=e(),(0,a.Cn)(),e),ci={class:"answerList wrapper pt"},di={class:"commentList bulk"},mi={class:"author",style:{"padding-left":"5px"}},ui={class:"info"},hi=ri((()=>(0,a._)("span",{class:"p5"},"一只猫",-1))),pi={class:"p7g"},gi={style:{padding:"5px"}},fi={class:"p6 van-multi-ellipsis--l2"},wi={key:0,style:{padding:"5px"}},vi={class:"p5 repliedMessage van-multi-ellipsis--l3"},ki=(0,a.Uk)("问题详情:"),yi={class:"p5g"},bi={class:"article",style:{padding:"5px"}},Ci={class:"articleInfo van-ellipsis"},Ii={class:"p6g"},xi={class:"p6 van-ellipsis"};function _i(e,t,s,o,l,n){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-empty"),d=(0,a.up)("van-image"),m=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",ci,[(0,a.Wm)(r,{title:"我的问题","left-arrow":"",onClickLeft:n.onClickLeft,fixed:""},null,8,["onClickLeft"]),(0,a._)("div",di,[(0,a.wy)((0,a.Wm)(c,{description:"暂无回答"},null,512),[[i.F8,!l.list.length]]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.list,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"commentItem",key:e.id},[(0,a.Wm)(m,{to:"/questionDetail/"+e.id},{default:(0,a.w5)((()=>[(0,a._)("div",mi,[(0,a.Wm)(d,{round:"",width:"0.8rem",height:"0.8rem",fit:"cover",src:this.$store.state.URL+"/images/avatar/cat.jpeg"},null,8,["src"]),(0,a._)("div",ui,[hi,(0,a._)("span",pi,(0,$.zw)(n.before(e.date-0))+" 回答了你的问题",1)])]),(0,a._)("div",gi,[(0,a._)("p",fi,(0,$.zw)(e.answer),1)]),(0,a._)("div",{class:"bottom",style:(0,$.j5)({padding:e.listenerName?"5px":"0"})},[e.desc?((0,a.wg)(),(0,a.iD)("div",wi,[(0,a._)("p",vi,[ki,(0,a._)("span",yi,(0,$.zw)(e.desc),1)])])):(0,a.kq)("",!0),(0,a._)("div",bi,[(0,a._)("div",null,[(0,a.Wm)(d,{width:"1rem",height:"1rem",fit:"cover",round:"",src:n.avatarGet(this.$store.state.user.avatar),style:{background:"rgb(234, 234, 234)"}},null,8,["src"])]),(0,a._)("div",Ci,[(0,a._)("span",Ii,(0,$.zw)(this.$store.state.user.nickname),1),(0,a._)("span",xi,(0,$.zw)(e.question),1)])])],4)])),_:2},1032,["to"])])))),128))])])}var Li={name:"AnswerList",inject:["getId","before","avatarGet"],data(){return{list:[]}},methods:{onClickLeft(){this.$router.back()}},mounted(){const e=this.getId(this.$route.path),t={userId:e,type:"answer"};this.$axios.get("getMessageNotice",{params:t}).then((e=>{console.log(e),this.list=e}))}};const Ai=(0,k.Z)(Li,[["render",_i],["__scopeId","data-v-b98890d8"]]);var Wi=Ai;const Si={class:"replyList wrapper pt"},Di={class:"bulk"};function $i(e,t,s,o,l,n){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-empty"),d=(0,a.up)("CommentList");return(0,a.wg)(),(0,a.iD)("div",Si,[(0,a.Wm)(r,{title:"评论及回复","left-arrow":"",onClickLeft:n.onClickLeft,fixed:""},null,8,["onClickLeft"]),(0,a._)("div",Di,[(0,a.wy)((0,a.Wm)(c,{description:"暂无回复"},null,512),[[i.F8,!l.list.length]]),(0,a.Wm)(d,{ArticleList:l.list,notice:!0},null,8,["ArticleList"])])])}const Ui={class:"commentList"},zi={class:"author"},Fi={style:{display:"flex"}},Vi={class:"info"},ji={class:"p5"},Bi={key:0,class:"p7g"},Ri={key:1,class:"p7g"},qi={key:2,class:"p7g"},Hi={style:{display:"flex","align-items":"center"}},Ni={class:"p6 van-multi-ellipsis--l2"},Gi={key:0,class:"p5 repliedMessage van-ellipsis"},Ti={class:"p5g"},Mi={style:{display:"flex","align-item":"center"}},Ei={class:"articleInfo van-ellipsis"},Pi={class:"p6g"},Yi={class:"p6 van-ellipsis"};function Oi(e,t,o,l,n,r){const c=(0,a.up)("van-image"),d=(0,a.up)("van-icon"),m=(0,a.up)("van-button"),u=(0,a.up)("van-popover"),h=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",Ui,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.ArticleList,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"commentItem",key:e.articleId},[(0,a.Wm)(h,{to:"/articleHome/"+e.articleId},{default:(0,a.w5)((()=>[(0,a._)("div",zi,[(0,a._)("div",Fi,[(0,a.Wm)(c,{round:"",width:"0.8rem",height:"0.8rem",fit:"cover",src:r.avatarGet(e.speakerInfo.avatar),"lazy-load":""},null,8,["src"]),(0,a._)("div",Vi,[(0,a._)("span",ji,(0,$.zw)(e.speakerInfo.nickname),1),o.notice&&e.listenerName?((0,a.wg)(),(0,a.iD)("span",Bi,(0,$.zw)(r.before(e.date-0))+" 回复了你的评论",1)):o.notice&&!e.listenerName?((0,a.wg)(),(0,a.iD)("span",Ri,(0,$.zw)(r.before(e.date-0))+" 评论了你的文章",1)):((0,a.wg)(),(0,a.iD)("span",qi,(0,$.zw)(r.before(e.date-0))+" 发布了评论",1))])]),(0,a.wy)((0,a._)("div",Hi,[(0,a.Wm)(u,{show:n.showPopover[t],"onUpdate:show":e=>n.showPopover[t]=e,actions:n.actions,onSelect:r.onSelect,placement:"bottom-end",theme:"dark",trigger:"manual"},{reference:(0,a.w5)((()=>[(0,a.Wm)(m,{size:"small",onClick:(0,i.iM)((s=>r.delComment(t,e)),["prevent"]),color:"transparent"},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"ellipsis",color:"#aaa",size:"0.5rem"})])),_:2},1032,["onClick"])])),_:2},1032,["show","onUpdate:show","actions","onSelect"])],512),[[i.F8,this.$store.state.user&&o.listCell&&e.speakerInfo.userId===this.$store.state.user.userId]])]),(0,a._)("div",Ni,(0,$.zw)(e.replyMessage),1),(0,a._)("div",{class:"bottom",style:(0,$.j5)({padding:e.listenerName?"5px":"0"})},[e.listenerName?((0,a.wg)(),(0,a.iD)("p",Gi,[(0,a.Uk)((0,$.zw)(e.listenerName)+":",1),(0,a._)("span",Ti,(0,$.zw)(e.repliedMessage),1)])):(0,a.kq)("",!0),(0,a._)("div",{class:"article",style:(0,$.j5)({background:e.listenerName?"rgb(253, 253, 253)":"rgb(243, 243, 243)"})},[(0,a._)("div",Mi,[" "===e.articleInfo.cover?((0,a.wg)(),(0,a.j4)(c,{key:0,width:"1rem",height:"1rem",fit:"cover",src:s(6876),"lazy-load":"",style:{background:"rgb(234, 234, 234)"}},null,8,["src"])):((0,a.wg)(),(0,a.j4)(c,{key:1,width:"1rem",height:"1rem",fit:"cover",src:this.$store.state.URL+"upload/cover/"+e.articleInfo.cover,"lazy-load":""},null,8,["src"]))]),(0,a._)("div",Ei,[(0,a._)("span",Pi,(0,$.zw)(e.articleInfo.authorName),1),(0,a._)("span",Yi,(0,$.zw)(e.articleInfo.title),1)])],4)],4)])),_:2},1032,["to"])])))),128))])}var Qi={name:"commentList",inject:["before","avatarGet"],props:{ArticleList:{type:Array},notice:{type:Boolean,default:!1},listCell:{type:Boolean,default:!1}},data(){return{showPopover:[],actions:[{text:"删除",icon:"delete-o"},{text:"取消",icon:"close"}],target:null}},methods:{delComment(e,t){this.target=t,this.showPopover[e]=!0},onSelect(e){"删除"===e.text&&this.del(this.target)},del(e){n.F.loading({message:"删除中...",duration:0,overlay:!0});let t={articleId:e.articleId,commentId:e.commentId,userId:this.$store.state.user.userId};const s=this.ArticleList;s.splice(this.ArticleList.indexOf(e),1),e.repliedMessage&&(t={...t,date:e.date}),this.$axios.get("delComment",{params:t}).then((e=>{console.log(e,"评论或回复删除成功！"),n.F.clear(),n.F.success("删除成功!")}))}},mounted(){}};const Ki=(0,k.Z)(Qi,[["render",Oi],["__scopeId","data-v-9d48f4e0"]]);var Zi=Ki,Ji={name:"ReplyList",components:{CommentList:Zi},inject:["getId","before"],data(){return{list:[]}},methods:{onClickLeft(){this.$router.back()}},mounted(){const e=this.getId(this.$route.path),t={userId:e,type:"commentNotice"};this.$axios.get("getMessageNotice",{params:t}).then((e=>{console.log(e),this.list=e.filter((e=>null!==e))}))}};const Xi=(0,k.Z)(Ji,[["render",$i]]);var ea=Xi;const ta=e=>((0,a.dD)("data-v-4fa08346"),e=e(),(0,a.Cn)(),e),sa={class:"newSubscribe wrapper pt"},ia={class:"bulk"},aa=["onClick"],oa={class:"nameDateReport"},la={class:"nameDate"},na={class:"nickname p4b"},ra=ta((()=>(0,a._)("div",{class:"time p5 van-ellipsis"},"关注了您！",-1))),ca={class:"report"},da={class:"time p5"};function ma(e,t,s,o,l,n){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-empty"),d=(0,a.up)("van-image");return(0,a.wg)(),(0,a.iD)("div",sa,[(0,a.Wm)(r,{title:"新的关注","left-arrow":"",onClickLeft:n.onClickLeft,fixed:""},null,8,["onClickLeft"]),(0,a._)("div",ia,[(0,a.wy)((0,a.Wm)(c,{description:"暂无新关注"},null,512),[[i.F8,!l.list.length]]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.list,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"top",key:e.userId,onClick:t=>n.goPersonal(e.userId)},[(0,a.Wm)(d,{class:"avatar",width:"1rem",height:"1rem",fit:"cover",round:"",src:n.avatarGet(e.avatar)},null,8,["src"]),(0,a._)("div",oa,[(0,a._)("div",la,[(0,a._)("div",na,(0,$.zw)(e.nickname),1),ra]),(0,a._)("div",ca,[(0,a._)("div",da,(0,$.zw)(n.before(+e.date)),1)])])],8,aa)))),128))])])}var ua={name:"NewSubscribe",inject:["getId","before","avatarGet"],data(){return{list:[]}},methods:{goPersonal(e){this.$router.push("/personal/"+e)},onClickLeft(){this.$router.back()}},mounted(){const e=this.getId(this.$route.path),t={userId:e,type:"subscribe"};this.$axios.get("getMessageNotice",{params:t}).then((e=>{console.log(e),this.list=e}))}};const ha=(0,k.Z)(ua,[["render",ma],["__scopeId","data-v-4fa08346"]]);var pa=ha;const ga={class:"directMessage wrapper pbt"},fa={class:"main",ref:"main"},wa={class:"avatar"},va={class:"content"},ka={class:"message p5-5"},ya={class:"date p6g"},ba={class:"send"},Ca={class:"option"},Ia=(0,a.Uk)("发送");function xa(e,t,s,o,l,n){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-image"),d=(0,a.up)("van-field"),m=(0,a.up)("van-button"),u=(0,a.up)("van-icon"),h=(0,a.up)("van-popup");return(0,a.wg)(),(0,a.iD)("div",ga,[(0,a.Wm)(r,{title:l.opposite?l.opposite.nickname:void 0,"left-arrow":"",onClickLeft:n.onClickLeft,fixed:""},null,8,["title","onClickLeft"]),(0,a._)("div",{class:(0,$.C_)(l.flexEnd?"background bulk flexEnd":"background bulk "),ref:"background",id:"dmBulk"},[(0,a._)("div",fa,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.messageList,(e=>((0,a.wg)(),(0,a.iD)("div",{class:(0,$.C_)("messageItem "+n.getClass(e.userId)),key:e},[(0,a._)("div",wa,[(0,a.Wm)(c,{width:".8rem",height:".8rem",fit:"cover",round:"",src:n.avatarGet(n.getSrc(e.userId)),onClick:(0,i.iM)((t=>n.goPersonal(e.userId)),["stop"])},null,8,["src","onClick"])]),(0,a._)("div",va,[(0,a._)("div",ka,(0,$.zw)(e.message),1),(0,a._)("div",ya,(0,$.zw)(n.untilMin(+e.date)),1)])],2)))),128))],512)],2),(0,a._)("div",ba,[(0,a.Wm)(d,{placeholder:"发送消息",onFocus:n.focus,modelValue:l.message,"onUpdate:modelValue":t[0]||(t[0]=e=>l.message=e)},null,8,["onFocus","modelValue"])]),(0,a.Wm)(h,{show:l.show,"onUpdate:show":t[2]||(t[2]=e=>l.show=e),position:this.$store.state.setup&&this.$store.state.setup.system?"top":"bottom",class:"pop"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:l.message,"onUpdate:modelValue":t[1]||(t[1]=e=>l.message=e),rows:"2",autosize:"",type:"textarea",placeholder:"发送消息",ref:"input"},null,8,["modelValue"]),(0,a._)("div",Ca,[(0,a.Wm)(m,{type:"primary",size:"small",color:"#000",onClick:n.sendMessage},{default:(0,a.w5)((()=>[Ia])),_:1},8,["onClick"]),(0,a.Wm)(u,{name:"photo-o",color:"grey",size:"0.5rem",style:{padding:"10px"},onMousedown:(0,i.iM)(n.developing,["prevent"])},null,8,["onMousedown"]),(0,a.Wm)(u,{name:"smile-o",color:"grey",size:"0.5rem",style:{padding:"10px"},onMousedown:(0,i.iM)(n.developing,["prevent"])},null,8,["onMousedown"]),(0,a.Wm)(u,{name:"arrow-down",color:"grey",size:"0.5rem",style:{padding:"10px"},onClick:n.loseFocus},null,8,["onClick"])])])),_:1},8,["show","position"])])}var _a={name:"DirectMessage",components:{},inject:["getId","before","untilMin","avatarGet","developing"],data(){return{message:"",show:!1,messageList:[],oppositeId:-1,user:null,opposite:null,flexEnd:!1,mounted:!1,scrollTop:0}},methods:{goPersonal(e){this.$router.push("/personal/"+e)},onClickLeft(){this.$router.back()},getClass(e){if(e==this.$store.state.user.userId)return"right"},getSrc(e){return e==this.$store.state.user.userId?this.user.avatar:this.opposite.avatar},sendMessage(){if(""===this.message.trim())return void n.F.fail("内容无意义！");const e={userId:this.$store.state.user.userId,date:Date.now(),message:this.message,oppositeId:this.oppositeId};this.$axios.post("sendMessage",G().stringify(e)).then((t=>{this.messageList=[...this.messageList,e],console.log(t),this.message="",this.show=!1,this.heightGet(),n.F.clear(),n.F.success("发送成功！")}))},focus(){this.show=!0,this.$nextTick((()=>{this.$refs.input.focus()}))},loseFocus(){this.$refs.input.blur()},async dataGet(){this.oppositeId=this.getId(this.$route.path);const e={userId:this.$store.state.user.userId,oppositeId:this.oppositeId};await this.$axios.get("getDMDetail",{params:e}).then((e=>{this.user=e[1],this.opposite=e[0],this.messageList=e[2]})),this.heightGet(),n.F.clear()},heightGet(){this.$nextTick((()=>{const e=(0,p.EL)(this.$refs.background),t=(0,p.EL)(this.$refs.main);t.height<=e.height?this.flexEnd=!0:this.flexEnd=!1}))},push(){if(!history.state.title){let e={title:"title",url:"http://www.maomao365.com"};history.pushState(e,"title")}}},mounted(){n.F.loading({message:"数据获取中",overlay:!0,duration:0}),this.push(),this.mounted=!0,this.dataGet()},activated(){this.mounted?this.mounted=!1:this.$store.state.isBack?this.$nextTick((()=>{document.querySelector("#dmBulk").scrollTop=this.scrollTop})):(this.push(),Object.assign(this.$data,this.$options.data()),this.dataGet())},deactivated(){this.scrollTop=document.querySelector("#dmBulk").scrollTop,console.log(this.scrollTop)}};const La=(0,k.Z)(_a,[["render",xa],["__scopeId","data-v-abe09618"]]);var Aa=La;const Wa=e=>((0,a.dD)("data-v-47f6ec4e"),e=e(),(0,a.Cn)(),e),Sa={class:"My wrapper pbt"},Da={key:0,class:"logined noLogin bulk myBulk"},$a={class:"content"},Ua={class:"imgbox"},za={class:"text"},Fa={class:"p3"},Va={class:"p6g van-multi-ellipsis--l2"},ja={key:0},Ba={class:"p2"},Ra=Wa((()=>(0,a._)("p",{class:"p5g"},"关注",-1))),qa={class:"p2"},Ha=Wa((()=>(0,a._)("p",{class:"p5g"},"粉丝",-1))),Na={class:"p2"},Ga=Wa((()=>(0,a._)("p",{class:"p5g"},"获赞",-1))),Ta={class:"cah baseData"},Ma={class:"listCell"},Ea=(0,a.Uk)("退出登录"),Pa={key:1,class:"noLogin"},Ya=Wa((()=>(0,a._)("span",{class:"p1"},"个人中心",-1))),Oa={class:"imgbox"},Qa=Wa((()=>(0,a._)("div",{class:"text"},[(0,a._)("p",{class:"p3"},"点击登录"),(0,a._)("p",{class:"p6g"},"登录解锁更多精彩内容~")],-1)));function Ka(e,t,o,l,n,r){const c=(0,a.up)("van-image"),d=(0,a.up)("van-icon"),m=(0,a.up)("van-grid-item"),u=(0,a.up)("van-grid"),h=(0,a.up)("van-cell"),p=(0,a.up)("van-cell-group"),g=(0,a.up)("van-button"),f=(0,a.up)("van-tab"),w=(0,a.up)("ListCell"),v=(0,a.up)("van-tabs"),k=(0,a.up)("router-link"),y=(0,a.up)("TabBar"),b=(0,a.up)("van-action-sheet");return(0,a.wg)(),(0,a.iD)("div",Sa,[n.logined?((0,a.wg)(),(0,a.iD)("div",Da,[(0,a._)("div",null,[(0,a._)("div",$a,[(0,a._)("div",Ua,[(0,a.Wm)(c,{round:"",width:"2rem",height:"2rem",src:r.avatarGet(n.user.avatar),fit:"cover"},null,8,["src"])]),(0,a._)("div",za,[(0,a._)("p",Fa,[(0,a.Uk)((0,$.zw)(n.user.nickname)+" ",1),(0,a.wy)((0,a.Wm)(d,{"class-prefix":"iconfont icon-nan",size:"0.5rem",color:"blue"},null,512),[[i.F8,"男"===n.user.sex]]),(0,a.wy)((0,a.Wm)(d,{"class-prefix":"iconfont icon-nv",size:"0.5rem",color:"pink"},null,512),[[i.F8,"女"===n.user.sex]])]),(0,a._)("p",Va,(0,$.zw)(n.user.signature),1)])])]),this.$store.state.user?((0,a.wg)(),(0,a.iD)("div",ja,[(0,a.Wm)(u,{clickable:"","column-num":3,border:!1},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{to:"/subscribe/"+this.$store.state.user.userId+"/0"},{default:(0,a.w5)((()=>[(0,a._)("p",Ba,(0,$.zw)(n.follow.length),1),Ra])),_:1},8,["to"]),(0,a.Wm)(m,{to:"/subscribe/"+this.$store.state.user.userId+"/1"},{default:(0,a.w5)((()=>[(0,a._)("p",qa,(0,$.zw)(n.fan.length),1),Ha])),_:1},8,["to"]),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a._)("p",Na,(0,$.zw)(n.user.likeCount),1),Ga])),_:1})])),_:1})])):(0,a.kq)("",!0),(0,a._)("div",Ta,[(0,a.Wm)(u,{clickable:"","column-num":2,border:!1},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{icon:"home-o",to:"/myCollect"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{title:"我的收藏","is-link":"",icon:"star"})])),_:1}),(0,a.Wm)(m,{icon:"home-o",to:"/history"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{title:"历史记录","is-link":"",icon:"clock"})])),_:1})])),_:1})]),(0,a._)("div",Ma,[(0,a.Wm)(v,{active:n.active,"onUpdate:active":t[1]||(t[1]=e=>n.active=e),swipeable:"",shrink:"",class:"out",onChange:r.onChange},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{title:"数据"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{title:"推荐服务"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{title:"修改资料",to:"/profileEdit","is-link":""},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{"class-prefix":"iconfont icon-xiugai",size:"0.5rem"})])),_:1}),(0,a.Wm)(h,{title:"草稿箱",to:"/draftList","is-link":""},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"newspaper-o",size:"0.5rem"})])),_:1}),(0,a.Wm)(h,{title:"下载App","is-link":"",onClick:t[0]||(t[0]=e=>r.download())},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{"class-prefix":"iconfont icon-fenxiang",size:"0.5rem"})])),_:1}),(0,a.Wm)(h,{title:"问题反馈",to:"feedback","is-link":""},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{"class-prefix":"iconfont icon-31wentifankui",size:"0.5rem"})])),_:1}),(0,a.Wm)(h,{title:"设置","is-link":"",to:"/setup"},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{"class-prefix":"iconfont icon-shezhi",size:"0.5rem"})])),_:1})])),_:1}),(0,a.Wm)(p,{title:"其他服务"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{title:"商务合作",to:"contact","is-link":""},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{"class-prefix":"iconfont icon-jiarukequn",size:"0.5rem"})])),_:1}),(0,a.Wm)(h,{title:"加入我们",to:"contact","is-link":""},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{"class-prefix":"iconfont icon-CPhezuo_o",size:"0.5rem"})])),_:1})])),_:1}),(0,a.Wm)(g,{type:"danger",block:"",onClick:r.loginOut},{default:(0,a.w5)((()=>[Ea])),_:1},8,["onClick"])])),_:1}),(0,a.Wm)(f,{title:"动态"},{default:(0,a.w5)((()=>[n.inited?((0,a.wg)(),(0,a.j4)(w,{submitIdArr:n.submit,postIdArr:n.post,commentArr:n.comment,userId:e.userId-0,onRefresh:r.refresh,key:n.key},null,8,["submitIdArr","postIdArr","commentArr","userId","onRefresh"])):(0,a.kq)("",!0)])),_:1})])),_:1},8,["active","onChange"])])])):((0,a.wg)(),(0,a.iD)("div",Pa,[Ya,(0,a._)("div",null,[(0,a.Wm)(k,{to:"/login",class:"content"},{default:(0,a.w5)((()=>[(0,a._)("div",Oa,[(0,a.Wm)(c,{round:"",width:"2rem",height:"2rem",src:s(7205)},null,8,["src"])]),Qa])),_:1})])])),(0,a.Wm)(y),(0,a.Wm)(b,{show:n.show,"onUpdate:show":t[2]||(t[2]=e=>n.show=e),actions:n.actions,onSelect:r.onSelect,description:"选择版本","cancel-text":"取消","close-on-click-action":""},null,8,["show","actions","onSelect"])])}const Za={class:"listCell",ref:"listCellBulk"},Ja={class:"scrollBox"},Xa={class:"scrollBox"},eo={class:"scrollBox"};function to(e,t,s,i,o,l){const n=(0,a.up)("van-empty"),r=(0,a.up)("PostList"),c=(0,a.up)("van-list"),d=(0,a.up)("van-tab"),m=(0,a.up)("CommentList"),u=(0,a.up)("SubmitList"),h=(0,a.up)("van-tabs"),p=(0,a.up)("van-pull-refresh");return(0,a.wg)(),(0,a.iD)("div",Za,[(0,a.Wm)(p,{modelValue:o.refreshing,"onUpdate:modelValue":t[4]||(t[4]=e=>o.refreshing=e),"head-height":80,style:(0,$.j5)(l.minHeight(this.$refs.listCellBulk)),onRefresh:l.onRefresh},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{active:o.active,"onUpdate:active":t[3]||(t[3]=e=>o.active=e),type:"card",color:"#fff",background:"#f2f4f3","title-active-color":"black","title-inactive-color":"#999"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{title:"发帖"+s.postIdArr.length},{default:(0,a.w5)((()=>[!0===o.postFinished&&0===o.post.length?((0,a.wg)(),(0,a.j4)(n,{key:0,image:"https://fastly.jsdelivr.net/npm/@vant/assets/custom-empty-image.png","image-size":"80",description:"暂无发帖"})):(0,a.kq)("",!0),(0,a._)("div",Ja,[(0,a.Wm)(c,{loading:o.postLoading,"onUpdate:loading":t[0]||(t[0]=e=>o.postLoading=e),finished:o.postFinished,"finished-text":"没有更多了",onLoad:l.onLoadPost},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{ArticleList:o.post},null,8,["ArticleList"])])),_:1},8,["loading","finished","onLoad"])])])),_:1},8,["title"]),(0,a.Wm)(d,{title:"评论"+s.commentArr.length},{default:(0,a.w5)((()=>[!0===o.commentFinished&&0===o.comment.length?((0,a.wg)(),(0,a.j4)(n,{key:0,image:"https://fastly.jsdelivr.net/npm/@vant/assets/custom-empty-image.png","image-size":"80",description:"暂无评论"})):(0,a.kq)("",!0),(0,a.Wm)(c,{loading:o.commentLoading,"onUpdate:loading":t[1]||(t[1]=e=>o.commentLoading=e),finished:o.commentFinished,"finished-text":"没有更多了",onLoad:l.onLoadComment},{default:(0,a.w5)((()=>[(0,a._)("div",Xa,[(0,a.Wm)(m,{ArticleList:o.comment,listCell:!0},null,8,["ArticleList"])])])),_:1},8,["loading","finished","onLoad"])])),_:1},8,["title"]),(0,a.Wm)(d,{title:"投稿"+s.submitIdArr.length},{default:(0,a.w5)((()=>[!0===o.finished&&0===o.submit.length?((0,a.wg)(),(0,a.j4)(n,{key:0,image:"https://fastly.jsdelivr.net/npm/@vant/assets/custom-empty-image.png","image-size":"80",description:"暂无投稿"})):(0,a.kq)("",!0),(0,a._)("div",eo,[(0,a.Wm)(c,{loading:o.loading,"onUpdate:loading":t[2]||(t[2]=e=>o.loading=e),finished:o.finished,"finished-text":"没有更多了",onLoad:l.onLoad},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{ArticleList:o.submit},null,8,["ArticleList"])])),_:1},8,["loading","finished","onLoad"])])])),_:1},8,["title"])])),_:1},8,["active"])])),_:1},8,["modelValue","style","onRefresh"])],512)}var so={name:"postList",components:{PostList:Ft,SubmitList:Zt,CommentList:Zi},inject:["reload","minHeight"],props:{userId:{type:Number},submitIdArr:{type:Array},postIdArr:{type:Array},commentArr:{type:Array}},data(){return{active:0,size:this.$store.state.size,submit:[],loading:!1,finished:!1,skip:0,post:[],postLoading:!1,postFinished:!1,postSkip:0,comment:[],commentLoading:!1,commentFinished:!1,commentSkip:0,refreshing:!1}},methods:{async onRefresh(){if(this.loading||this.postLoading||this.commentLoading)return n.F.fail({overlay:!0,message:"不要在加载时刷新!"}),void(this.refreshing=!1);this.$emit("refresh","data",(()=>{switch(this.active){case 0:this.postLoading=!0,this.postFinished=!1,this.postSkip=0,this.onLoadPost();break;case 1:this.commentLoading=!0,this.commentFinished=!1,this.commentSkip=0,this.onLoadComment();break;case 2:this.loading=!0,this.finished=!1,this.skip=0,this.onLoad();break}}))},onLoad(){const e=this.size;let t=this.skip,s=t+e,i=[];for(t;t<s;t++)i.push(this.submitIdArr[t]);let a=i.filter((e=>"number"===typeof e));const o={submitIdArr:a,URL:this.$store.state.URL,userId:this.userId};console.log(o),setTimeout((()=>{this.$axios.get("userSubmitShow",{params:o}).then((e=>{this.refreshing?(this.submit=[...e],(0,n.F)("刷新成功"),this.refreshing=!1):this.submit=[...this.submit,...e],this.loading=!1,e.length<this.size?this.finished=!0:this.skip=this.skip+this.size}))}),100)},onLoadPost(){const e=this.size;let t=this.postSkip,s=t+e,i=[];for(t;t<s;t++)i.push(this.postIdArr[t]);let a=i.filter((e=>"number"===typeof e));const o={postIdArr:a,URL:this.$store.state.URL,userId:this.userId};setTimeout((()=>{this.$axios.get("userPostShow",{params:o}).then((e=>{this.refreshing?(this.post=[...e],(0,n.F)("刷新成功"),this.refreshing=!1):this.post=[...this.post,...e],this.postLoading=!1,e.length<this.size?this.postFinished=!0:this.postSkip=this.postSkip+this.size}))}),100)},onLoadComment(){const e=this.size;let t=this.commentSkip,s=t+e,i=[];for(t;t<s;t++)i.push(this.commentArr[t]);let a=i.filter((e=>"object"===typeof e));const o={commentArr:a,userId:this.userId};setTimeout((()=>{this.$axios.get("userCommentShow",{params:o}).then((e=>{e=e.filter((e=>e)),this.refreshing?(this.comment=[...e],(0,n.F)("刷新成功"),this.refreshing=!1):this.comment=[...this.comment,...e],this.commentLoading=!1,e.length<this.size?this.commentFinished=!0:this.commentSkip=this.commentSkip+this.size}))}),100)}},mounted(){},updated(){}};const io=(0,k.Z)(so,[["render",to],["__scopeId","data-v-2e086398"]]);var ao=io,oo={name:"MyView",components:{ListCell:ao,TabBar:ms},inject:["reload","developing","avatarGet"],data(){return{src:"",logined:!1,active:0,active1:0,user:{},fan:[],follow:[],submit:[],post:[],comment:[],inited:!1,key:0,scrollLocation:0,show:!1,actions:[{name:"android"},{name:"ios"}]}},methods:{loginOut(){r.V.confirm({title:"退出登录",message:"确定吗?"}).then((()=>{this.$router.replace("/login"),this.$store.commit("setUser",null),this.logined=!1})).catch((()=>{}))},onSelect(e){const t=document.createElement("a");t.href=this.$store.state.URL+"/images/apk/"+e.name+".apk",t.setAttribute("download","DINOEYES"),t.style.display="none",document.body.appendChild(t),setTimeout((()=>{t.click(),document.body.removeChild(t)}),66)},download(){this.show=!0},async refresh(e,t){await this.dataShow(),t(e)},async dataShow(){const e={userId:this.$store.state.user.userId};await this.$axios.get("userDataShow",{params:e}).then((e=>{this.user=e,this.fan=e.fans.fan,this.follow=e.follows.follow,this.submit=e.submits.submit.reverse(),this.post=e.posts.post.reverse(),this.comment=e.comments.comment.reverse(),this.inited=!0}))},scrollHandler(){this.active&&(this.scrollLocation=document.querySelector(".myBulk").scrollTop)},onChange(e){this.$nextTick((()=>{e&&(document.querySelector(".myBulk").scrollTop=this.scrollLocation)}))}},mounted(){this.$store.state.user?(this.$nextTick((()=>{document.querySelector(".myBulk").addEventListener("scroll",this.scrollHandler)})),this.logined=!0,this.userId=this.$store.state.user.userId,this.dataShow()):this.logined=!1},activated(){if(this.$nextTick((()=>{this.active&&(document.querySelector(".myBulk").scrollTop=this.scrollLocation)})),!0!==this.$route.meta.isBack);else{const e={userId:this.$store.state.user.userId};this.$axios.get("userDataShow",{params:e}).then((e=>{this.user=e}))}},beforeRouteEnter(e,t,s){-1!==t.path.indexOf("/profileEdit")&&(e.meta.isBack=!0),s()}};const lo=(0,k.Z)(oo,[["render",Ka],["__scopeId","data-v-47f6ec4e"]]);var no=lo;const ro=e=>((0,a.dD)("data-v-517fca78"),e=e(),(0,a.Cn)(),e),co={class:"submit pt wrapper"},mo={class:"bulk",ref:"bulk",id:"bulk"},uo=(0,a.Uk)(" 选择频道"),ho=ro((()=>(0,a._)("img",{src:"https://fastly.jsdelivr.net/npm/@vant/assets/apple-3.jpeg"},null,-1)));function po(e,t,s,o,l,n){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-button"),d=(0,a.up)("van-cell"),m=(0,a.up)("van-icon"),u=(0,a.up)("ChannelEdit"),h=(0,a.up)("van-popup"),p=(0,a.up)("van-field"),g=(0,a.up)("van-cell-group"),f=(0,a.up)("van-uploader"),w=(0,a.up)("WangEditor"),v=(0,a.up)("ImageCut"),k=(0,a.up)("van-dialog");return(0,a.wg)(),(0,a.iD)("div",co,[(0,a.Wm)(r,{title:"文章投稿","left-arrow":"",fixed:"",onClickLeft:n.onClickLeft},{right:(0,a.w5)((()=>[(0,a._)("span",{style:{"margin-left":"1rem"},onClick:t[0]||(t[0]=(0,i.iM)(((...e)=>n.uploadSend&&n.uploadSend(...e)),["stop"]))},(0,$.zw)(this.$route.query.articleId?"确认编辑":"发送"),1)])),_:1},8,["onClickLeft"]),(0,a._)("div",mo,[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{title:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.selectedCom,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.channelId},[(0,a.Wm)(c,{type:"primary",size:"mini",onClick:n.showPop},{default:(0,a.w5)((()=>[(0,a.Uk)((0,$.zw)(e.channelName),1)])),_:2},1032,["onClick"])])))),128)),(0,a.wy)((0,a.Wm)(c,{icon:"plus",type:"primary",size:"mini",onClick:n.showPop},{default:(0,a.w5)((()=>[uo])),_:1},8,["onClick"]),[[i.F8,0===l.selectedCom.length]])])),_:1}),(0,a.Wm)(h,{show:l.show,"onUpdate:show":t[1]||(t[1]=e=>l.show=e),position:"right",style:{width:"100%",height:"100%"},class:"pop"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{title:"选择频道","left-arrow":"",onClickLeft:n.hidPop},{left:(0,a.w5)((()=>[(0,a.Wm)(m,{name:"cross",size:"18"})])),_:1},8,["onClickLeft"]),(0,a.Wm)(u,{my:l.myChannels,isSelect:!0,ref:"headerChild",onHidPop:n.hidPop},null,8,["my","onHidPop"])])),_:1},8,["show"]),(0,a.Wm)(d,null,{value:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:l.title,"onUpdate:modelValue":t[2]||(t[2]=e=>l.title=e),placeholder:"标题"},null,8,["modelValue"])])),_:1})])),_:1}),(0,a.Wm)(d,{title:"请选择封面:",clickable:"",size:"large",ref:"test"},{value:(0,a.w5)((()=>[(0,a.Wm)(f,{modelValue:l.fileList,"onUpdate:modelValue":t[3]||(t[3]=e=>l.fileList=e),"max-count":1,"after-read":n.afterRead,name:"avatar","before-read":n.beforeRead,"preview-size":[160,90],"max-size":8192e3,onOversize:n.onOversize},null,8,["modelValue","after-read","before-read","onOversize"])])),_:1},512),(0,a.Wm)(w,{ref:"editor",submitOrPost:"submit"},null,512)],512),(0,a.Wm)(h,{show:l.cutShow,"onUpdate:show":t[4]||(t[4]=e=>l.cutShow=e),position:"right",style:{width:"100%",height:"100%"}},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)(v,{type:e.type,src:l.src,onCutConfirm:n.cutConfirm,onCutCancel:n.cutCancel,key:l.key,onLoaded:n.cutLoaded},null,8,["type","src","onCutConfirm","onCutCancel","onLoaded"]))])),_:1},8,["show"]),(0,a.Wm)(k,{show:l.dialogShow,"onUpdate:show":t[5]||(t[5]=e=>l.dialogShow=e),title:"标题","show-cancel-button":"",onCancel:t[6]||(t[6]=e=>l.allowExit=!1),onConfirm:t[7]||(t[7]=e=>{l.allowExit=!0})},{default:(0,a.w5)((()=>[ho])),_:1},8,["show"])])}s(2801),s(8675),s(3462),s(7380),s(1118);const go=e=>((0,a.dD)("data-v-55b94544"),e=e(),(0,a.Cn)(),e),fo={class:"wangEditor wrapper"},wo={class:"progress"},vo=go((()=>(0,a._)("span",{class:"p5"},"图片上传中",-1))),ko={key:1,class:"icon"},yo={class:"p5"};function bo(e,t,s,o,l,n){const r=(0,a.up)("van-loading"),c=(0,a.up)("van-icon"),d=(0,a.up)("van-progress"),m=(0,a.up)("Editor"),u=(0,a.up)("Toolbar"),h=(0,a.up)("van-popup");return(0,a.wg)(),(0,a.iD)("div",fo,[(0,a.wy)((0,a._)("div",wo,[l.upLoadProgress<100?((0,a.wg)(),(0,a.j4)(r,{key:0,type:"spinner",color:"#1989fa",size:"24px"},{default:(0,a.w5)((()=>[vo])),_:1})):((0,a.wg)(),(0,a.iD)("div",ko,[(0,a.Wm)(c,{name:"checked",color:"green",size:"24px"}),(0,a._)("span",yo,"上传完成"+(0,$.zw)(l.fileCount?"("+l.fileCount+")":null),1)])),(0,a.Wm)(d,{percentage:l.upLoadProgress,style:{width:"100%"}},null,8,["percentage"])],512),[[i.F8,0!==l.upLoadProgress]]),(0,a._)("div",null,[(0,a.Wm)(m,{modelValue:l.html,"onUpdate:modelValue":t[0]||(t[0]=e=>l.html=e),defaultConfig:l.editorConfig,mode:l.mode,class:"editor p4",onOnCreated:n.onCreated,onOnFocus:n.onFocus,onOnBlur:n.onBlur},null,8,["modelValue","defaultConfig","mode","onOnCreated","onOnFocus","onOnBlur"])]),(0,a.Wm)(h,{show:l.show,"onUpdate:show":t[1]||(t[1]=e=>l.show=e),overlay:!1,lockScroll:!1,position:this.$store.state.setup&&this.$store.state.setup.system?"top":"bottom"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(u,{class:"toolbar",editor:l.editor,defaultConfig:l.toolbarConfig,mode:l.mode},null,8,["editor","defaultConfig","mode"]),[[i.F8,l.focusing]])])),_:1},8,["show","position"])])}var Co=s(6126),Io=s(6265),xo=s.n(Io),_o={components:{Editor:Co.M,Toolbar:Co.o},props:{submitOrPost:{type:String}},data(){return{focusing:!0,windowHeight:window.innerHeight,originHeight:window.innerHeight,editor:null,html:"",toolbarConfig:{toolbarKeys:["emotion","uploadImage","header3","bold","blockquote","undo","redo","bulletedList"]},editorConfig:{placeholder:"submit"===this.submitOrPost?"投稿的内容审核后可见":"发布到合适的社区，会有更多曝光机会，错误选择社区会被处理",autoFocus:!1,scroll:!1,hoverbarKeys:{link:{menuKeys:["editLink","viewLink"]},image:{menuKeys:["imageWidth100","deleteImage"]}},MENU_CONF:{insertLink:{checkLink:this.customCheckLinkFn},uploadImage:{customUpload:this.uploadImage}}},mode:"simple",upLoadProgress:0,fileCount:0,show:!1}},methods:{onCreated(e){this.editor=Object.seal(e)},onFocus(){this.show=!0},onBlur(){this.show=!1},customCheckLinkFn(e,t){return 0===t.indexOf("http")||(alert("链接必须以 http/https 开头!"),"链接必须以 http/https 开头")},async uploadImage(e,t){if(-1===this.$store.state.imageType.indexOf(e.type))return void n.F.fail("格式不支持!");this.fileCount++;const s=this.submitOrPost;let i=new FormData;i.append(s,e);let a="";await xo()({url:this.$store.state.URL+"users/"+s+"Upload",method:"post",data:i,onUploadProgress:e=>{e.lengthComputable&&(this.upLoadProgress=parseInt(e.loaded/e.total*100))}}).then((e=>{a=e;let i=this.$store.state.URL+"upload/"+s+"/"+a.data;t(i)}))}},mounted(){},beforeUnmount(){const e=this.editor;null!=e&&e.destroy()}};const Lo=(0,k.Z)(_o,[["render",bo],["__scopeId","data-v-55b94544"]]);var Ao=Lo;const Wo={class:"imageCut wrapper bt"},So={class:"container"},Do={class:"img-container"},$o={src:"",ref:"image",alt:""};function Uo(e,t,s,i,o,l){const n=(0,a.up)("van-icon"),r=(0,a.up)("van-nav-bar");return(0,a.wg)(),(0,a.iD)("div",Wo,[(0,a.Wm)(r,{title:"裁剪",onClickRight:l.confirm,fixed:"",onClickLeft:l.cancel},{left:(0,a.w5)((()=>[(0,a.Wm)(n,{name:"cross",size:"1rem",color:"red"})])),right:(0,a.w5)((()=>[(0,a.Wm)(n,{name:"success",size:"1rem"})])),_:1},8,["onClickRight","onClickLeft"]),(0,a._)("div",So,[(0,a._)("div",Do,[(0,a._)("img",$o,null,512)])])])}var zo=s(255),Fo=s.n(zo),Vo={name:"ImageCut",props:{src:{type:String},type:{type:String}},data(){return{myCropper:null,afterImg:"",imgType:""}},mounted(){this.init(),this.replace(this.src),this.imgType=this.type,this.$nextTick((()=>{this.$emit("loaded")}))},methods:{cancel(){this.$emit("cutCancel")},confirm(){return this.sureSava(),this.$emit("cutConfirm",this.afterImg),!0},replace(e){this.myCropper.replace(e)},init(){this.myCropper=new(Fo())(this.$refs.image,{viewMode:2,dragMode:"move",aspectRatio:16/9,background:!0,autoCropArea:.8,zoomOnWheel:!0})},sureSava(){this.afterImg=this.myCropper.getCroppedCanvas({imageSmoothingQuality:"high"}).toDataURL(this.imgType)}}};const jo=(0,k.Z)(Vo,[["render",Uo],["__scopeId","data-v-7889bce4"]]);var Bo=jo,Ro={name:"SubmitView",inject:["reload"],components:{ChannelEdit:Nt,WangEditor:Ao,ImageCut:Bo},data(){return{cutShow:!1,show:!1,src:"",title:"",fileList:[{url:""}],myChannels:[],selectedCom:[],key:1,cover:" ",dialogShow:!1,allowExit:!1,saved:!1,draftCreatedAt:0}},methods:{hidPop(){this.show=!1,this.selectedCom=this.$refs.headerChild.selectedCom},showPop(){this.show=!0},cutLoaded(){n.F.clear()},cutConfirm(e){this.fileList[0].content=e,this.src=e,this.cutShow=!1},cutCancel(){this.cutShow=!1,this.fileList.length=0},onOversize(){(0,n.F)("文件大小不能超过 8M!")},onClickLeft(){this.$router.back()},afterRead(e){this.key=this.reload();let t=e.content.split(",");this.type=t[0].match(/:(.*?);/)[1],this.src=e.content,this.cutShow=!0},beforeRead(e){return-1!==this.$store.state.imageType.indexOf(e.type)?(n.F.loading({message:"处理中...",overlay:!0,duration:0}),!0):((0,n.F)("您选择的格式不支持或选择了多张图片！"),!1)},base64toFile(e,t){let s=e.split(","),i=s[0].match(/:(.*?);/)[1],a=i.split("/")[1],o=atob(s[1]),l=o.length,n=new Uint8Array(l);while(l--)n[l]=o.charCodeAt(l);return new File([n],`${t}.${a}`,{type:i})},async uploadSend(){if(0===this.selectedCom.length||""===this.title||""===this.$refs.editor.html||"<p><br></p>"===this.$refs.editor.html)n.F.fail("存在未填写字段！");else{if(n.F.loading({message:"提交中...",forbidClick:!0,duration:0,overlay:!0}),0!==this.fileList.length){if("str"!==this.src){const e=new FormData;e.append("cover",this.base64toFile(this.src,"file")),await this.$axios.post("coverUpload",e).then((e=>{this.cover=e}))}}else this.cover=" ";const e=this.$store.state.user.userId,t=this.selectedCom[0].channelId,s=this.title,i=this.$refs.editor.html;let a={authorId:e,channelId:t,title:s,cover:this.cover,content:i},o="投稿成功，等待审核";this.$route.query.articleId?(o="编辑成功！",a={...a,articleId:this.$route.query.articleId},a=G().stringify(a),await this.$axios.post("articleEdit",a)):(a=G().stringify(a),await this.$axios.post("articleSubmit",a)),this.saved=!0,n.F.clear(),(0,n.F)({message:o,forbidClick:!0,onClose:()=>{this.$router.back()}})}},dataGet(){this.fileList=[];const e={userId:this.$store.state.user.userId};this.$axios.get("chaListShow",{params:e}).then((e=>{this.myChannels=e[0]}))}},mounted(){if(this.dataGet(),this.$route.query.articleId){n.F.loading({message:"数据获取中",overlay:!0,duration:0});const e={articleId:this.$route.query.articleId,URL:this.$store.state.URL};this.$axios.get("articleItemGet",{params:e}).then((e=>{this.title=e[0].title,this.selectedCom[0]=e[2],this.$refs.editor.html=e[0].content," "!==e[0].cover&&(this.fileList[0]={url:this.$store.state.URL+"upload/cover/"+e[0].cover},this.cover=e[0].cover,this.src="str"),n.F.clear()}))}if(this.$route.query.createdAt){n.F.loading({message:"数据获取中",overlay:!0,duration:0});const e={createdAt:this.$route.query.createdAt,URL:this.$store.state.URL,userId:this.$store.state.user.userId};this.$axios.get("draftListGet",{params:e}).then((e=>{this.draftCreatedAt=e.createdAt,this.title=e.title,e.channelId&&(this.selectedCom=e.channelId),this.$refs.editor.html=e.content," "!==e.cover&&(this.fileList[0]={url:this.$store.state.URL+"upload/cover/"+e.cover},this.cover=e.cover,this.src="str"),n.F.clear()}))}},beforeRouteLeave(e,t,s){this.$route.query.articleId||""===this.$refs.editor.html||"<p><br></p>"===this.$refs.editor.html||this.saved?s(!0):setTimeout((()=>{r.V.confirm({title:"是否保存到草稿箱"}).then((async()=>{if(n.F.loading({message:"请求中",overlay:!0,duration:0}),0!==this.fileList.length){if("str"!==this.src){const e=new FormData;e.append("cover",this.base64toFile(this.src,"file")),await this.$axios.post("coverUpload",e).then((e=>{this.cover=e}))}}else this.cover=" ";const e=this.$store.state.user.userId,t=this.selectedCom,i=this.title,a=this.$refs.editor.html;let o={authorId:e,channelId:t,title:i,cover:this.cover,content:a,createdAt:this.draftCreatedAt};o=G().stringify(o),await this.$axios.post("draftSave",o).then((e=>{console.log(e),n.F.clear(),n.F.success({message:"保存成功!",onClose:s})}))})).catch((()=>{s(!0)}))}),1)}};const qo=(0,k.Z)(Ro,[["render",po],["__scopeId","data-v-517fca78"]]);var Ho=qo;const No={class:"post submit pt wrapper"},Go={class:"bulk"},To={key:0},Mo={key:1},Eo={class:"outBox"},Po={class:"iconBox"},Yo={class:"textBox"},Oo={class:"outBox"},Qo={class:"iconBox"},Ko={class:"textBox"},Zo={class:"outBox"},Jo={class:"iconBox"},Xo={class:"textBox"};function el(e,t,s,i,o,l){const n=(0,a.up)("van-nav-bar"),r=(0,a.up)("van-icon"),c=(0,a.up)("van-cell"),d=(0,a.up)("van-grid-item"),m=(0,a.up)("van-grid"),u=(0,a.up)("van-popup"),h=(0,a.up)("van-field"),p=(0,a.up)("van-cell-group"),g=(0,a.up)("WangEditor");return(0,a.wg)(),(0,a.iD)("div",No,[(0,a.Wm)(n,{title:"发帖","right-text":this.$route.query.articleId?"确认编辑":"发送","left-arrow":"",onClickRight:l.uploadSend,fixed:"",onClickLeft:l.onClickLeft},null,8,["right-text","onClickRight","onClickLeft"]),(0,a._)("div",Go,[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{title:"选择社区","is-link":"",onClick:l.showPop},{value:(0,a.w5)((()=>[o.selectedCom.id?((0,a.wg)(),(0,a.iD)("div",Mo,[(0,a._)("div",Eo,[(0,a._)("div",Po,[(0,a._)("div",{class:"foreground",style:(0,$.j5)({background:o.selectedCom.foreground})},[(0,a.Wm)(r,{"class-prefix":o.selectedCom.icon+" iconfont",color:o.selectedCom.color,size:"0.6rem"},null,8,["class-prefix","color"])],4)]),(0,a._)("p",Yo,(0,$.zw)(o.selectedCom.communityName),1)])])):((0,a.wg)(),(0,a.iD)("span",To,"选择想要发布到的社区"))])),_:1},8,["onClick"]),(0,a.Wm)(u,{show:o.show,"onUpdate:show":t[0]||(t[0]=e=>o.show=e),position:"right",style:{width:"100%",height:"100%"},class:"pop"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{title:"选择社区",onClickLeft:l.hidPop},{left:(0,a.w5)((()=>[(0,a.Wm)(r,{name:"cross",size:"18"})])),_:1},8,["onClickLeft"]),(0,a.Wm)(c,{title:"我的社区"}),(0,a.Wm)(m,{direction:"horizontal","column-num":2,clickable:"",gutter:"0.2rem"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.myCommunitys,(e=>((0,a.wg)(),(0,a.j4)(d,{key:e,onClick:t=>l.comSelect(e)},{default:(0,a.w5)((()=>[(0,a._)("div",Oo,[(0,a._)("div",Qo,[(0,a._)("div",{class:"foreground",style:(0,$.j5)({background:e.foreground})},[(0,a.Wm)(r,{"class-prefix":e.icon+" iconfont",color:e.color,size:"0.6rem"},null,8,["class-prefix","color"])],4)]),(0,a._)("p",Ko,(0,$.zw)(e.communityName),1)])])),_:2},1032,["onClick"])))),128))])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.otherCoummunity,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e},[(0,a.Wm)(c,{title:e.communityClass},null,8,["title"]),(0,a.Wm)(m,{direction:"horizontal","column-num":2,clickable:"",gutter:"0.2rem"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.content,(e=>((0,a.wg)(),(0,a.j4)(d,{key:e,onClick:t=>l.comSelect(e)},{default:(0,a.w5)((()=>[(0,a._)("div",Zo,[(0,a._)("div",Jo,[(0,a._)("div",{class:"foreground",style:(0,$.j5)({background:e.foreground})},[(0,a.Wm)(r,{"class-prefix":e.icon+" iconfont",color:e.color,size:"0.6rem"},null,8,["class-prefix","color"])],4)]),(0,a._)("p",Xo,(0,$.zw)(e.communityName),1)])])),_:2},1032,["onClick"])))),128))])),_:2},1024)])))),128))])),_:1},8,["show"]),(0,a.Wm)(c,null,{value:(0,a.w5)((()=>[(0,a.Wm)(h,{modelValue:o.title,"onUpdate:modelValue":t[1]||(t[1]=e=>o.title=e),placeholder:"标题"},null,8,["modelValue"])])),_:1})])),_:1}),(0,a.Wm)(g,{ref:"editor",submitOrPost:"post"},null,512)])])}var tl={name:"PostView",components:{WangEditor:Ao},data(){return{show:!1,title:"",myCommunitys:[],allCommunitys:[],selectedComId:-1,selectedCom:{},communityClass:this.$store.state.communityClass,otherCoummunity:[],saved:!1,draftCreatedAt:0}},methods:{comSelect(e){this.selectedComId=e.communityId,this.selectedCom=e,this.hidPop()},hidPop(){this.show=!1},showPop(){this.show=!0},onClickLeft(){this.$router.back()},async communityGet(){const e={userId:this.$store.state.user.userId};await this.$axios.get("comListShow",{params:e}).then((e=>{this.myCommunitys=e})),await this.$axios.get("comGet",{params:e}).then((e=>{this.allCommunitys=e})),this.otherCoummunity=this.communityClass.map((e=>{let t={};return t.communityClass=e,t.content=this.allCommunitys.filter((t=>t.communityClass.indexOf(e)>-1)),t}))},async uploadSend(){if(-1===this.selectedComId||""===this.title||""===this.$refs.editor.html||"<p><br></p>"===this.$refs.editor.html)n.F.fail("存在未填写字段！");else{n.F.loading({message:"提交中...",forbidClick:!0,duration:0,overlay:!0});const e=this.$store.state.user.userId,t=this.selectedComId,s=this.title,i=this.$refs.editor.html;let a={authorId:e,channelId:t,title:s,content:i,isSubmit:!1},o="发帖成功！";this.$route.query.articleId?(o="编辑成功！",a={...a,articleId:this.$route.query.articleId},a=G().stringify(a),await this.$axios.post("articleEdit",a)):(a=G().stringify(a),await this.$axios.post("articleSubmit",a)),this.saved=!0,n.F.clear(),(0,n.F)({message:o,forbidClick:!0,onClose:()=>{this.$router.back()}})}}},mounted(){if(this.communityGet(),this.$route.query.articleId){n.F.loading({message:"数据获取中",overlay:!0,duration:0});const e={articleId:this.$route.query.articleId,URL:this.$store.state.URL};this.$axios.get("articleItemGet",{params:e}).then((e=>{this.title=e[0].title,this.selectedCom=e[2],this.selectedComId=e[2].channelId,this.$refs.editor.html=e[0].content,n.F.clear()}))}if(this.$route.query.createdAt){n.F.loading({message:"数据获取中",overlay:!0,duration:0});const e={createdAt:this.$route.query.createdAt,URL:this.$store.state.URL,userId:this.$store.state.user.userId};this.$axios.get("draftListGet",{params:e}).then((e=>{this.draftCreatedAt=e.createdAt,this.title=e.title,e.channelId&&(this.selectedCom=e.channelId,this.selectedComId=e.channelId.communityId),this.$refs.editor.html=e.content,n.F.clear()}))}},beforeRouteLeave(e,t,s){this.$route.query.articleId||""===this.$refs.editor.html||"<p><br></p>"===this.$refs.editor.html||this.saved?s(!0):setTimeout((()=>{r.V.confirm({title:"是否保存到草稿箱"}).then((async()=>{n.F.loading({message:"请求中",overlay:!0,duration:0});const e=this.$store.state.user.userId,t=this.selectedCom,i=this.title,a=this.$refs.editor.html;let o={authorId:e,channelId:t,title:i,content:a,createdAt:this.draftCreatedAt};o=G().stringify(o),await this.$axios.post("draftSave",o).then((e=>{console.log(e),n.F.clear(),n.F.success({message:"保存成功!",onClose:s})}))})).catch((()=>{s(!0)}))}),1)}};const sl=(0,k.Z)(tl,[["render",el],["__scopeId","data-v-60966d7a"]]);var il=sl;const al=e=>((0,a.dD)("data-v-792f3a70"),e=e(),(0,a.Cn)(),e),ol={class:"login wrapper pt"},ll={style:{margin:"16px"}},nl=(0,a.Uk)(" 登录 "),rl={style:{display:"flex","justify-content":"space-between",padding:"0 1rem","align-items":"center"}},cl=al((()=>(0,a._)("u",null,"没有账号? 去注册",-1)));function dl(e,t,s,i,o,l){const n=(0,a.up)("van-button"),r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-field"),d=(0,a.up)("van-cell-group"),m=(0,a.up)("van-form"),u=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",ol,[(0,a.Wm)(r,{title:"登录",fixed:""},{left:(0,a.w5)((()=>[(0,a.Wm)(n,{type:"primary",icon:"cross",to:"/",color:"white"})])),_:1}),(0,a.Wm)(m,{onSubmit:l.onSubmit},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{inset:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:o.username,"onUpdate:modelValue":t[0]||(t[0]=e=>o.username=e),name:"phoneNumber",label:"手机号",placeholder:"11位手机号",rules:[{pattern:o.pattern,message:"请填写正确的11位手机号"}]},null,8,["modelValue","rules"]),(0,a.Wm)(c,{modelValue:o.password,"onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{pattern:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,16}$/,message:"密码必须包括字母和数字，且在6到18位之间"}]},null,8,["modelValue","rules"])])),_:1}),(0,a._)("div",ll,[(0,a.Wm)(n,{round:"",block:"",color:"black","native-type":"submit"},{default:(0,a.w5)((()=>[nl])),_:1})])])),_:1},8,["onSubmit"]),(0,a._)("div",rl,[(0,a.Wm)(u,{to:"",class:"p6"},{default:(0,a.w5)((()=>[(0,a._)("u",{onClick:t[2]||(t[2]=(...e)=>l.forget&&l.forget(...e))},"忘记密码?")])),_:1}),(0,a.Wm)(u,{to:"/register",class:"p6"},{default:(0,a.w5)((()=>[cl])),_:1})])])}var ml={name:"LoginView",data(){return{username:"",password:"",pattern:/(^1([38][0-9]|4[579]|5[0-3,5-9]|6[6]|7[0135678]|9[89]))|(886)\d{8}$/,activeNames:[]}},methods:{onSubmit(){n.F.loading({message:"尝试登录中",overlay:!0,duration:0});let e={phoneNumber:this.username,password:this.password};const t=G().stringify(e);return this.$axios.post("userLogin",t).then((e=>{"object"===typeof e?(this.$store.commit("setUser",e),n.F.success({message:"登录成功！",onClose:this.onClose,overlay:!0})):"error"===e?n.F.fail({message:"账号或密码错误！"}):"notExist"===e&&n.F.fail({message:"用户不存在！"})})),!1},onClose(){0===this.$store.state.user.channels.channel.length?this.$router.replace("/channelSelect"):this.$router.replace("/")},forget(){(0,n.F)({message:"还是联系一下管理员吧",position:"bottom"})}},mounted(){}};const ul=(0,k.Z)(ml,[["render",dl],["__scopeId","data-v-792f3a70"]]);var hl=ul;const pl=e=>((0,a.dD)("data-v-2cfb600e"),e=e(),(0,a.Cn)(),e),gl={class:"register wrapper pt"},fl={style:{margin:"16px"}},wl=(0,a.Uk)(" 提交 "),vl={style:{display:"flex","justify-content":"space-between",padding:"0 1rem","align-items":"center"}},kl=pl((()=>(0,a._)("u",null,"已有账号? 去登录",-1)));function yl(e,t,s,i,o,l){const n=(0,a.up)("van-nav-bar"),r=(0,a.up)("van-field"),c=(0,a.up)("van-cell-group"),d=(0,a.up)("van-button"),m=(0,a.up)("van-form"),u=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",gl,[(0,a.Wm)(n,{title:"注册",fixed:"",onClickLeft:l.onClickLeft,"left-arrow":""},null,8,["onClickLeft"]),(0,a.Wm)(m,{onSubmit:l.onSubmit},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{inset:""},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:o.phoneNumber,"onUpdate:modelValue":t[0]||(t[0]=e=>o.phoneNumber=e),name:"phoneNumber",label:"手机号",placeholder:"11位手机号",rules:[{pattern:o.pattern,message:"请填写正确的11位手机号"}]},null,8,["modelValue","rules"]),(0,a.Wm)(r,{modelValue:o.password,"onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{pattern:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,16}$/,message:"密码必须包括字母和数字，且在6到18位之间"}]},null,8,["modelValue","rules"])])),_:1}),(0,a._)("div",fl,[(0,a.Wm)(d,{round:"",block:"",type:"primary","native-type":"submit"},{default:(0,a.w5)((()=>[wl])),_:1})])])),_:1},8,["onSubmit"]),(0,a._)("div",vl,[(0,a.Wm)(u,{to:"/login",class:"p6",style:{color:"#1989fa"}},{default:(0,a.w5)((()=>[kl])),_:1})])])}var bl={name:"LoginView",data(){return{phoneNumber:"",password:"",pattern:/(^1([38][0-9]|4[579]|5[0-3,5-9]|6[6]|7[0135678]|9[89]))|(886)\d{8}$/}},methods:{onClickLeft(){this.$router.back()},onSubmit(e){let t=G().stringify(e);return this.$axios.post("userRegister",t).then((e=>{1===e?n.F.fail("用户已存在！请直接登录"):2===e&&n.F.success({duration:2e3,message:"注册成功！",onClose:this.onClose})})),!1},onClose(){this.$router.replace("/login")}},mounted(){}};const Cl=(0,k.Z)(bl,[["render",yl],["__scopeId","data-v-2cfb600e"]]);var Il=Cl;const xl={class:"profileEdit wrapper pt"};function _l(e,t,s,i,o,l){const n=(0,a.up)("van-icon"),r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-uploader"),d=(0,a.up)("van-cell"),m=(0,a.up)("van-field"),u=(0,a.up)("van-picker"),h=(0,a.up)("van-popup"),p=(0,a.up)("van-cell-group");return(0,a.wg)(),(0,a.iD)("div",xl,[(0,a.Wm)(r,{title:"资料修改","left-arrow":"",fixed:"",onClickLeft:l.onClickLeft},{right:(0,a.w5)((()=>[(0,a.Wm)(n,{name:"success",size:"18",onClick:l.save},null,8,["onClick"])])),_:1},8,["onClickLeft"]),(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{title:"头像",clickable:"",size:"large",center:""},{value:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:o.fileList,"onUpdate:modelValue":t[0]||(t[0]=e=>o.fileList=e),"max-count":1,"after-read":l.afterRead,name:"avatar","before-read":l.beforeRead},null,8,["modelValue","after-read","before-read"])])),_:1}),(0,a.Wm)(m,{modelValue:o.nickname,"onUpdate:modelValue":t[1]||(t[1]=e=>o.nickname=e),label:"设置昵称",placeholder:"请输入昵称","input-align":"right",maxlength:"12"},null,8,["modelValue"]),(0,a.Wm)(m,{modelValue:o.sex,"onUpdate:modelValue":t[2]||(t[2]=e=>o.sex=e),label:"设置性别",placeholder:"请设置性别","input-align":"right",readonly:"",onClick:l.showPopup},null,8,["modelValue","onClick"]),(0,a.Wm)(m,{modelValue:o.signature,"onUpdate:modelValue":t[3]||(t[3]=e=>o.signature=e),label:"设置签名",placeholder:"请输入签名",rows:"1",autosize:"",type:"textarea"},null,8,["modelValue"]),(0,a.Wm)(h,{show:o.show,"onUpdate:show":t[4]||(t[4]=e=>o.show=e),position:"bottom",round:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{title:"性别修改",columns:o.columns,onConfirm:l.onConfirm,onCancel:l.hidden,"item-height":".7rem","visible-item-count":"5"},null,8,["columns","onConfirm","onCancel"])])),_:1},8,["show"])])),_:1})])}var Ll={name:"ProfileEdit",inject:["avatarGet"],data(){return{src:"",sex:"",signature:"",nickname:"",show:!1,columns:["男","女"],fileList:[{url:this.$store.state.URL+"/images/avatar/cat.jpeg"}],avatar:0,avatarChanged:!1,avatarPath:""}},methods:{onClickLeft(){this.$router.back()},showPopup(){this.show=!0},hidden(){this.show=!1},onConfirm(e){this.sex=e,this.hidden()},afterRead(e){this.avatar=e,this.avatarChanged=!0},beforeRead(e){return"image/jpeg"===e.type||"image/png"===e.type||"image/webp"===e.type||((0,n.F)("格式不支持"),!1)},async save(){if(0===this.fileList.length||""===this.nickname)n.F.fail("信息不全");else{const e=n.F.loading({message:"提交中...",forbidClick:!0,duration:0,overlay:!0});if(!0===this.avatarChanged){const e=new FormData;console.log(this.avatar.file),e.append("avatar",this.avatar.file),await this.$axios.post("avatarUpload",e).then((e=>{this.avatarPath=e}))}const t={avatarPath:this.avatarPath,nickname:this.nickname,signature:this.signature,sex:this.sex,userId:this.$store.state.user.userId};this.$axios.get("userDataUpdate",{params:t}).then((t=>{console.log("修改了"+t),e.clear(),n.F.success({message:"提交成功",forbidClick:!0,onClose:()=>{this.$router.replace("/my")}})}))}}},mounted(){const e={userId:this.$store.state.user.userId};this.$axios.get("userDataShow",{params:e}).then((e=>{this.fileList[0].url=this.avatarGet(e.avatar),this.nickname=e.nickname,this.signature=e.signature,this.sex=e.sex}))}};const Al=(0,k.Z)(Ll,[["render",_l],["__scopeId","data-v-1387086b"]]);var Wl=Al;const Sl={class:"draft wrapper pt"};function Dl(e,t,s,i,o,l){const n=(0,a.up)("van-nav-bar"),r=(0,a.up)("DraftList");return(0,a.wg)(),(0,a.iD)("div",Sl,[(0,a.Wm)(n,{title:"草稿箱","left-arrow":"",fixed:"",onClickLeft:l.onClickLeft},null,8,["onClickLeft"]),(0,a.Wm)(r)])}const $l=e=>((0,a.dD)("data-v-76f13ecf"),e=e(),(0,a.Cn)(),e),Ul={class:"draftList wrapper"},zl=(0,a.Uk)("加载中..."),Fl={key:2},Vl=["onClick"],jl={class:"top p6"},Bl={class:"type"},Rl={class:"time p6g"},ql={class:"mid p5"},Hl={class:"title"},Nl={class:"bottom p5g"},Gl={class:"content van-multi-ellipsis--l3"},Tl=$l((()=>(0,a._)("u",null,"我有问题?",-1))),Ml=$l((()=>(0,a._)("p",null,"问:如何删除草稿?",-1))),El=$l((()=>(0,a._)("ol",null,[(0,a._)("li",null,"答:右滑删除")],-1)));function Pl(e,t,s,i,o,l){const n=(0,a.up)("van-loading"),r=(0,a.up)("van-empty"),c=(0,a.up)("van-button"),d=(0,a.up)("van-swipe-cell"),m=(0,a.up)("van-collapse-item"),u=(0,a.up)("van-collapse");return(0,a.wg)(),(0,a.iD)("div",Ul,[o.loading?((0,a.wg)(),(0,a.j4)(n,{key:0,vertical:""},{default:(0,a.w5)((()=>[zl])),_:1})):o.list.length?((0,a.wg)(),(0,a.iD)("div",Fl,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.list,(e=>((0,a.wg)(),(0,a.j4)(d,{key:e.createdAt},{right:(0,a.w5)((()=>[(0,a.Wm)(c,{square:"",type:"danger",text:"删除",style:{height:"100%"},onClick:t=>l.delDraft(e.createdAt)},null,8,["onClick"])])),default:(0,a.w5)((()=>[(0,a._)("div",{class:"item",style:{"margin-top":"5px",background:"white"},onClick:t=>l.draftEdit(e.cover,e.createdAt)},[(0,a._)("div",jl,[(0,a._)("span",Bl,(0,$.zw)(e.cover?"投稿":"帖子"),1),(0,a._)("span",Rl,"上次编辑 "+(0,$.zw)(l.before(+e.updatedAt)),1)]),(0,a._)("div",ql,[(0,a._)("div",Hl,(0,$.zw)(""===e.title?"(无标题)":e.title),1)]),(0,a._)("div",Nl,[(0,a._)("div",Gl,(0,$.zw)(e.content),1)])],8,Vl)])),_:2},1024)))),128)),(0,a.Wm)(u,{modelValue:o.activeNames,"onUpdate:modelValue":t[0]||(t[0]=e=>o.activeNames=e),style:{"margin-top":".5rem"}},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{title:"",icon:"question","is-link":!1},{title:(0,a.w5)((()=>[Tl])),default:(0,a.w5)((()=>[Ml,El])),_:1})])),_:1},8,["modelValue"])])):((0,a.wg)(),(0,a.j4)(r,{key:1,description:"暂无草稿"}))])}var Yl={name:"DraftList",inject:["before"],props:{},data(){return{loading:!1,list:[],activeNames:[]}},methods:{draftEdit(e,t){e?this.$router.push({path:"/submit",query:{createdAt:t}}):this.$router.push({path:"/post",query:{createdAt:t}})},delDraft(e){r.V.confirm({title:"确认删除?"}).then((async()=>{n.F.loading({message:"删除中",overlay:!0,duration:0});for(let s in this.list)if(this.list[s].createdAt==e){this.list.splice(s,1);break}const t={list:this.list,userId:this.$store.state.user.userId};await this.$axios.post("draftUpdate",G().stringify(t)).then((e=>{console.log(e),n.F.clear(),n.F.success("删除成功!")}))})).catch((()=>{}))}},mounted(){const e={userId:this.$store.state.user.userId};this.$axios.get("draftListGet",{params:e}).then((e=>{console.log(e),this.list=e}))}};const Ol=(0,k.Z)(Yl,[["render",Pl],["__scopeId","data-v-76f13ecf"]]);var Ql=Ol,Kl={name:"DraftView",components:{DraftList:Ql},data(){return{}},methods:{onClickLeft(){this.$router.back()}},mounted(){}};const Zl=(0,k.Z)(Kl,[["render",Dl]]);var Jl=Zl;const Xl={class:"article wrapper pt"},en=(0,a.Uk)("恢复到上次阅读位置"),tn=(0,a.Uk)("加载中..."),sn={key:1,class:"bulk",id:"articleBulk",ref:"bulk"},an={class:"bottom"},on=(0,a.Uk)("上传文件"),ln={class:"option"},nn=(0,a.Uk)("发送");function rn(e,t,s,o,l,n){const r=(0,a.up)("van-icon"),c=(0,a.up)("van-nav-bar"),d=(0,a.up)("van-button"),m=(0,a.up)("van-loading"),u=(0,a.up)("ArticleItem"),h=(0,a.up)("Comment"),p=(0,a.up)("van-field"),g=(0,a.up)("van-grid-item"),f=(0,a.up)("van-grid"),w=(0,a.up)("van-cell"),v=(0,a.up)("van-uploader"),k=(0,a.up)("van-popup"),y=(0,a.up)("CollectBox");return(0,a.wg)(),(0,a.iD)("div",Xl,[(0,a.Wm)(c,{"left-arrow":"",onClickLeft:n.onClickLeft,fixed:"",title:"文章详情",onClickRight:t[0]||(t[0]=e=>n.actionShow(l.articleId))},{right:(0,a.w5)((()=>[(0,a.Wm)(r,{name:"ellipsis",size:"18"})])),_:1},8,["onClickLeft"]),(0,a.Wm)(i.uT,{name:"van-slide-right",class:"recover"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(d,{size:"mini",round:"","icon-position":"right",icon:"arrow",onClick:n.recover,color:"black"},{default:(0,a.w5)((()=>[en])),_:1},8,["onClick"]),[[i.F8,l.visible]])])),_:1}),l.loading?((0,a.wg)(),(0,a.j4)(m,{key:0,size:"1rem",vertical:"",style:{"padding-top":"1rem"}},{default:(0,a.w5)((()=>[tn])),_:1})):(0,a.kq)("",!0),l.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",sn,[0!==l.articleId&&l.past?((0,a.wg)(),(0,a.j4)(u,{ArticleId:l.articleId,Admin:l.admin,key:l.key,ref:"article",onReload:n.articleReload},null,8,["ArticleId","Admin","onReload"])):(0,a.kq)("",!0),0!==l.articleId&&l.past?((0,a.wg)(),(0,a.j4)(h,{ArticleId:l.articleId,TempComment:l.tempComment,ref:"comment",TempImages:l.readImages,key:l.commentKey,onReload:n.commentReload},null,8,["ArticleId","TempComment","TempImages","onReload"])):(0,a.kq)("",!0)],512)),(0,a._)("div",an,[(0,a.Wm)(w,{icon:"edit",center:"","title-style":"flex:1",border:!1},{title:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:l.message,"onUpdate:modelValue":t[1]||(t[1]=e=>l.message=e),placeholder:"发布评论("+l.comCount+")",onFocus:n.commentFocus},null,8,["modelValue","placeholder","onFocus"])])),value:(0,a.w5)((()=>[(0,a.Wm)(f,{border:!1,center:"","column-num":"3","icon-size":"0.5rem"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{icon:"star","icon-color":l.collectState?"#000":"",text:l.collectState?"已收藏":"收藏",onClick:n.collectIt},null,8,["icon-color","text","onClick"]),(0,a.Wm)(g,{icon:"good-job","icon-color":l.likeState?"#000":"",text:l.likeCount+"",onClick:n.like},null,8,["icon-color","text","onClick"]),(0,a.Wm)(g,{icon:"share",text:"分享",onClick:n.share},null,8,["onClick"])])),_:1})])),_:1})]),(0,a.Wm)(k,{show:l.commenting,"onUpdate:show":t[4]||(t[4]=e=>l.commenting=e),position:this.$store.state.setup&&this.$store.state.setup.system?"top":"bottom",class:"pop"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:l.message,"onUpdate:modelValue":t[2]||(t[2]=e=>l.message=e),rows:"2",autosize:"",type:"textarea",placeholder:"发布评论("+l.comCount+")",ref:"input"},null,8,["modelValue","placeholder"]),(0,a.wy)((0,a.Wm)(w,{center:"",border:!1,class:"imagesBox"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{modelValue:l.fileList,"onUpdate:modelValue":t[3]||(t[3]=e=>l.fileList=e),multiple:"",ref:"imagesSend","preview-size":"1.7rem","image-fit":"cover","after-read":n.afterRead,"before-delete":n.beforeDelete,"before-read":n.beforeRead},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{icon:"plus",type:"primary",class:"placeholder"},{default:(0,a.w5)((()=>[on])),_:1})])),_:1},8,["modelValue","after-read","before-delete","before-read"])])),_:1},512),[[i.F8,l.commenting]]),(0,a._)("div",ln,[(0,a.Wm)(d,{type:"primary",size:"small",color:"#000",onClick:n.commentSend},{default:(0,a.w5)((()=>[nn])),_:1},8,["onClick"]),(0,a.Wm)(r,{name:"photo-o",color:"grey",size:"0.5rem",style:{padding:"10px"},onClick:n.chooseFile},null,8,["onClick"]),(0,a.Wm)(r,{name:"smile-o",color:"grey",size:"0.5rem",style:{padding:"10px"},onMousedown:(0,i.iM)(n.developing,["prevent"])},null,8,["onMousedown"]),(0,a.Wm)(r,{name:"arrow-down",color:"grey",size:"0.5rem",style:{padding:"10px"},onClick:n.loseFocus},null,8,["onClick"])])])),_:1},8,["show","position"]),l.past?((0,a.wg)(),(0,a.j4)(y,{ref:"CollectBox",onHadCollected:n.hadCollected,articleId:l.articleId,key:l.key},null,8,["onHadCollected","articleId"])):(0,a.kq)("",!0)])}const cn={class:"CandR"},dn={class:"top"},mn={class:"p4"},un={class:"comments"},hn={key:0,class:"author"},pn={class:"avatarBox"},gn={class:"info"},fn={class:"p5b"},wn={class:"isAuthor p8"},vn={class:"p6g postTime"},kn={class:"like"},yn={class:"p5g"},bn=["onClick"],Cn={class:"message"},In={key:0,class:"imageBox"},xn={key:1,class:"reply p5-5"},_n=["onClick"],Ln={key:0,class:"replyContent"},An={class:"speaker"},Wn={class:"isAuthor p8"},Sn={class:"replyMessage"},Dn={key:0,class:"huifu"},$n={key:1},Un={class:"p6g"},zn={key:0,class:"replyBox tempReply"},Fn={class:"speaker"},Vn={class:"alignCenter"},jn={class:"isAuthor p9"},Bn={class:"replyMessage"},Rn={key:0,class:"huifu"},qn={key:1},Hn={class:"p6g"},Nn={class:"replyFrame"},Gn={class:"replyObj"},Tn={class:"p5g van-ellipsis"},Mn=(0,a.Uk)("发送 ");function En(e,t,s,o,l,n){const r=(0,a.up)("van-icon"),c=(0,a.up)("van-action-sheet"),d=(0,a.up)("van-image"),m=(0,a.up)("router-link"),u=(0,a.up)("van-button"),h=(0,a.up)("van-list"),p=(0,a.up)("van-field"),g=(0,a.up)("van-cell"),f=(0,a.up)("van-grid-item"),w=(0,a.up)("van-grid"),v=(0,a.up)("van-popup");return(0,a.wg)(),(0,a.iD)("div",cn,[(0,a._)("div",dn,[(0,a._)("p",mn,[(0,a._)("span",null,"评论 "+(0,$.zw)(l.comCount),1),(0,a.Wm)(r,{name:"sort",size:".32rem",color:"grey",onClick:t[0]||(t[0]=e=>l.sortActionShow=!0)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,$.zw)(l.sort),1)])),_:1})])]),(0,a.Wm)(c,{show:l.sortActionShow,"onUpdate:show":t[1]||(t[1]=e=>l.sortActionShow=e),actions:l.sortActions,onSelect:n.onSelect,"cancel-text":"取消","close-on-click-action":""},null,8,["show","actions","onSelect"]),(0,a._)("div",un,[(0,a.Wm)(h,{loading:l.loading,"onUpdate:loading":t[6]||(t[6]=e=>l.loading=e),finished:l.finished,"finished-text":"没有更多了",onLoad:n.onLoad},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.comments,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"commentItem",key:e.commentId},[""===e.userInfo.avatar||e.userInfo.avatar?((0,a.wg)(),(0,a.iD)("div",hn,[(0,a._)("div",pn,[(0,a.Wm)(m,{to:""},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{width:"1rem",height:"1rem",round:"",fit:"cover","lazy-load":"",src:n.avatarGet(e.userInfo.avatar)},null,8,["src"])])),_:2},1024)]),(0,a._)("div",gn,[(0,a.Wm)(m,{to:"/personal/"+e.userInfo.userId,class:"alignCenter"},{default:(0,a.w5)((()=>[(0,a._)("span",fn,(0,$.zw)(e.userInfo.nickname),1),(0,a._)("span",wn,(0,$.zw)(e.userInfo.userId===l.authorId?"作者":null),1)])),_:2},1032,["to"]),(0,a._)("p",vn,(0,$.zw)(n.before(+e.date)),1)]),(0,a._)("div",kn,[(0,a.Wm)(u,{size:"small",color:"transparent",onClick:t=>n.commentLike(e.commentId)},{default:(0,a.w5)((()=>[(0,a._)("span",yn,(0,$.zw)(e.like),1)])),icon:(0,a.w5)((()=>[(0,a.Wm)(r,{name:"good-job",color:n.likeState(e.commentId)},null,8,["color"])])),_:2},1032,["onClick"])])])):(0,a.kq)("",!0),(0,a._)("div",{class:"content p5",onClick:(0,i.iM)((t=>n.replying(e.commentId,e.userInfo.userId,e.userInfo.avatar,e.message,e.userInfo.nickname)),["stop"])},[(0,a._)("p",Cn,(0,$.zw)(e.message),1),e.images?((0,a.wg)(),(0,a.iD)("div",In,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.images,((t,s)=>((0,a.wg)(),(0,a.j4)(d,{width:"1.7rem",height:"1.7rem",fit:" cover",key:t,"lazy-load":"",src:t,radius:".08rem",onClick:(0,i.iM)((t=>n.imgPreview(e.images,s)),["stop"])},null,8,["src","onClick"])))),128))])):(0,a.kq)("",!0),e.reply&&e.reply.length||e.commentId===l.tempReply.commentId-0?((0,a.wg)(),(0,a.iD)("div",xn,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.reply,((s,o)=>((0,a.wg)(),(0,a.iD)("div",{class:"replyBox",key:s,style:(0,$.j5)({"padding-bottom":o<3?"0.2rem":0}),onClick:(0,i.iM)((t=>n.replying(e.commentId,s.speaker.id,s.speaker.avatar,s.replyMessage,s.speaker.nickname)),["stop"])},[(this.collapseId.indexOf(e.commentId)>-1?o>=0:o<3)?((0,a.wg)(),(0,a.iD)("div",Ln,[(0,a._)("p",An,[(0,a.Wm)(m,{to:"/personal/"+s.speaker.id,onClick:t[2]||(t[2]=(0,i.iM)((()=>{}),["stop"]))},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{width:".6rem",height:".6rem","lazy-load":"",round:"",fit:"cover",src:n.avatarGet(s.speaker.avatar)},null,8,["src"])])),_:2},1032,["to"]),(0,a._)("span",null,[(0,a.Wm)(m,{to:"/personal/"+s.speaker.id,class:"p5-5g alignCenter",onClick:t[3]||(t[3]=(0,i.iM)((()=>{}),["stop"]))},{default:(0,a.w5)((()=>[(0,a._)("span",null,(0,$.zw)(s.speaker.nickname),1),(0,a._)("span",Wn,(0,$.zw)(s.speaker.id===l.authorId?"作者":null),1)])),_:2},1032,["to"])])]),(0,a._)("p",Sn,[s.listener.id!==e.userInfo.userId?((0,a.wg)(),(0,a.iD)("span",Dn,"回复")):(0,a.kq)("",!0),s.listener.id!==e.userInfo.userId?((0,a.wg)(),(0,a.iD)("span",$n,[(0,a.Wm)(m,{to:"/personal/"+s.listener.id,class:"p5-5a"},{default:(0,a.w5)((()=>[(0,a.Uk)(" @"+(0,$.zw)(s.listener.nickname),1)])),_:2},1032,["to"])])):(0,a.kq)("",!0),(0,a._)("span",null,(0,$.zw)(s.replyMessage),1),(0,a._)("span",Un,(0,$.zw)(n.dayjs(s.date)),1)])])):(0,a.kq)("",!0),(0,a.wy)((0,a.Wm)(u,{type:"primary",block:"",icon:"arrow-down",size:"mini",onClick:(0,i.iM)((t=>n.unfold(e.commentId)),["stop"])},{default:(0,a.w5)((()=>[(0,a.Uk)("全部回复"+(0,$.zw)(e.reply.length),1)])),_:2},1032,["onClick"]),[[i.F8,!(this.collapseId.indexOf(e.commentId)>-1)&&3==o]])],12,_n)))),128)),e.commentId===l.tempReply.commentId-0?((0,a.wg)(),(0,a.iD)("div",zn,[(0,a._)("p",Fn,[(0,a.Wm)(m,{to:"/personal/"+l.tempReply.speaker.id,onClick:t[4]||(t[4]=(0,i.iM)((()=>{}),["stop"]))},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{width:".6rem",height:".6rem","lazy-load":"",round:"",fit:"cover",src:n.avatarGet(l.tempReply.speaker.avatar)},null,8,["src"])])),_:1},8,["to"]),(0,a._)("span",Vn,[(0,a.Wm)(m,{to:"/personal/"+l.tempReply.speaker.id,class:"p5-5g",onClick:t[5]||(t[5]=(0,i.iM)((()=>{}),["stop"]))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,$.zw)(l.tempReply.speaker.nickname)+" ",1),(0,a._)("span",jn,(0,$.zw)(l.tempReply.speaker.id===l.authorId?"作者":null),1)])),_:1},8,["to"])])]),(0,a._)("p",Bn,[l.tempReply.listener.id!==e.userInfo.userId?((0,a.wg)(),(0,a.iD)("span",Rn,"回复")):(0,a.kq)("",!0),l.tempReply.listener.id!==e.userInfo.userId?((0,a.wg)(),(0,a.iD)("span",qn,[(0,a.Wm)(m,{to:"/personal/"+l.tempReply.listener.id,class:"p5-5a"},{default:(0,a.w5)((()=>[(0,a.Uk)(" @"+(0,$.zw)(l.tempReply.listener.nickname),1)])),_:1},8,["to"])])):(0,a.kq)("",!0),(0,a._)("span",null,(0,$.zw)(l.tempReply.replyMessage),1),(0,a._)("span",Hn,(0,$.zw)(n.dayjs(l.tempReply.date)),1)])])):(0,a.kq)("",!0)])):(0,a.kq)("",!0)],8,bn)])))),128))])),_:1},8,["loading","finished","onLoad"])]),(0,a.Wm)(v,{show:l.show,"onUpdate:show":t[8]||(t[8]=e=>l.show=e),position:this.$store.state.setup&&this.$store.state.setup.system?"top":"bottom"},{default:(0,a.w5)((()=>[(0,a._)("div",Nn,[(0,a.Wm)(g,{center:"","title-style":"flex:1",border:!1},{default:(0,a.w5)((()=>[(0,a._)("div",Gn,[(0,a.Wm)(d,{width:"0.8rem",height:"0.8rem",round:"",fit:"cover","lazy-load":"",src:n.avatarGet(l.replyObj.avatar)},null,8,["src"]),(0,a._)("span",Tn,(0,$.zw)(l.replyObj.message),1)]),(0,a.Wm)(p,{modelValue:l.replyMessage,"onUpdate:modelValue":t[7]||(t[7]=e=>l.replyMessage=e),rows:"3",autosize:"",type:"textarea",placeholder:"回复 @"+l.replyObj.nickname,ref:"input"},null,8,["modelValue","placeholder"])])),_:1}),(0,a.Wm)(g,{center:""},{title:(0,a.w5)((()=>[])),value:(0,a.w5)((()=>[(0,a.Wm)(w,{border:!1,center:"","column-num":"3","icon-size":"0.5rem"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{icon:"arrow-down",onClick:n.loseFocus},null,8,["onClick"]),(0,a.Wm)(f,{icon:"smile-o",onMousedown:(0,i.iM)(n.developing,["prevent"])},null,8,["onMousedown"]),(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{type:"primary",size:"small",color:"#000",onClick:n.replySend},{default:(0,a.w5)((()=>[Mn])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])])),_:1},8,["show","position"])])}var Pn={name:"CommentReply",inject:["before","isExistChecked","developing","avatarGet"],props:{ArticleId:{type:Number},TempComment:{type:Object},TempImages:{type:Array}},data(){return{articleId:this.ArticleId,comments:[],show:!1,replyObj:{},replyMessage:"",tempComment:this.TempComment,comCount:0,authorId:0,tempReply:{},collapseId:[],content:[],commentState:{},exist:!0,loading:!1,finished:!1,size:this.$store.state.size,skip:0,sortActionShow:!1,sortActions:[{name:"热门",color:"grey",subname:"最热在前"},{name:"正序",color:"grey",subname:"最早在前"},{name:"倒序",color:"black",subname:"最新在前"}],sort:"倒序"}},methods:{onSelect(e){switch(e.name){case"热门":this.comments.sort(((e,t)=>t.like-e.like));break;case"正序":this.comments.sort(((e,t)=>+e.date-+t.date));break;case"倒序":this.comments.sort(((e,t)=>+t.date-+e.date));break}this.sortActions.forEach((t=>{t.name===e.name?(this.sort=e.name,t.color="black"):t.color="grey"}))},likeState(e){if(this.commentState.commentLikedId)return-1===this.commentState.commentLikedId.indexOf(e)?"grey":"black"},async commentLike(e){const t=await this.isExistChecked(this.articleId);if(t)if(this.$store.state.user){let t;-1===this.commentState.commentLikedId.indexOf(e)?(this.commentState.commentLikedId.push(e),t="plus"):(this.commentState.commentLikedId=this.commentState.commentLikedId.filter((t=>t!==e)),t="minus"),this.exist?this.content=this.content.map((e=>(e.articleId===this.articleId&&(e.commentLikedId=[...this.commentState.commentLikedId]),e))):(this.content.push(this.commentState),this.exist=!0);const s={articleId:this.articleId,userId:this.$store.state.user.userId,content:this.content,option:t,commentId:e};await this.$axios.get("comeLikedIdUpdate",{params:s}),"plus"===t?this.comments.forEach((t=>{t.commentId===e&&t.like++})):this.comments.forEach((t=>{t.commentId===e&&t.like--}))}else this.loginState()},loginState(){r.V.confirm({title:"未登录",message:"你必须要登录才能使用此功能，是否前去登录?"}).then((()=>{this.$router.replace("/login")})).catch((()=>{}))},unfold(e){this.collapseId.push(e)},dayjs(e){e-=0;const t=h(e),s=h().valueOf(),i=t.diff(s,"day",!0);return i<=-7?h(e).format("YYYY/MM/DD"):h(e).fromNow()},imgPreview(e,t){(0,We.e)({images:e,startPosition:t})},replying(e,t,s,i,a){this.commentId=e,this.listener=t,this.replyObj.avatar=s,this.replyObj.message=i,this.replyObj.nickname=a,this.$nextTick((()=>{this.show=!0,this.$nextTick((()=>{this.$refs.input.focus()}))}))},loseFocus(){this.$refs.input.blur()},async replySend(){const e=await this.isExistChecked(this.articleId);if(e)if(this.$store.state.user){if(""===this.replyMessage)return void(0,n.F)("回复内容不能为空！");if(this.tempReply.commentId)return void(0,n.F)("你说话太快啦，休息一下吧！");let e={articleId:this.articleId,commentId:this.commentId,speaker:this.$store.state.user.userId,listener:this.listener,replyMessage:this.replyMessage,repliedMessage:this.replyObj.message,date:Date.now()},t=G().stringify(e);this.$axios.post("addReply",t).then((e=>{this.tempReply=e,n.F.success("回复成功！"),console.log("回复的内容：",e),this.replyMessage="",this.show=!1,this.unfold(this.commentId)}))}else this.loginState()},async onLoad(){const e={articleId:this.articleId,skip:this.skip,size:this.size};await this.$axios.get("getCom",{params:e}).then((e=>{setTimeout((()=>{this.comCount=e[2],e[0]=e[0].map((e=>(e.images&&(e.images=e.images.map((e=>(e=this.$store.state.URL+"upload/commentImgs/"+e,e)))),e))),this.comments=[...this.comments,...e[0]],this.loading=!1,this.skip=this.skip+this.size,e[0].length<this.size&&(this.finished=!0)}),100),this.authorId=e[1]}))}},mounted(){if(this.$store.state.user){const e={userId:this.$store.state.user.userId,articleId:this.articleId};this.$axios.get("articleState",{params:e}).then((e=>{this.content=e[3].concat();let t=[];e[3].forEach((e=>{e.articleId===this.articleId&&t.push(e)})),t.length?(this.commentState={...t[0]},this.exist=!0):(this.exist=!1,this.commentState={articleId:this.articleId,commentLikedId:[]})}))}else this.commentState={articleId:this.articleId,commentLikedId:[]}},watch:{TempComment(e){this.tempComment=e,this.tempComment.usrInfo&&(this.comCount=this.comCount+1)}},computed:{tempImages(){return this.TempImages}},updated(){this.$emit("reload")}};const Yn=(0,k.Z)(Pn,[["render",En],["__scopeId","data-v-e7cb1c10"]]);var On=Yn;const Qn={class:"collectBox"};function Kn(e,t,s,i,o,l){const n=(0,a.up)("van-action-sheet"),r=(0,a.up)("van-field"),c=(0,a.up)("van-dialog");return(0,a.wg)(),(0,a.iD)("div",Qn,[(0,a.Wm)(n,{show:o.actionsShow,"onUpdate:show":t[0]||(t[0]=e=>o.actionsShow=e),"cancel-text":"取消",title:"收藏内容",actions:l.actions,"close-on-click-action":"",onSelect:l.onSelect},null,8,["show","actions","onSelect"]),(0,a.Wm)(c,{show:o.dialogShow,"onUpdate:show":t[2]||(t[2]=e=>o.dialogShow=e),title:o.createCollect,"show-cancel-button":"",theme:"round-button","confirm-button-color":"#000","confirm-button-text":"创建","cancel-button-color":"grey",onConfirm:l.createConfirm},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:o.cbTitle,"onUpdate:modelValue":t[1]||(t[1]=e=>o.cbTitle=e),placeholder:"收藏夹名字(8字内)",required:"",size:"large",maxlength:"8","input-align":"center"},null,8,["modelValue"])])),_:1},8,["show","title","onConfirm"])])}var Zn={name:"postList",props:{articleId:{type:Number}},data(){return{actionsShow:!1,createCollect:"创建收藏夹",dialogShow:!1,collectBox:[],cbTitle:""}},methods:{async createConfirm(){if(""===this.cbTitle)return void(0,n.F)("收藏夹名不能为空！");let e={name:this.cbTitle,content:[]},t=this.actions.filter((e=>e.name===this.cbTitle));0===t.length?(this.collectBox=[...this.collectBox,e],await this.collectUpdate(this.collectBox),this.actionsShow=!0):(0,n.F)("同名收藏夹已存在！")},async onSelect(e){e.name===this.createCollect?this.dialogShow=!0:this.articleId?(this.collectBox=this.collectBox.map((t=>(t.name===e.name&&t.content.push(this.articleId),t))),await this.collectUpdate(this.collectBox),this.$emit("hadCollected",!0),(0,n.F)("收藏成功！")):this.$emit("move",e.name)},async remove(e){this.collectBox=this.collectBox.map((t=>(t.content.indexOf(e)>-1&&(t.content=t.content.filter((t=>t!==e))),t))),this.$emit("hadCollected",!1),await this.collectUpdate(this.collectBox),(0,n.F)("取消收藏成功！")},async collectUpdate(e){const t={userId:this.$store.state.user.userId,actions:e};await this.$axios.get("collectUpdate",{params:t}).then((e=>{console.log(e)}))},collectBoxGet(){const e={userId:this.$store.state.user.userId};this.$axios.get("userDataShow",{params:e}).then((e=>{this.collectBox=e.collects.collectBox}))}},mounted(){this.$store.state.user&&this.collectBoxGet()},computed:{actions(){const e={name:this.createCollect,subname:"创建新的收藏夹"};return[...this.collectBox,e]}},updated(){}};const Jn=(0,k.Z)(Zn,[["render",Kn]]);var Xn=Jn,er={inject:["reload","isExistChecked","share","actionShow","developing"],name:"ArticleHome",components:{ArticleItem:$e,Comment:On,CollectBox:Xn},data(){return{loading:!0,logined:!1,scrollLocation:0,articleId:0,admin:!1,message:"",commenting:!1,fileList:[],commentImgs:[],tempComment:{},readImages:[],deleteImage:"",imageName:[],collectState:!1,likeState:!1,likeCount:0,likedId:[],myHistory:[],mounted:!1,scrollTop:0,visible:!1,key:1,commentKey:1,comCount:0,past:!1}},methods:{async like(){if(this.past=await this.isExistChecked(this.articleId),this.past)if(this.logined)if(!1===this.likeState){this.likedId.push(this.articleId);const e={articleId:this.articleId,userId:this.$store.state.user.userId,likedId:this.likedId,option:"plus"};await this.$axios.get("artLikedIdUpdate",{params:e}),this.likeCount++,this.likeState=!0,(0,n.F)("点赞成功!")}else{this.likedId=this.likedId.filter((e=>e!==this.articleId)),console.log(this.likedId);const e={articleId:this.articleId,userId:this.$store.state.user.userId,likedId:this.likedId,option:"minus"};await this.$axios.get("artLikedIdUpdate",{params:e}),this.likeCount--,this.likeState=!1,(0,n.F)("取消点赞!")}else this.loginState()},loginState(){r.V.confirm({title:"未登录",message:"你必须要登录才能使用此功能，是否前去登录?"}).then((()=>{this.$router.replace("/login")})).catch((()=>{}))},collectIt(){this.logined?!1===this.collectState?this.$refs.CollectBox.actionsShow=!0:this.$refs.CollectBox.remove(this.articleId):this.loginState()},hadCollected(e){this.collectState=e},async historyGetUpdate(){const e=h().valueOf(),t={userId:this.$store.state.user.userId};await this.$axios.get("historyGet",{params:t}).then((e=>{this.myHistory=e[0]}));const s={articleId:this.articleId,date:e};this.myHistory=this.myHistory.filter((e=>e.articleId!==this.articleId)),this.myHistory.unshift(s);const i={userId:this.$store.state.user.userId,arr:this.myHistory};await this.$axios.get("historyUpdate",{params:i})},chooseFile(){this.$refs.imagesSend.chooseFile()},onClickLeft(){this.$router.back()},afterRead(e){let t=this;this.commentImgs.push(e);let s=new FileReader;s.readAsDataURL(e.file),s.onloadend=function(){t.readImages.push(this.result)}},beforeDelete(e){let t=this,s=new FileReader;return s.readAsDataURL(e.file),this.commentImgs.splice(this.commentImgs.indexOf(e),1),this.imageName.splice(this.imageName.indexOf(e.file.name),1),console.log("删除后得图片名数组:",this.imageName),console.log("要提交到后台得图片：",this.commentImgs),s.onloadend=function(){t.deleteImage=this.result},!0},beforeRead(e){return-1!==this.$store.state.imageType.indexOf(e.type)?-1!==this.imageName.indexOf(e.name)?(n.F.fail("重复图片！"),!1):this.imageName.length>=9?((0,n.F)("最多9张图片！"),!1):e.length>1?((0,n.F)("每次只能选择一张图片！"),!1):(this.imageName.push(e.name),console.log("读取通过后得图片名数组：",this.imageName),!0):((0,n.F)("格式不支持或选择了多张图片"),!1)},commentFocus(){this.logined?(this.tempComment.userInfo&&(this.tempComment={},this.readImages=[]),this.commenting=!0,this.$nextTick((()=>{this.$refs.input.focus()}))):this.loginState()},loseFocus(){this.$refs.input.blur()},async commentSend(){if(this.past=await this.isExistChecked(this.articleId),this.past)if(""===this.message)(0,n.F)("不能发送空的内容！");else{this.scrollTop=document.querySelector("#articleBulk").scrollTop;let e=n.F.loading({forbidClick:!0,message:"提交中",duration:0}),t=[];if(0!==this.commentImgs.length){const e=new FormData;this.commentImgs.map((t=>{e.append("comImgs",t.file)})),await this.$axios.post("comImgsUpload",e).then((e=>{console.log("返回的图片名为:",e),t=e}))}let s={articleId:this.articleId,userInfo:this.$store.state.user.userId,message:this.message,date:Date.now(),images:t,like:0};const i=G().stringify(s);this.$axios.post("addCom",i).then((t=>{this.tempComment=t,e.clear(),this.message="",this.loseFocus(),this.commentKey=this.reload(),n.F.success({message:"评论成功！",forbidClick:!0,overlay:!0,onClose:()=>{this.$refs.bulk.scrollTop=this.articleReload}})}))}},articleReload(e){this.articleReload=e},commentReload(){this.loaded(),this.comCount=this.$refs.comment.comCount},loaded(){!0===this.loading&&setTimeout((()=>{this.loading=!1}),100)},scrollRecover(){let e=this.$store.state.scrollLocation;e=e.filter((e=>{if(e.id===this.articleId)return this.scrollTop=e.scrollTop,e})),e.length&&setTimeout((()=>{this.visible=!0}),500),setTimeout((()=>{this.visible=!1}),2500)},recover(){document.querySelector("#bulk").scrollTop=this.scrollTop,this.visible=!1},push(){if(!history.state.title){let e={title:"title",url:"http://www.maomao365.com"};history.pushState(e,"title")}},async dataGet(){const e=this.$route.path.split("/");if(this.articleId=parseInt(e[e.length-1]),this.past=await this.isExistChecked(this.articleId),this.past){if(this.$store.state.user){this.logined=!0;const e={userId:this.$store.state.user.userId,articleId:this.articleId};await this.$axios.get("articleState",{params:e}).then((e=>{this.likedId=e[1],this.likeCount=e[2],e[1].indexOf(this.articleId)>-1&&(this.likeState=!0);let t=[];e[0].forEach((e=>{t=[...t,...e.content]})),t.indexOf(this.articleId)>-1&&(this.collectState=!0)})),await this.historyGetUpdate()}this.loaded()}},fun(){let e=this.$store.state.scrollLocation;0!==e&&e||(e=[]);try{let t=!1;const s={id:this.articleId,scrollTop:this.scrollTop};this.scrollTop>=300?(console.log("arr:",e),e.forEach((e=>{e.id===s.id&&(e.scrollTop=s.scrollTop,t=!0)}))):(console.log("arr:",e),e=e.filter((e=>e.id!==s.id)),t=!0),t||e.push(s),this.$store.commit("setScroll",e)}catch(t){alert.log(t)}}},mounted(){this.push(),this.mounted=!0,this.dataGet()},activated(){this.mounted?this.mounted=!1:this.$store.state.isBack?(console.log("回滚！"),document.querySelector("#articleBulk").scrollTop=this.scrollTop):(console.log("刷新！"),this.push(),Object.assign(this.$data,this.$options.data()),this.dataGet(),this.key=this.reload(),this.commentKey=this.reload())},deactivated(){document.querySelector("#articleBulk")&&(this.scrollTop=document.querySelector("#articleBulk").scrollTop)},watch:{deleteImage(e){this.readImages.splice(e,1)}}};const tr=(0,k.Z)(er,[["render",rn],["__scopeId","data-v-3a4d15a0"]]);var sr=tr;const ir=e=>((0,a.dD)("data-v-81f6d7dc"),e=e(),(0,a.Cn)(),e),ar={class:"Personal wrapper pbt"},or={class:"logined bulk",id:"personalBulk"},lr={class:"content"},nr={class:"imgbox"},rr={class:"text"},cr={class:"p3"},dr={class:"p6g"},mr={class:""},ur={class:"p2"},hr=ir((()=>(0,a._)("p",{class:"p5g"},"关注",-1))),pr={class:"p2"},gr=ir((()=>(0,a._)("p",{class:"p5g"},"粉丝",-1))),fr={class:"p2"},wr=ir((()=>(0,a._)("p",{class:"p5g"},"获赞",-1))),vr={class:"bottomBtn"},kr=(0,a.Uk)("私信Ta");function yr(e,t,s,o,l,n){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-image"),d=(0,a.up)("van-icon"),m=(0,a.up)("van-grid-item"),u=(0,a.up)("van-grid"),h=(0,a.up)("ListCell"),p=(0,a.up)("van-button"),g=(0,a.up)("van-col"),f=(0,a.up)("van-row");return(0,a.wg)(),(0,a.iD)("div",ar,[(0,a.Wm)(r,{title:"动态","left-arrow":"",onClickLeft:n.onClickLeft,fixed:""},null,8,["onClickLeft"]),(0,a._)("div",or,[(0,a._)("div",null,[(0,a._)("div",lr,[(0,a._)("div",nr,[(0,a.Wm)(c,{round:"",width:"2rem",height:"2rem",src:n.avatarGet(l.user.avatar),fit:"cover"},null,8,["src"])]),(0,a._)("div",rr,[(0,a._)("p",cr,[(0,a.Uk)((0,$.zw)(l.user.nickname)+" ",1),(0,a.wy)((0,a.Wm)(d,{"class-prefix":"iconfont icon-nan",size:"0.5rem",color:"blue"},null,512),[[i.F8,"男"===l.user.sex]]),(0,a.wy)((0,a.Wm)(d,{"class-prefix":"iconfont icon-nv",size:"0.5rem",color:"pink"},null,512),[[i.F8,"女"===l.user.sex]])]),(0,a._)("p",dr,(0,$.zw)(l.user.signature),1)])])]),(0,a._)("div",mr,[(0,a.Wm)(u,{clickable:"","column-num":3,border:!1},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{to:"/subscribe/"+l.userId+"/0"},{default:(0,a.w5)((()=>[(0,a._)("p",ur,(0,$.zw)(l.follow.length),1),hr])),_:1},8,["to"]),(0,a.Wm)(m,{to:"/subscribe/"+l.userId+"/1"},{default:(0,a.w5)((()=>[(0,a._)("p",pr,(0,$.zw)(l.fan.length),1),gr])),_:1},8,["to"]),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a._)("p",fr,(0,$.zw)(l.user.likeCount),1),wr])),_:1})])),_:1})]),l.inited?((0,a.wg)(),(0,a.j4)(h,{submitIdArr:l.submit,postIdArr:l.post,commentArr:l.comment,userId:l.userId-0,key:l.key,onRefresh:n.refresh},null,8,["submitIdArr","postIdArr","commentArr","userId","onRefresh"])):(0,a.kq)("",!0),(0,a._)("div",vr,[(0,a.Wm)(f,{gutter:"40",justify:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{span:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{type:"default",block:"",to:/directMessage/+l.userId,disabled:!this.$store.state.user||this.$store.state.user.userId==l.userId},{default:(0,a.w5)((()=>[kr])),_:1},8,["to","disabled"])])),_:1}),(0,a.Wm)(g,{span:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{block:"",color:l.subscribeState?"grey":"#000",icon:l.subscribeState?"success":"plus",onClick:t[0]||(t[0]=e=>n.subscribe(l.user.userId)),disabled:!this.$store.state.user||this.$store.state.user.userId==l.userId},{default:(0,a.w5)((()=>[(0,a.Uk)((0,$.zw)(l.subscribeState?"已关注":"关注Ta"),1)])),_:1},8,["color","icon","disabled"])])),_:1})])),_:1})])])])}var br={name:"PersonalView",inject:["reload","avatarGet"],components:{ListCell:ao},data(){return{active:0,user:0,fan:[],follow:[],submit:[],post:[],comment:[],userId:0,inited:!1,subscribeState:!1,subscribeList:[],fanList:[],mounted:!1,key:1,scrollTop:0}},mounted(){this.push(),this.mounted=!0,this.dataGet()},methods:{async refresh(e,t){await this.dataShow(),t(e)},push(){if(!history.state.title){let e={title:"title",url:"http://www.maomao365.com"};history.pushState(e,"title")}},async dataShow(){let e=this.$route.path.split("/");this.userId=e[e.length-1];const t={userId:this.userId};await this.$axios.get("userDataShow",{params:t}).then((e=>{this.user=e,this.fan=e.fans.fan,this.follow=e.follows.follow,this.submit=e.submits.submit.reverse(),this.post=e.posts.post.reverse(),this.comment=e.comments.comment.reverse(),this.inited=!0}))},async targetFansGet(e){const t={userId:e};await this.$axios.get("subscribeListGet",{params:t}).then((e=>{this.fanList=e[1]}))},async subscribeGet(){const e={userId:this.$store.state.user.userId};await this.$axios.get("subscribeListGet",{params:e}).then((e=>{this.subscribeList=e[0]})),await this.targetFansGet(this.userId),this.fanList.indexOf(this.$store.state.user.userId+"")>-1&&(this.subscribeState=!0)},async dataGet(){await this.dataShow(),this.$store.state.user&&this.subscribeGet()},subscribeUpdate(){const e={fan:this.fanList,follow:this.subscribeList,userId:this.$store.state.user.userId,authorId:this.userId};this.$axios.get("subscribeUpdate",{params:e})},subscribe(e){this.$store.state.user?this.subscribeState?r.V.confirm({title:"取消关注"}).then((()=>{this.subscribeList=this.subscribeList.filter((t=>t-0!==e)),this.subscribeState=!1,this.fanList=this.fanList.filter((e=>e-0!=this.$store.state.user.userId)),this.subscribeUpdate()})).catch((()=>{})):(this.subscribeList.push(e),this.fanList.push(this.$store.state.user.userId),this.subscribeState=!0,this.subscribeUpdate()):this.loginState()},loginState(){r.V.confirm({title:"未登录",message:"你必须要登录才能使用此功能，是否前去登录?"}).then((()=>{this.$router.replace("/login")})).catch((()=>{}))},onClickLeft(){this.$router.back()}},activated(){this.mounted?this.mounted=!1:this.$store.state.isBack?(console.log("回滚！"),this.$nextTick((()=>{console.log(this.scrollTop),document.querySelector("#personalBulk").scrollTop=this.scrollTop}))):(console.log("刷新！"),this.push(),Object.assign(this.$data,this.$options.data()),this.dataGet(),this.key=this.reload())},deactivated(){this.scrollTop=document.querySelector("#personalBulk").scrollTop}};const Cr=(0,k.Z)(br,[["render",yr],["__scopeId","data-v-81f6d7dc"]]);var Ir=Cr;const xr={class:"myCollect wrapper pt"},_r=(0,a.Uk)("创建收藏夹 ");function Lr(e,t,s,i,o,l){const n=(0,a.up)("van-nav-bar"),r=(0,a.up)("van-cell"),c=(0,a.up)("van-cell-group"),d=(0,a.up)("van-button"),m=(0,a.up)("van-field"),u=(0,a.up)("van-dialog");return(0,a.wg)(),(0,a.iD)("div",xr,[(0,a.Wm)(n,{title:"我的收藏","left-arrow":"",onClickLeft:l.onClickLeft,fixed:""},null,8,["onClickLeft"]),(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.collectBox,(e=>((0,a.wg)(),(0,a.j4)(r,{center:"",title:e.name,label:e.content.length+"篇","is-link":"",key:e,to:{path:"/collectDetail",query:{boxName:e.name}}},null,8,["title","label","to"])))),128))])),_:1}),(0,a.Wm)(d,{type:"primary",block:"",icon:"plus",color:"black",style:{"margin-top":"1rem"},onClick:l.createCollect},{default:(0,a.w5)((()=>[_r])),_:1},8,["onClick"]),(0,a.Wm)(u,{show:o.dialogShow,"onUpdate:show":t[1]||(t[1]=e=>o.dialogShow=e),title:"创建收藏夹","show-cancel-button":"",theme:"round-button","confirm-button-color":"#000","confirm-button-text":"创建","cancel-button-color":"grey",onConfirm:l.createConfirm},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:o.cbTitle,"onUpdate:modelValue":t[0]||(t[0]=e=>o.cbTitle=e),placeholder:"收藏夹名字(8字内)",required:"",size:"large",maxlength:"8","input-align":"center"},null,8,["modelValue"])])),_:1},8,["show","onConfirm"])])}var Ar={name:"MyCollect",data(){return{collectBox:[],dialogShow:!1,cbTitle:""}},methods:{onClickLeft(){this.$router.back()},createCollect(){this.dialogShow=!0},createConfirm(){if(""===this.cbTitle)return void(0,n.F)("收藏夹名不能为空！");let e={name:this.cbTitle,content:[]},t=this.collectBox.filter((e=>e.name===this.cbTitle));if(0!==t.length)return void(0,n.F)("同名收藏夹已存在！");this.collectBox.splice(this.collectBox.length,0,e);const s={actions:this.collectBox,userId:this.$store.state.user.userId};this.$axios.get("collectUpdate",{params:s})}},mounted(){console.log("mounted");const e={userId:this.$store.state.user.userId};this.$axios("articleState",{params:e}).then((e=>{console.log("该用户的收藏夹为：",e[0]),this.collectBox=e[0]}))},activated(){console.log("收藏夹缓存")}};const Wr=(0,k.Z)(Ar,[["render",Lr]]);var Sr=Wr;const Dr={class:"collectDetail wrapper pt"},$r=(0,a.Uk)("加载中..."),Ur={class:"bottomBtn"},zr=(0,a.Uk)("移动"),Fr=(0,a.Uk)("删除");function Vr(e,t,s,o,l,n){const r=(0,a.up)("van-icon"),c=(0,a.up)("van-nav-bar"),d=(0,a.up)("van-loading"),m=(0,a.up)("van-empty"),u=(0,a.up)("PostList"),h=(0,a.up)("van-tab"),p=(0,a.up)("van-tabs"),g=(0,a.up)("van-action-sheet"),f=(0,a.up)("van-field"),w=(0,a.up)("van-dialog"),v=(0,a.up)("CollectBox"),k=(0,a.up)("van-button"),y=(0,a.up)("van-col"),b=(0,a.up)("van-row");return(0,a.wg)(),(0,a.iD)("div",Dr,[(0,a.Wm)(c,{title:l.boxName,"left-arrow":"",onClickLeft:n.onClickLeft,fixed:""},{right:(0,a.w5)((()=>[l.isCollect?((0,a.wg)(),(0,a.iD)("span",{key:1,onClick:t[1]||(t[1]=e=>this.isCollect=!1)},"完成")):((0,a.wg)(),(0,a.j4)(r,{key:0,name:"weapp-nav",size:"18",color:"black",onClick:t[0]||(t[0]=e=>this.show=!0)}))])),_:1},8,["title","onClickLeft"]),(0,a.Wm)(p,{active:l.active,"onUpdate:active":t[2]||(t[2]=e=>l.active=e),swipeable:"",shrink:"",class:"bulk",id:"collectDetailBulk"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{title:"收藏顺序"},{default:(0,a.w5)((()=>[l.loading?((0,a.wg)(),(0,a.j4)(d,{key:0,size:"1rem",vertical:"",style:{"padding-top":"1rem"}},{default:(0,a.w5)((()=>[$r])),_:1})):(0,a.kq)("",!0),(0,a.wy)((0,a._)("div",null,[0===l.list.length?((0,a.wg)(),(0,a.j4)(m,{key:0,description:"暂无收藏",style:{height:"10rem"}})):(0,a.kq)("",!0),(0,a._)("div",null,[((0,a.wg)(),(0,a.j4)(u,{ArticleList:l.list,isCollect:l.isCollect,ref:"PostList",key:l.key},null,8,["ArticleList","isCollect"]))])],512),[[i.F8,!l.loading]])])),_:1}),(0,a.Wm)(h,{title:"最近更新"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{description:"暂无收藏",style:{height:"10rem"}})])),_:1})])),_:1},8,["active"]),(0,a.Wm)(g,{show:l.show,"onUpdate:show":t[3]||(t[3]=e=>l.show=e),actions:l.actions,"cancel-text":"取消","close-on-click-action":"",title:"管理",onSelect:n.onSelect},null,8,["show","actions","onSelect"]),(0,a.Wm)(w,{show:l.dialogShow,"onUpdate:show":t[5]||(t[5]=e=>l.dialogShow=e),title:"修改名称","show-cancel-button":"",theme:"round-button","confirm-button-color":"#000","confirm-button-text":"修改","cancel-button-color":"grey",onConfirm:n.createConfirm},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{modelValue:l.cbTitle,"onUpdate:modelValue":t[4]||(t[4]=e=>l.cbTitle=e),placeholder:"收藏夹名字(8字内)",required:"",size:"large",maxlength:"8","input-align":"center"},null,8,["modelValue"])])),_:1},8,["show","onConfirm"]),((0,a.wg)(),(0,a.j4)(v,{ref:"CollectBox",onMove:n.move,key:l.key},null,8,["onMove"])),(0,a.wy)((0,a._)("div",Ur,[(0,a.Wm)(b,{gutter:"40",justify:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{span:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{type:"default",block:"",onClick:n.showSelect},{default:(0,a.w5)((()=>[zr])),_:1},8,["onClick"])])),_:1}),(0,a.Wm)(y,{span:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{type:"danger",block:"",onClick:n.delConfirm},{default:(0,a.w5)((()=>[Fr])),_:1},8,["onClick"])])),_:1})])),_:1})],512),[[i.F8,l.isCollect]])])}var jr={name:"CollectDetail",inject:["reload"],components:{PostList:Ft,CollectBox:Xn},data(){return{dialogShow:!1,cbTitle:"",show:!1,boxName:"",active:0,collectBox:[],list:[],isCollect:!1,actions:[{name:"批量操作"},{name:"删除所有失效内容"},{name:"删除收藏夹",color:"red"}],checkedArr:[],loading:!0,key:1,scrollTop:0,overdue:[]}},methods:{showSelect(){this.checkedArr=this.$refs.PostList.checkedId,this.checkedArr.length&&(this.$refs.CollectBox.actionsShow=!0)},async move(e){const t={userId:this.$store.state.user.userId,boxName:this.boxName,URL:this.$store.state.URL};await this.$axios("collectDetail",{params:t}).then((e=>{this.collectBox=e[1]})),e!==this.boxName?r.V.confirm({title:"移动收藏",message:"确定将选中的内容内容移动至《"+e+"》收藏夹吗？"}).then((()=>{this.collectBox=this.collectBox.map((t=>(t.name===e&&(t.content=[...t.content,...this.checkedArr]),t))),this.del(),this.collectUpdate()})).catch((()=>{})):(0,n.F)("无效移动！")},del(){this.collectBox=this.collectBox.map((e=>(e.name===this.boxName&&(e.content=e.content.filter((e=>-1===this.checkedArr.indexOf(e)))),this.list=this.list.filter((e=>-1===this.checkedArr.indexOf(e.articleId))),e))),this.$refs.PostList.checkedId.length=0},collectUpdate(){const e={userId:this.$store.state.user.userId,actions:this.collectBox};this.$axios("collectUpdate",{params:e}).then((e=>{console.log("收藏夹更新了：",e),(0,n.F)("收藏更新！")}))},delConfirm(){this.checkedArr=this.$refs.PostList.checkedId,this.checkedArr.length&&r.V.confirm({title:"移出收藏",message:"确定将选中的内容内容移除收藏吗？"}).then((()=>{this.del(),this.collectUpdate()})).catch((()=>{}))},onClickLeft(){this.$router.back()},createConfirm(){if(""===this.cbTitle)return void(0,n.F)("收藏夹名不能为空！");let e=[];if(e=this.collectBox.filter((e=>e.name===this.cbTitle)),0!==e.length)return void(0,n.F)("同名收藏夹已存在！");e=this.collectBox.map((e=>(e.name===this.boxName&&(e.name=this.cbTitle,this.boxName=this.cbTitle),e)));const t={actions:this.collectBox,userId:this.$store.state.user.userId};this.$axios.get("collectUpdate",{params:t})},onSelect(e){"删除收藏夹"===e.name&&r.V.confirm({title:"收藏夹删除！",message:"删除收藏夹后，该收藏夹中的内容也会一并删除。操作不可逆！"}).then((()=>{let e=this.collectBox.filter((e=>e.name!==this.boxName));const t={userId:this.$store.state.user.userId,actions:e};this.$axios("collectUpdate",{params:t}).then((e=>{console.log("删除了",e),(0,n.F)("删除成功！"),this.$router.back()}))})).catch((()=>{})),"修改名称"===e.name&&(this.dialogShow=!0),"批量操作"===e.name&&(this.isCollect=!0),"删除所有失效内容"===e.name&&(this.collectBox=this.collectBox.filter((e=>(e.name===this.boxName&&(e.content=e.content.filter((e=>-1===this.overdue.indexOf(e)))),e))),console.log(this.collectBox),this.list=this.list.filter((e=>!e.notExist)),this.collectUpdate())},loaded(){!0===this.loading&&setTimeout((()=>{this.loading=!1}),500)},dataGet(){this.boxName=this.$route.query.boxName,"默认收藏夹"===this.boxName&&(this.actions=[{name:"批量操作"},{name:"删除所有失效内容"}]);const e={userId:this.$store.state.user.userId,boxName:this.boxName,URL:this.$store.state.URL};this.$axios("collectDetail",{params:e}).then((e=>{this.collectBox=e[1],this.list=e[0],this.overdue=e[2],this.loaded()}))}},mounted(){this.dataGet()},activated(){!1===this.$route.meta.isBack?(Object.assign(this.$data,this.$options.data()),this.dataGet(),this.key=this.reload()):this.$nextTick((()=>{document.querySelector("#collectDetailBulk").scrollTop=this.scrollTop}))},beforeRouteEnter(e,t,s){-1!==t.path.indexOf("myCollect")&&(e.meta.isBack=!1),s()},deactivated(){this.scrollTop=document.querySelector("#collectDetailBulk").scrollTop},updated(){}};const Br=(0,k.Z)(jr,[["render",Vr],["__scopeId","data-v-ed80bd46"]]);var Rr=Br;const qr={class:"history wrapper pt"},Hr=(0,a.Uk)("加载中..."),Nr={class:"bulk",id:"bulk",ref:"bulk"},Gr={class:"p5 van-ellipsis",style:{"padding-left":"5px"}};function Tr(e,t,s,o,l,n){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-loading"),d=(0,a.up)("van-empty"),m=(0,a.up)("van-button"),u=(0,a.up)("van-cell"),h=(0,a.up)("van-cell-group");return(0,a.wg)(),(0,a.iD)("div",qr,[(0,a.Wm)(r,{title:"我的历史","left-arrow":"",onClickLeft:n.onClickLeft,fixed:""},null,8,["onClickLeft"]),l.loading?((0,a.wg)(),(0,a.j4)(c,{key:0,size:"1rem",vertical:"",style:{"padding-top":"1rem"}},{default:(0,a.w5)((()=>[Hr])),_:1})):(0,a.kq)("",!0),(0,a.wy)((0,a._)("div",Nr,[l.list.length?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:1},(0,a.Ko)(l.time,(e=>((0,a.wg)(),(0,a.j4)(h,{title:e,key:e},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.list,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.articleId},[n.show(e,t.date)?((0,a.wg)(),(0,a.j4)(u,{key:0,center:"",clickable:"",to:"/articleHome/"+t.articleId},{icon:(0,a.w5)((()=>[(0,a.Wm)(m,{type:t.isSubmit?"primary":"success",size:"mini"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,$.zw)(t.isSubmit?"头条":"社区"),1)])),_:2},1032,["type"])])),value:(0,a.w5)((()=>[(0,a._)("p",Gr,(0,$.zw)(t.title),1)])),_:2},1032,["to"])):(0,a.kq)("",!0)])))),128))])),_:2},1032,["title"])))),128)):((0,a.wg)(),(0,a.j4)(d,{key:0,description:"暂无浏览记录"}))],512),[[i.F8,!l.loading]])])}var Mr={name:"HistoryView",data(){return{myHistory:[],aught:0,now:0,DayBefore:0,yesterdayAught:0,list:[],time:["今天","昨天","前天"],loading:!0,scrollTop:0}},methods:{show(e,t){return"今天"===e&&t>this.aught&&t<this.now||("昨天"===e&&t>this.yesterdayAught&&t<this.aught||"前天"===e&&t>this.DayBefore&&t<this.yesterdayAught)},onClickLeft(){this.$router.back()},async historyGet(){this.aught=h(h().format("YYYY/MM/DD")).valueOf(),this.now=h().valueOf(),this.DayBefore=this.aught-1728e5,this.yesterdayAught=this.aught-864e5;const e={userId:this.$store.state.user.userId};await this.$axios.get("historyGet",{params:e}).then((e=>{this.myHistory=e[0],this.list=e[1].filter((e=>e))})),this.myHistory=this.myHistory.filter((e=>e.date>this.yesterdayAught));const t={userId:this.$store.state.user.userId,arr:this.myHistory};await this.$axios.get("historyUpdate",{params:t}),this.loaded()},loaded(){!0===this.loading&&setTimeout((()=>{this.loading=!1}),500)}},mounted(){this.historyGet()},activated(){!0!==this.$route.meta.isBack?(Object.assign(this.$data,this.$options.data()),this.historyGet()):this.$refs.bulk.scrollTop=this.scrollTop},beforeRouteEnter(e,t,s){-1!==t.path.indexOf("/article")&&(e.meta.isBack=!0),s()},beforeRouteLeave(){this.scrollTop=document.querySelector("#bulk").scrollTop}};const Er=(0,k.Z)(Mr,[["render",Tr]]);var Pr=Er;const Yr=e=>((0,a.dD)("data-v-03db4f3b"),e=e(),(0,a.Cn)(),e),Or={class:"channelSelect wrapper"},Qr=Yr((()=>(0,a._)("div",{class:"top"},[(0,a._)("p",{class:"p2"},"选择感兴趣的内容"),(0,a._)("p",{class:"p5g"},"根据兴趣，生产私人定制")],-1))),Kr={class:"main"},Zr={class:"box"},Jr={class:"p5"},Xr={class:"bottom"},ec=(0,a.Uk)("一键全选并进入");function tc(e,t,s,i,o,l){const n=(0,a.up)("van-image"),r=(0,a.up)("van-checkbox"),c=(0,a.up)("van-checkbox-group"),d=(0,a.up)("van-grid-item"),m=(0,a.up)("van-grid"),u=(0,a.up)("van-button");return(0,a.wg)(),(0,a.iD)("div",Or,[Qr,(0,a._)("div",Kr,[(0,a.Wm)(m,{"column-num":3,square:"",gutter:10},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.allChannels,(e=>((0,a.wg)(),(0,a.j4)(d,{key:e.channelId},{default:(0,a.w5)((()=>[(0,a._)("div",Zr,[(0,a.Wm)(n,{width:"100%",height:"100%",fit:"cover",src:"https://fastly.jsdelivr.net/npm/@vant/assets/cat.jpeg"}),(0,a.Wm)(c,{modelValue:o.checked,"onUpdate:modelValue":t[0]||(t[0]=e=>o.checked=e),ref_for:!0,ref:"checkboxGroup"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{name:e.channelId},null,8,["name"])])),_:2},1032,["modelValue"]),(0,a._)("span",Jr,(0,$.zw)(e.channelName),1)])])),_:2},1024)))),128))])),_:1})]),(0,a._)("div",Xr,[(0,a.Wm)(u,{round:"",color:o.enterAllow?"red":"pink",block:"",onClick:l.enter},{default:(0,a.w5)((()=>[(0,a.Uk)((0,$.zw)(l.text(o.checked)),1)])),_:1},8,["color","onClick"]),(0,a.Wm)(u,{round:"",type:"primary",block:"",onClick:l.checkAll},{default:(0,a.w5)((()=>[ec])),_:1},8,["onClick"])])])}var sc={name:"ChannelSelect",data(){return{allChannels:[],checked:[],enterAllow:!1,allId:[]}},methods:{text(e){return this.enterAllow=!1,console.log(e),e.length?e.length<=3?"至少选择4个兴趣("+e.length+"/4)":(this.enterAllow=!0,"进入"):"至少选择4个兴趣"},enter(){this.enterAllow&&this.submit(this.checked)},submit(e){const t=n.F.loading({message:"私人定制生成中...",forbidClick:!0,duration:3e3,overlay:!0});setTimeout((()=>{const s={userId:this.$store.state.user.userId,channels:e};this.$axios.get("channelUpdate",{params:s}).then((e=>{console.log(e),t.clear,(0,n.F)({icon:"checked",message:"成功!",forbidClick:!0})})),this.$router.replace("/")}),2e3)},checkAll(){this.checked=this.allId,this.submit(this.checked)}},mounted(){this.$axios.get("chaAllGet").then((e=>{this.allChannels=e,console.log(e),this.allId=e.map((e=>e.channelId))}))}};const ic=(0,k.Z)(sc,[["render",tc],["__scopeId","data-v-03db4f3b"]]);var ac=ic;const oc={class:"subscribe wrapper pt"},lc=(0,a.Uk)("加载中..."),nc={key:0},rc=(0,a.Uk)("加载中..."),cc={key:0};function dc(e,t,s,o,l,n){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-loading"),d=(0,a.up)("PersonalInfo"),m=(0,a.up)("van-empty"),u=(0,a.up)("van-tab"),h=(0,a.up)("van-tabs");return(0,a.wg)(),(0,a.iD)("div",oc,[(0,a.Wm)(r,{"left-arrow":"",onClickLeft:n.onClickLeft,fixed:"",title:"粉丝与关注"},null,8,["onClickLeft"]),(0,a.Wm)(h,{active:l.active,"onUpdate:active":t[0]||(t[0]=e=>l.active=e),swipeable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{title:this.$store.state.user&&l.userId==this.$store.state.user.userId?"我的关注":"Ta的关注"},{default:(0,a.w5)((()=>[l.loading?((0,a.wg)(),(0,a.j4)(c,{key:0,size:"1rem",vertical:"",style:{"padding-top":"1rem"}},{default:(0,a.w5)((()=>[lc])),_:1})):(0,a.kq)("",!0),(0,a.wy)((0,a._)("div",null,[l.inited?((0,a.wg)(),(0,a.iD)("div",nc,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.follows,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.userId},[(0,a.Wm)(d,{userInfo:e},null,8,["userInfo"])])))),128))])):(0,a.kq)("",!0),l.inited&&!l.follows.length?((0,a.wg)(),(0,a.j4)(m,{key:1,description:"暂无关注"})):(0,a.kq)("",!0)],512),[[i.F8,!l.loading]])])),_:1},8,["title"]),(0,a.Wm)(u,{title:this.$store.state.user&&l.userId==this.$store.state.user.userId?"我的粉丝":"Ta的粉丝"},{default:(0,a.w5)((()=>[l.loading?((0,a.wg)(),(0,a.j4)(c,{key:0,size:"1rem",vertical:"",style:{"padding-top":"1rem"}},{default:(0,a.w5)((()=>[rc])),_:1})):(0,a.kq)("",!0),(0,a.wy)((0,a._)("div",null,[l.inited?((0,a.wg)(),(0,a.iD)("div",cc,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.fans,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.userId},[(0,a.Wm)(d,{userInfo:e},null,8,["userInfo"])])))),128))])):(0,a.kq)("",!0),l.inited&&!l.fans.length?((0,a.wg)(),(0,a.j4)(m,{key:1,description:"暂无粉丝"})):(0,a.kq)("",!0)],512),[[i.F8,!l.loading]])])),_:1},8,["title"])])),_:1},8,["active"])])}const mc={class:"personalInfo"},uc={class:"text"},hc={class:"p5"},pc={class:"p6g van-ellipsis",style:{width:"5rem"}};function gc(e,t,s,o,l,n){const r=(0,a.up)("van-image"),c=(0,a.up)("van-icon"),d=(0,a.up)("van-button"),m=(0,a.up)("van-cell");return(0,a.wg)(),(0,a.iD)("div",mc,[(0,a.Wm)(m,{center:"",clickable:"",to:"/personal/"+s.userInfo.userId},{icon:(0,a.w5)((()=>[(0,a.Wm)(r,{round:"",width:"1.5rem",height:"1.5rem",src:n.avatarGet(s.userInfo.avatar),fit:"cover"},null,8,["src"])])),title:(0,a.w5)((()=>[(0,a._)("div",uc,[(0,a._)("p",hc,[(0,a.Uk)((0,$.zw)(s.userInfo.nickname)+" ",1),"男"===s.userInfo.sex?((0,a.wg)(),(0,a.j4)(c,{key:0,"class-prefix":"iconfont icon-nan",size:"0.5rem",color:"blue"})):(0,a.kq)("",!0),"女"===s.userInfo.sex?((0,a.wg)(),(0,a.j4)(c,{key:1,"class-prefix":"iconfont icon-nv",size:"0.5rem",color:"pink"})):(0,a.kq)("",!0)]),(0,a._)("span",pc,(0,$.zw)(s.userInfo.signature),1)])])),value:(0,a.w5)((()=>[(0,a.Wm)(d,{type:"primary",size:"small",onClick:[t[0]||(t[0]=(0,i.iM)((()=>{}),["stop"])),t[1]||(t[1]=e=>n.follow(s.userInfo.userId))],icon:l.followed?"success":"plus",color:l.followed?"grey":"#000"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,$.zw)(l.followed?"已关注":"关注Ta"),1)])),_:1},8,["icon","color"])])),_:1},8,["to"])])}var fc={name:"PersonalInfo",inject:["avatarGet"],props:{userInfo:{type:Object}},data(){return{myFollows:[],followed:!1,targetFans:[]}},methods:{async follow(e){this.$store.state.user?e==this.$store.state.user.userId?(0,n.F)("不能粉自己哦！"):(await this.targetFansGet(e),this.followed?await r.V.confirm({title:"取消关注"}).then((()=>{this.targetFans=this.targetFans.filter((e=>e!=this.$store.state.user.userId)),this.myFollows=this.myFollows.filter((t=>t!=e)),this.followed=!1})).catch((()=>{})):(this.targetFans.push(this.$store.state.user.userId),this.myFollows.push(e),this.followed=!0),console.log(this.myFollows,this.targetFans),this.subscribeUpdate(e)):this.loginState()},loginState(){r.V.confirm({title:"未登录",message:"你必须要登录才能使用此功能，是否前去登录?"}).then((()=>{this.$router.replace("/login")})).catch((()=>{}))},subscribeUpdate(e){const t={fan:this.targetFans,follow:this.myFollows,userId:this.$store.state.user.userId,authorId:e};this.$axios.get("subscribeUpdate",{params:t})},async targetFansGet(e){const t={userId:e};await this.$axios.get("subscribeListGet",{params:t}).then((e=>{this.targetFans=e[1]}))},async subscribeGet(){const e={userId:this.$store.state.user.userId};await this.$axios.get("subscribeListGet",{params:e}).then((e=>{this.myFollows=e[0],e[0].indexOf(this.userInfo.userId+"")>-1&&(this.followed=!0)}))}},mounted(){this.$store.state.user&&this.subscribeGet()}};const wc=(0,k.Z)(fc,[["render",gc],["__scopeId","data-v-45557817"]]);var vc=wc,kc={name:"SubscribeView",components:{PersonalInfo:vc},data(){return{followList:[],fanList:[],active:0,userId:0,follows:[],fans:[],inited:!1,mounted:!1,loading:!0}},methods:{onClickLeft(){this.$router.back()},async dataGet(){let e=this.$route.path.split("/");this.userId=e[e.length-2],this.active=e[e.length-1]-0,await this.subscribeGet(),this.detailGet()},async subscribeGet(){const e={userId:this.userId};await this.$axios.get("subscribeListGet",{params:e}).then((e=>{this.followList=e[0],this.fanList=e[1]}))},loaded(){!0===this.loading&&setTimeout((()=>{this.loading=!1}),100)},push(){if(!history.state.title){let e={title:"title",url:"http://www.maomao365.com"};history.pushState(e,"title")}},detailGet(){const e={followList:this.followList,fanList:this.fanList};this.$axios.get("subscribeDetailGet",{params:e}).then((e=>{this.follows=e[0],this.fans=e[1],this.inited=!0,this.loaded()}))}},mounted(){this.push(),this.mounted=!0,this.dataGet()},activated(){this.mounted?this.mounted=!1:this.$store.state.isBack?console.log("回滚！"):(console.log("刷新！"),this.push(),Object.assign(this.$data,this.$options.data()),this.dataGet())}};const yc=(0,k.Z)(kc,[["render",dc]]);var bc=yc;const Cc={class:"search wrapper"},Ic={key:0,class:"result"},xc=(0,a.Uk)("加载中..."),_c={key:1},Lc={key:1,class:"suggestion"},Ac={class:"van-ellipsis",style:{width:"8rem"}},Wc={key:2,class:"history"},Sc=(0,a.Uk)("清空");function Dc(e,t,s,o,l,n){const r=(0,a.up)("van-icon"),c=(0,a.up)("van-search"),d=(0,a.up)("van-loading"),m=(0,a.up)("van-empty"),u=(0,a.up)("PostList"),h=(0,a.up)("van-tab"),p=(0,a.up)("PersonalInfo"),g=(0,a.up)("van-tabs"),f=(0,a.up)("van-cell"),w=(0,a.up)("van-button");return(0,a.wg)(),(0,a.iD)("div",Cc,[(0,a.Wm)(c,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),placeholder:"请输入搜索关键词",onSearch:t[1]||(t[1]=e=>n.onSearch(l.value)),"clear-trigger":"always",onClear:t[2]||(t[2]=e=>l.isResultShow=!1),onfocus:"isResultShow=false"},{left:(0,a.w5)((()=>[(0,a.Wm)(r,{name:"arrow-left",onClick:n.back},null,8,["onClick"])])),_:1},8,["modelValue"]),l.isResultShow?((0,a.wg)(),(0,a.iD)("div",Ic,[l.loading?((0,a.wg)(),(0,a.j4)(d,{key:0,size:"1rem",vertical:"",style:{"padding-top":"1rem"}},{default:(0,a.w5)((()=>[xc])),_:1})):((0,a.wg)(),(0,a.j4)(g,{key:1,active:l.active,"onUpdate:active":t[3]||(t[3]=e=>l.active=e),swipeable:"",shrink:""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{title:"内容"},{default:(0,a.w5)((()=>[l.articleList.length?((0,a.wg)(),(0,a.j4)(u,{key:1,ArticleList:l.articleList},null,8,["ArticleList"])):((0,a.wg)(),(0,a.j4)(m,{key:0,image:"error",description:"没有搜索结果"}))])),_:1}),(0,a.Wm)(h,{title:"用户"},{default:(0,a.w5)((()=>[l.userList.length?((0,a.wg)(),(0,a.iD)("div",_c,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.userList,(e=>((0,a.wg)(),(0,a.j4)(p,{userInfo:e,key:e.userId},null,8,["userInfo"])))),128))])):((0,a.wg)(),(0,a.j4)(m,{key:0,image:"error",description:"没有搜索结果"}))])),_:1})])),_:1},8,["active"]))])):""!==l.value?((0,a.wg)(),(0,a.iD)("div",Lc,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.searchSuggestion,(e=>((0,a.wg)(),(0,a.j4)(f,{icon:"search",key:e,clickable:"",onClick:(0,i.iM)((t=>n.onSearch(e)),["stop"])},{title:(0,a.w5)((()=>[(0,a._)("p",Ac,(0,$.zw)(e),1)])),_:2},1032,["onClick"])))),128))])):((0,a.wg)(),(0,a.iD)("div",Wc,[l.searchHistory.length?((0,a.wg)(),(0,a.j4)(f,{key:0,title:"搜索历史"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{name:"delete",onClick:(0,i.iM)(n.cleanHistory,["stop"])},{default:(0,a.w5)((()=>[Sc])),_:1},8,["onClick"])])),_:1})):(0,a.kq)("",!0),(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.searchHistory,(e=>((0,a.wg)(),(0,a.j4)(w,{color:"#777",size:"mini",key:e,onClick:(0,i.iM)((t=>n.onSearch(e)),["stop"])},{default:(0,a.w5)((()=>[(0,a.Uk)((0,$.zw)(e),1)])),_:2},1032,["onClick"])))),128))])]))])}var $c={name:"SearchView",components:{PersonalInfo:vc,PostList:Ft},data(){return{loading:!0,active:0,value:"",isResultShow:!1,searchHistory:[],searchSuggestion:[],articleList:[],userList:[]}},methods:{back(){this.$router.back()},onSearch(e){if(this.loading=!0,this.value=e,""!==e){-1===this.searchHistory.indexOf(e)&&(this.searchHistory.push(e),this.$store.commit("setHistory",this.searchHistory)),this.isResultShow=!0;const t={value:e,URL:this.$store.state.URL};this.$axios.get("search",{params:t}).then((e=>{console.log(e),this.articleList=e[1],this.userList=e[2],setTimeout((()=>{this.loading=!1}),1e3)}))}},cleanHistory(){this.searchHistory=[],this.$store.commit("setHistory",this.searchHistory)}},mounted(){this.$store.state.history?this.searchHistory=this.$store.state.history:this.$store.commit("setHistory",this.searchHistory)},watch:{value(e){if(""===e)this.isResultShow=!1;else{const t={value:e};this.$axios.get("search",{params:t}).then((e=>{this.searchSuggestion=e[0]}))}}}};const Uc=(0,k.Z)($c,[["render",Dc],["__scopeId","data-v-1782cb24"]]);var zc=Uc;const Fc={class:"contact wrapper pt"},Vc={class:"btnBox"},jc=(0,a.Uk)("反馈建议");function Bc(e,t,i,o,l,n){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-image"),d=(0,a.up)("van-button");return(0,a.wg)(),(0,a.iD)("div",Fc,[(0,a.Wm)(r,{title:"合作/加入","left-arrow":"",onClickLeft:n.onClickLeft,fixed:""},null,8,["onClickLeft"]),(0,a.Wm)(c,{width:"10rem",fit:"cover",src:s(4095),onClick:n.imgPreview},null,8,["src","onClick"]),(0,a._)("div",Vc,[(0,a.Wm)(d,{type:"primary",to:"feedback"},{default:(0,a.w5)((()=>[jc])),_:1})])])}var Rc={name:"ContactView",data(){return{}},methods:{onClickLeft(){this.$router.back()},imgPreview(){(0,We.e)([s(4095)])}},mounted(){}};const qc=(0,k.Z)(Rc,[["render",Bc],["__scopeId","data-v-1cf25eca"]]);var Hc=qc;const Nc=e=>((0,a.dD)("data-v-d963af1c"),e=e(),(0,a.Cn)(),e),Gc={class:"feedback wrapper pt"},Tc={class:"bulk",id:"bulk"},Mc=Nc((()=>(0,a._)("div",{class:"opinion",style:{padding:".3rem 0"}},[(0,a._)("p",{class:"p5"},[(0,a._)("i",null,"期待您的反馈")]),(0,a._)("p",{class:"p5"},[(0,a._)("i",null,"Offer your great opinion")])],-1))),Ec={style:{display:"flex","justify-content":"space-between"}},Pc=Nc((()=>(0,a._)("span",null,"常见问题",-1))),Yc={style:{display:"flex","justify-content":"space-between"}},Oc=Nc((()=>(0,a._)("span",null,"最新问题",-1))),Qc=(0,a.Uk)("加载中..."),Kc={class:"bug p4"},Zc={class:"greyBackground"},Jc={class:"content"},Xc={class:"p2b"},ed={class:"top"},td={class:"avatar"},sd={class:"nickname p3b"},id={class:"mid"},ad=["onClick"],od={key:0,class:"imgBox"},ld={class:"bottom"},nd={class:"time"},rd={class:"optionBox"},cd={class:"icon-span"},dd={key:1,class:"commentBox"},md={class:"comment"},ud={key:0},hd={key:1},pd=Nc((()=>(0,a._)("span",null,[(0,a._)("b",null," :")],-1))),gd=["onClick"],fd=Nc((()=>(0,a._)("p",{class:"p4b black"},"问题描述",-1))),wd=Nc((()=>(0,a._)("p",{class:"p4b black"},"问题截图(jpg/png/gif)",-1))),vd=Nc((()=>(0,a._)("p",{class:"p4b black"},"联系方式(方便我们更好地跟踪问题)",-1))),kd=(0,a.Uk)(" 提交反馈 "),yd=Nc((()=>(0,a._)("p",{class:"p4b black"},"我的问题",-1))),bd=Nc((()=>(0,a._)("p",{class:"p4b black"},"问题详情(可选)",-1))),Cd=Nc((()=>(0,a._)("p",{class:"p4b black"},"是否常见",-1))),Id=(0,a.Uk)(" 提交问题 "),xd=Nc((()=>(0,a._)("u",null,"我可以问什么?",-1))),_d=Nc((()=>(0,a._)("p",null,"问你想问的一切，包括但不限于以下内容:",-1))),Ld=Nc((()=>(0,a._)("ol",null,[(0,a._)("li",null,"1.。。。是什么?"),(0,a._)("li",null,"2.为什么。。。"),(0,a._)("li",null,"3.。。。怎么样?")],-1)));function Ad(e,t,s,o,l,n){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-cell"),d=(0,a.up)("van-cell-group"),m=(0,a.up)("van-loading"),u=(0,a.up)("van-skeleton"),h=(0,a.up)("van-image"),p=(0,a.up)("van-icon"),g=(0,a.up)("van-button"),f=(0,a.up)("van-field"),w=(0,a.up)("van-uploader"),v=(0,a.up)("van-form"),k=(0,a.up)("van-tab"),y=(0,a.up)("van-switch"),b=(0,a.up)("van-collapse-item"),C=(0,a.up)("van-collapse"),I=(0,a.up)("van-tabs"),x=(0,a.up)("van-popup");return(0,a.wg)(),(0,a.iD)("div",Gc,[(0,a.Wm)(r,{title:"问题广场","left-arrow":"",onClickLeft:n.onClickLeft,fixed:""},null,8,["onClickLeft"]),(0,a._)("div",Tc,[Mc,(0,a.Wm)(d,null,{title:(0,a.w5)((()=>[(0,a._)("div",Ec,[Pc,(0,a._)("span",{onClick:t[0]||(t[0]=e=>n.goAllQ("FAQ"))},"全部")])])),default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.hotList,(e=>((0,a.wg)(),(0,a.j4)(c,{"is-link":"",key:e.id,center:"",to:"/questionDetail/"+e.id},{title:(0,a.w5)((()=>[(0,a.Uk)(" 【热点】"+(0,$.zw)(e.question),1)])),_:2},1032,["to"])))),128))])),_:1}),(0,a.Wm)(d,null,{title:(0,a.w5)((()=>[(0,a._)("div",Yc,[Oc,(0,a._)("span",{onClick:t[1]||(t[1]=e=>n.goAllQ("NAQ"))},"全部")])])),default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.newList,(e=>((0,a.wg)(),(0,a.j4)(c,{"is-link":"",key:e.id,center:"",to:"/questionDetail/"+e.id},{title:(0,a.w5)((()=>[(0,a.Uk)(" 【最新】"+(0,$.zw)(e.question),1)])),_:2},1032,["to"])))),128))])),_:1}),(0,a.wy)((0,a.Wm)(m,{size:"24px",vertical:"",color:"#0094ff",style:{"margin-top":"1rem"}},{default:(0,a.w5)((()=>[Qc])),_:1},512),[[i.F8,l.loading]]),((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(2,(e=>(0,a.wy)((0,a.Wm)(u,{title:"",avatar:"",row:4,key:e}),[[i.F8,l.loading]]))),64)),(0,a.wy)((0,a._)("div",Kc,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.bugList,((e,s)=>((0,a.wg)(),(0,a.iD)("div",{class:"bugItem",key:e.id},[(0,a.wy)((0,a._)("p",Zc,null,512),[[i.F8,0!==s]]),(0,a._)("div",Jc,[(0,a.wy)((0,a._)("p",Xc,"用户说",512),[[i.F8,0===s]]),(0,a._)("div",ed,[(0,a._)("div",td,[(0,a.Wm)(h,{width:"1rem",height:"1rem",fit:"cover",radius:"5px",src:n.avatarGet(e.avatar)},null,8,["src"])]),(0,a._)("div",sd,(0,$.zw)(e.nickname),1)]),(0,a._)("div",id,[(0,a._)("div",{class:"text p3 van-multi-ellipsis--l3",onClick:t=>n.push("bugDetail/"+e.id)},(0,$.zw)(e.text),9,ad)]),e.imgs.length?((0,a.wg)(),(0,a.iD)("div",od,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.imgs,((t,s)=>((0,a.wg)(),(0,a.iD)("div",{class:"square",key:t},[(0,a.Wm)(h,{width:"100%",height:"100%",fit:"cover",radius:"5px",onClick:(0,i.iM)((t=>n.imgPreview(e.imgs,s)),["stop"]),"lazy-load":"",src:this.$store.state.URL+"upload/bugImgs/"+t},null,8,["onClick","src"])])))),128))])):(0,a.kq)("",!0),(0,a._)("div",ld,[(0,a._)("div",nd,(0,$.zw)(n.before(e.date)),1),(0,a._)("div",rd,[(0,a.Wm)(g,{size:"mini",color:"transparent",disabled:""},{icon:(0,a.w5)((()=>[(0,a.Wm)(p,{name:"comment-o",color:"#000",size:"0.4rem"},{default:(0,a.w5)((()=>[(0,a._)("span",cd,(0,$.zw)(e.commentLength),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(g,{size:"mini",color:"transparent",onClick:t[2]||(t[2]=e=>n.actionShow())},{icon:(0,a.w5)((()=>[(0,a.Wm)(p,{name:"ellipsis",color:"#aaa",size:"0.5rem"})])),_:1})])]),e.comment.length?((0,a.wg)(),(0,a.iD)("div",dd,[(0,a._)("div",md,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.comment,(e=>((0,a.wg)(),(0,a.iD)("p",{class:"commentItem",key:e},[(0,a._)("span",null,[(0,a._)("b",null,(0,$.zw)(e.nickname),1)]),e.targetName?((0,a.wg)(),(0,a.iD)("span",ud," 回复 ")):(0,a.kq)("",!0),e.targetName?((0,a.wg)(),(0,a.iD)("span",hd,[(0,a._)("b",null,(0,$.zw)(e.targetName),1)])):(0,a.kq)("",!0),pd,(0,a._)("span",null,(0,$.zw)(e.message),1)])))),128)),(0,a.wy)((0,a._)("span",{style:{color:"blue"},onClick:t=>n.push("bugDetail/"+e.id)},"查看所有评论>>",8,gd),[[i.F8,e.commentLength>3]])])])):(0,a.kq)("",!0)])])))),128))],512),[[i.F8,!l.loading]])]),(0,a._)("div",{class:"btnBox",style:(0,$.j5)({right:l.scrollTop>200?".5rem":"3.5rem",width:l.scrollTop>200?"1rem":"3rem"})},[(0,a.Wm)(g,{icon:"edit",color:"black",round:"",block:"",onClick:n.popup,style:{height:"1rem"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,$.zw)(l.text),1)])),_:1},8,["onClick"])],4),(0,a.Wm)(x,{show:l.show,"onUpdate:show":t[12]||(t[12]=e=>l.show=e),position:"right",style:{width:"100%",height:"100%"},class:"popup"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{title:"问题反馈",onClickLeft:n.popDown},{left:(0,a.w5)((()=>[(0,a.Wm)(p,{name:"cross",size:"18"})])),_:1},8,["onClickLeft"]),(0,a.Wm)(I,{active:l.active,"onUpdate:active":t[11]||(t[11]=e=>l.active=e),animated:""},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{title:"提缺陷/建议"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{onSubmit:n.onSubmit},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{inset:"",class:"Q1"},{title:(0,a.w5)((()=>[fd])),default:(0,a.w5)((()=>[(0,a.Wm)(f,{modelValue:l.message,"onUpdate:modelValue":t[3]||(t[3]=e=>l.message=e),rows:"3",autosize:"",type:"textarea",maxlength:"100",placeholder:'请尽量描述清晰，以便您对于产品的建议或所提缺陷能更清晰地反馈至开发团队。(如果需要向管理员提问，请移步至上方的"我想问/想要")',"show-word-limit":"",style:{"background-color":"#eee"},rules:[{required:!0,message:"请填写问题描述"}]},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,{inset:"",class:"Q1"},{title:(0,a.w5)((()=>[wd])),default:(0,a.w5)((()=>[(0,a.Wm)(w,{modelValue:l.fileList,"onUpdate:modelValue":t[4]||(t[4]=e=>l.fileList=e),multiple:"","max-count":3,"after-read":n.afterRead,"before-read":n.beforeRead,"before-delete":n.beforeDelete},null,8,["modelValue","after-read","before-read","before-delete"])])),_:1}),(0,a.Wm)(d,{inset:"",class:"Q1"},{title:(0,a.w5)((()=>[vd])),default:(0,a.w5)((()=>[(0,a.Wm)(f,{label:"QQ",modelValue:l.qq,"onUpdate:modelValue":t[5]||(t[5]=e=>l.qq=e),style:{"background-color":"#eee"},placeholder:"请输入您的QQ号(可选)"},null,8,["modelValue"]),(0,a.Wm)(f,{label:"邮箱",modelValue:l.email,"onUpdate:modelValue":t[6]||(t[6]=e=>l.email=e),style:{"background-color":"#eee"},placeholder:"请输入您的邮箱(可选)"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(g,{round:"",block:"",color:"black","native-type":"submit",style:{"margin-top":".5rem"}},{default:(0,a.w5)((()=>[kd])),_:1})])),_:1},8,["onSubmit"])])),_:1}),(0,a.Wm)(k,{title:"我想问/想要"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{onSubmit:n.submitQue},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{inset:""},{title:(0,a.w5)((()=>[yd])),default:(0,a.w5)((()=>[(0,a.Wm)(f,{placeholder:"请输入您的问题或想要的功能(至多16字)",modelValue:l.myQue,"onUpdate:modelValue":t[7]||(t[7]=e=>l.myQue=e),rules:[{required:!0,message:"请填写您的问题"}],style:{"background-color":"#eee"},clearable:"",maxlength:"16","show-word-limit":""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,{inset:"",class:"Q1"},{title:(0,a.w5)((()=>[bd])),default:(0,a.w5)((()=>[(0,a.Wm)(f,{modelValue:l.queDetail,"onUpdate:modelValue":t[8]||(t[8]=e=>l.queDetail=e),rows:"3",autosize:"",type:"textarea",maxlength:"100",placeholder:"I had been waiting for so long ,let's talk about it","show-word-limit":"",style:{"background-color":"#eee"}},null,8,["modelValue"])])),_:1}),1e3===this.$store.state.user.userId?((0,a.wg)(),(0,a.j4)(d,{key:0,inset:"",class:"Q1"},{title:(0,a.w5)((()=>[Cd])),default:(0,a.w5)((()=>[(0,a.Wm)(y,{modelValue:l.isHot,"onUpdate:modelValue":t[9]||(t[9]=e=>l.isHot=e),size:"20"},null,8,["modelValue"])])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(g,{round:"",block:"",color:"black","native-type":"submit",style:{"margin-top":".5rem"}},{default:(0,a.w5)((()=>[Id])),_:1})])),_:1},8,["onSubmit"]),(0,a.Wm)(C,{modelValue:l.activeNames,"onUpdate:modelValue":t[10]||(t[10]=e=>l.activeNames=e),style:{"margin-top":".5rem"}},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{title:"",icon:"question","is-link":!1},{title:(0,a.w5)((()=>[xd])),default:(0,a.w5)((()=>[_d,Ld])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["active"])])),_:1},8,["show"])])}var Wd={name:"ContactView",inject:["actionShow","avatarGet"],data(){return{activeNames:[],show:!1,text:"问题反馈",active:0,message:"",fileList:[],myQue:"",queDetail:"",scrollTop:0,bugImgs:[],qq:"",email:"",bugList:[],loading:!0,isHot:!1,hotList:[],newList:[]}},methods:{onClickLeft(){this.$router.back()},popup(){this.show=!0},popDown(){this.show=!1},reset(){this.show=!1,this.message="",this.qq="",this.email="",this.fileList.length=0,this.myQue="",this.bugImgs.length=""},questionReset(){this.queDetail="",this.myQue="",this.show=!1,this.isHot=!1},goAllQ(e){"FAQ"===e?this.$router.push("questionList/FAQ"):this.$router.push("questionList/NAQ")},async onSubmit(){if(0===this.message.trim().length)return void n.F.fail("内容无意义！");let e=n.F.loading({forbidClick:!0,message:"提交中",overlay:!0,duration:0}),t=[];if(0!==this.bugImgs.length){const e=new FormData;this.bugImgs.map((t=>{e.append("bugImgs",t)})),await this.$axios.post("bugImgsUpload",e).then((e=>{console.log("返回的图片名为:",e),t=e}))}let s={userId:this.$store.state.user.userId,text:this.message,imgs:t};this.$axios.post("bugSubmit",G().stringify(s)).then((t=>{this.bugList=[t,...this.bugList],e.clear(),n.F.success({message:"反馈成功！",overlay:!0,onClose:this.reset})}))},submitQue(){if(0===this.myQue.trim().length)return void n.F.fail("内容无意义！");0===this.queDetail.trim().length&&(this.queDetail=this.queDetail.trim());let e=n.F.loading({forbidClick:!0,message:"提交中",overlay:!0,duration:0}),t={question:this.myQue,questionMaker:this.$store.state.user.userId,desc:this.queDetail,isHot:this.isHot};this.$axios.post("addQuestion",G().stringify(t)).then((t=>{console.log(t),e.clear(),n.F.success({message:"提问成功！",overlay:!0,onClose:this.questionReset})}))},afterRead(e){this.bugImgs.push(e.file)},beforeDelete(e){return this.bugImgs.splice(this.bugImgs.indexOf(e),1),!0},beforeRead(e){let t=!0;return-1!==this.$store.state.imageType.indexOf(e.type)?(this.bugImgs.forEach((s=>{s.name===e.name&&(t=!1)})),!!t||(n.F.fail("重复图片！"),!1)):((0,n.F)("格式不支持"),!1)},scrollHandler(){this.scrollTop=document.querySelector("#bulk").scrollTop,this.$nextTick((()=>{this.scrollTop>200?this.text="":this.text="问题反馈"}))},imgPreview(e,t){e=e.map((e=>this.$store.state.URL+"upload/bugImgs/"+e)),(0,We.e)({images:e,startPosition:t})},before(e){return h(e).format("YYYY[年]MM[月]DD[日] HH:mm")},push(e){this.$router.push(e)},async dataGet(){await this.$axios.get("questionListGet",{params:{type:"FAQ",home:"home"}}).then((e=>{this.hotList=e})),await this.$axios.get("questionListGet",{params:{type:"NAQ",home:"home"}}).then((e=>{this.newList=e})),this.bugListGet()},async bugListGet(){this.$axios.get("bugListGet").then((e=>{this.bugList=e,this.$nextTick((()=>{setTimeout((()=>{this.loading=!1}),100)}))}))}},mounted(){document.getElementById("bulk").addEventListener("scroll",this.scrollHandler),this.dataGet()},beforeUnmount(){document.getElementById("bulk").removeEventListener("scroll",this.scrollHandler)}};const Sd=(0,k.Z)(Wd,[["render",Ad],["__scopeId","data-v-d963af1c"]]);var Dd=Sd;const $d={class:"bugDetail wrapper pbt"},Ud=(0,a.Uk)("加载中..."),zd={key:0,class:"bugItem bulk"},Fd={class:"content"},Vd={class:"top"},jd={class:"nameDateReport"},Bd={nameDate:""},Rd={class:"nickname p4b"},qd={class:"time p5"},Hd={class:"report"},Nd={class:"mid"},Gd={class:"text p3 van-multi-ellipsis--l3"},Td={key:0,class:"imgBox"},Md={class:"commentBox"},Ed={class:"p3b",style:{"padding-bottom":".5rem"}},Pd={class:"top"},Yd={class:"nameDateReport"},Od={nameDate:""},Qd={class:"nickname p4b"},Kd={class:"time p5"},Zd={class:"report"},Jd={class:"mid"},Xd=["onClick"],em={key:0},tm=(0,a.Uk)("回复"),sm={class:"p4b"},im={class:"bottomFrame"},am={class:"btnBox"},om=(0,a.Uk)(" 发送 ");function lm(e,t,s,o,l,n){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-loading"),d=(0,a.up)("van-skeleton"),m=(0,a.up)("van-image"),u=(0,a.up)("van-icon"),h=(0,a.up)("van-button"),p=(0,a.up)("van-divider"),g=(0,a.up)("van-empty"),f=(0,a.up)("van-field"),w=(0,a.up)("van-cell-group"),v=(0,a.up)("van-form"),k=(0,a.up)("van-popup");return(0,a.wg)(),(0,a.iD)("div",$d,[(0,a.Wm)(r,{title:"问题详情","left-arrow":"",onClickLeft:n.onClickLeft,fixed:""},null,8,["onClickLeft"]),(0,a.wy)((0,a.Wm)(c,{size:"24px",vertical:"",color:"#0094ff",style:{"margin-top":"1rem"}},{default:(0,a.w5)((()=>[Ud])),_:1},512),[[i.F8,l.loading]]),((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(3,(e=>(0,a.wy)((0,a.Wm)(d,{title:"",avatar:"",row:4,key:e}),[[i.F8,l.loading]]))),64)),l.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",zd,[(0,a._)("div",Fd,[(0,a._)("div",Vd,[(0,a.Wm)(m,{class:"avatar",width:"1rem",height:"1rem",fit:"cover",radius:"5px",src:n.avatarGet(l.bugDetail.avatar)},null,8,["src"]),(0,a._)("div",jd,[(0,a._)("div",Bd,[(0,a._)("div",Rd,(0,$.zw)(l.bugDetail.nickname),1),(0,a._)("div",qd,(0,$.zw)(n.before(l.bugDetail.createdAt)),1)]),(0,a._)("div",Hd,[(0,a.Wm)(h,{size:"mini",color:"transparent",onClick:t[0]||(t[0]=e=>n.actionShow())},{icon:(0,a.w5)((()=>[(0,a.Wm)(u,{name:"ellipsis",color:"#aaa",size:"0.5rem"})])),_:1})])])]),(0,a._)("div",Nd,[(0,a._)("div",Gd,(0,$.zw)(l.bugDetail.text),1)]),l.bugDetail.imgs.length?((0,a.wg)(),(0,a.iD)("div",Td,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.bugDetail.imgs,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"square",key:e},[(0,a.Wm)(m,{width:"100%",height:"100%",fit:"cover",radius:"5px",onClick:(0,i.iM)((e=>n.imgPreview(l.bugDetail.imgs,t)),["stop"]),"lazy-load":"",src:this.$store.state.URL+"upload/bugImgs/"+e},null,8,["onClick","src"])])))),128))])):(0,a.kq)("",!0),(0,a.Wm)(p)]),(0,a._)("div",Md,[(0,a._)("p",Ed,"评论 "+(0,$.zw)(l.bugDetail.comment.length),1),l.bugDetail.comment.length?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(g,{key:0,image:"https://fastly.jsdelivr.net/npm/@vant/assets/custom-empty-image.png","image-size":"80",description:"谁会成为第一个评论的人呢"})),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.bugDetail.comment,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"content",key:e},[(0,a._)("div",Pd,[(0,a.Wm)(m,{class:"avatar",width:"1rem",height:"1rem",fit:"cover",radius:"5px",src:n.avatarGet(e.avatar)},null,8,["src"]),(0,a._)("div",Yd,[(0,a._)("div",Od,[(0,a._)("div",Qd,(0,$.zw)(e.nickname),1),(0,a._)("div",Kd,(0,$.zw)(n.before(e.date)),1)]),(0,a._)("div",Zd,[(0,a.Wm)(h,{size:"mini",color:"transparent",onClick:t[1]||(t[1]=e=>n.actionShow())},{icon:(0,a.w5)((()=>[(0,a.Wm)(u,{name:"ellipsis",color:"#aaa",size:"0.5rem"})])),_:1})])])]),(0,a._)("div",Jd,[(0,a._)("div",{class:"text p4 van-multi-ellipsis--l3",onClick:t=>n.focus(e.nickname,e.userId)},[e.targetName?((0,a.wg)(),(0,a.iD)("span",em,[tm,(0,a._)("span",sm,(0,$.zw)(e.targetName+":"),1)])):(0,a.kq)("",!0),(0,a.Uk)(" "+(0,$.zw)(e.message),1)],8,Xd)]),(0,a.Wm)(p)])))),128))])])),(0,a._)("div",im,[(0,a.Wm)(f,{"left-icon":"edit",placeholder:"我来说说",onClick:n.focus,disabled:""},null,8,["onClick"])]),(0,a.Wm)(k,{show:l.show,"onUpdate:show":t[3]||(t[3]=e=>l.show=e),position:"top"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{onSubmit:n.onSubmit},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{inset:""},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{modelValue:l.message,"onUpdate:modelValue":[t[2]||(t[2]=e=>l.message=e),n.inputChange],rows:"3",autosize:"",type:"textarea",maxlength:l.word_limit,placeholder:e.placeholder,ref:"commentInput"},null,8,["modelValue","maxlength","placeholder","onUpdate:modelValue"])])),_:1}),(0,a.Wm)(p),(0,a._)("div",am,[(0,a.Wm)(h,{color:"black","native-type":"submit",size:"small"},{default:(0,a.w5)((()=>[om])),_:1})])])),_:1},8,["onSubmit"])])),_:1},8,["show"])])}var nm={name:"BugDetail",inject:["actionShow","avatarGet"],data(){return{id:0,bugDetail:[],loading:!0,show:!1,message:"",word_limit:200,isReply:!1,targetId:0}},methods:{onClickLeft(){this.$router.back()},imgPreview(e,t){e=e.map((e=>this.$store.state.URL+"upload/bugImgs/"+e)),(0,We.e)({images:e,startPosition:t})},before(e){return h(e).format("YYYY[年]MM[月]DD[日] HH:mm")},focus(e,t){t?(this.isReply=!0,this.placeholder="回复 "+e,this.targetId=t):(this.isReply=!1,this.placeholder="走心的评论更容易被看到哦",this.targetId=0),this.show=!0,this.$nextTick((()=>{this.$refs.commentInput.focus()}))},onSubmit(){if(console.log(this.message),0===this.message.trim().length)return void n.F.fail("无意义内容！");n.F.loading({message:"提交中...",overlay:!0,duration:0});const e={userId:this.$store.state.user.userId,message:this.message,targetId:this.targetId,id:this.id};this.$axios.get("addCommentInBug",{params:e}).then((e=>{this.bugDetail.comment.unshift(e),this.show=!1,this.message="",n.F.clear()}))},inputChange(e){e.length>=this.word_limit&&(0,n.F)("字数已达上限，超出内容已隐藏")},async dataGet(){this.bugDetailGet()},async bugDetailGet(){this.$axios.get("bugListGet",{params:{id:this.id}}).then((e=>{this.bugDetail=e,this.$nextTick((()=>{setTimeout((()=>{this.loading=!1}),100)}))}))}},mounted(){const e=this.$route.path.split("/");this.id=e[e.length-1],this.dataGet()}};const rm=(0,k.Z)(nm,[["render",lm],["__scopeId","data-v-429b955f"]]);var cm=rm;const dm=e=>((0,a.dD)("data-v-71f48669"),e=e(),(0,a.Cn)(),e),mm={class:"questionList wrapper pt"},um=dm((()=>(0,a._)("span",null,"已回答",-1)));function hm(e,t,s,i,o,l){const n=(0,a.up)("van-nav-bar"),r=(0,a.up)("van-icon"),c=(0,a.up)("van-cell");return(0,a.wg)(),(0,a.iD)("div",mm,[(0,a.Wm)(n,{title:"问题列表","left-arrow":"",onClickLeft:l.onClickLeft,fixed:""},null,8,["onClickLeft"]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.list,(e=>((0,a.wg)(),(0,a.j4)(c,{"is-link":"",key:e.id,center:"",to:"/questionDetail/"+e.id,label:l.dateShow(e.createdAt)},(0,a.Nv)({title:(0,a.w5)((()=>[(0,a.Wm)(r,{name:"FAQ"===o.type?"fire":"underway",color:"FAQ"===o.type?"red":"blue",style:{"padding-right":"10px"}},null,8,["name","color"]),(0,a._)("span",null,(0,$.zw)(e.question),1)])),_:2},["暂无回答"!==e.answer&&"NAQ"===o.type?{name:"value",fn:(0,a.w5)((()=>[(0,a.Wm)(r,{name:"checked",color:"green"}),um]))}:void 0]),1032,["to","label"])))),128))])}var pm={name:"ContactView",data(){return{list:[],type:""}},methods:{onClickLeft(){this.$router.back()},dateShow(e){return h(e).format("YYYY[年]MM[月]DD[日] HH:mm")}},mounted(){const e=this.$route.path.split("/");this.type=e[e.length-1];const t={type:this.type};this.$axios.get("questionListGet",{params:t}).then((e=>{this.list=e}))}};const gm=(0,k.Z)(pm,[["render",hm],["__scopeId","data-v-71f48669"]]);var fm=gm;const wm=e=>((0,a.dD)("data-v-831aa206"),e=e(),(0,a.Cn)(),e),vm={class:"questionDetail wrapper pt"},km={key:0,class:"top"},ym={class:"nameDateReport"},bm={nameDate:""},Cm={class:"nickname p4b"},Im={class:"time p5"},xm={class:"report"},_m=wm((()=>(0,a._)("p",{class:"p3b title",style:{color:"black"}},"问:",-1))),Lm={class:"p3b text-center"},Am={key:1,class:"qDetail"},Wm=wm((()=>(0,a._)("p",{class:"p3b title",style:{color:"black"}},"问题详情:",-1))),Sm={class:"normal p5"},Dm=wm((()=>(0,a._)("p",{class:"p3b title",style:{color:"black"}},"答:",-1))),$m={class:"btnBox"},Um=(0,a.Uk)("我来回答"),zm={class:"sendBtn"},Fm=(0,a.Uk)(" 发送 ");function Vm(e,t,s,o,l,n){const r=(0,a.up)("van-nav-bar"),c=(0,a.up)("van-image"),d=(0,a.up)("van-icon"),m=(0,a.up)("van-button"),u=(0,a.up)("van-divider"),h=(0,a.up)("van-field"),p=(0,a.up)("van-cell-group"),g=(0,a.up)("van-form"),f=(0,a.up)("van-popup");return(0,a.wg)(),(0,a.iD)("div",vm,[(0,a.Wm)(r,{title:"问题详情","left-arrow":"",onClickLeft:n.onClickLeft,fixed:""},null,8,["onClickLeft"]),!1===l.detail.isHot?((0,a.wg)(),(0,a.iD)("div",km,[(0,a.Wm)(c,{class:"avatar",width:"1rem",height:"1rem",fit:"cover",radius:"5px",src:n.avatarGet(l.detail.avatar)},null,8,["src"]),(0,a._)("div",ym,[(0,a._)("div",bm,[(0,a._)("div",Cm,(0,$.zw)(l.detail.nickname),1),(0,a._)("div",Im,(0,$.zw)(n.dateShow(l.detail.createdAt)),1)]),(0,a._)("div",xm,[(0,a.Wm)(m,{size:"mini",color:"transparent"},{icon:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"ellipsis",color:"#aaa",size:"0.5rem",onClick:t[0]||(t[0]=e=>n.actionShow())})])),_:1})])])])):(0,a.kq)("",!0),_m,(0,a._)("p",Lm,(0,$.zw)(l.detail.question),1),(0,a.Wm)(u),""!==l.detail.desc?((0,a.wg)(),(0,a.iD)("div",Am,[Wm,(0,a._)("p",Sm,(0,$.zw)(l.detail.desc),1),(0,a.Wm)(u)])):(0,a.kq)("",!0),Dm,(0,a._)("p",{class:(0,$.C_)("暂无回答"===l.detail.answer?"text-center p3b":"normal p5")},(0,$.zw)(l.detail.answer),3),(0,a.Wm)(u),(0,a.wy)((0,a._)("div",$m,[(0,a.Wm)(m,{color:"black",onClick:t[1]||(t[1]=e=>l.show=!0)},{default:(0,a.w5)((()=>[Um])),_:1})],512),[[i.F8,1e3===this.$store.state.user.userId]]),(0,a.Wm)(f,{show:l.show,"onUpdate:show":t[3]||(t[3]=e=>l.show=e),position:"top"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{onSubmit:n.onSubmit},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{inset:""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{modelValue:l.answer,"onUpdate:modelValue":t[2]||(t[2]=e=>l.answer=e),rows:"3",autosize:"",type:"textarea",placeholder:"填写你要向Ta回复的内容"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(u),(0,a._)("div",zm,[(0,a.Wm)(m,{color:"black","native-type":"submit"},{default:(0,a.w5)((()=>[Fm])),_:1})])])),_:1},8,["onSubmit"])])),_:1},8,["show"])])}var jm={name:"ContactView",inject:["avatarGet","actionShow"],data(){return{id:0,detail:{},show:!1,answer:""}},methods:{onClickLeft(){this.$router.back()},dateShow(e){return h(e).format("YYYY[年]MM[月]DD[日] HH:mm")},reset(){this.show=!1,this.detail.answer=this.answer,this.answer=""},onSubmit(){r.V.confirm({title:"确定吗",message:"回答后不可修改，确定这样回答吗?"}).then((()=>{let e=n.F.loading({message:"提交中",overlay:!0,duration:0});const t={answer:this.answer,id:this.id};this.$axios.post("answerPost",G().stringify(t)).then((t=>{console.log(t),e.clear(),n.F.success({message:"回答成功！",overlay:!0,onClose:this.reset})}))})).catch((()=>{}))}},mounted(){const e=this.$route.path.split("/");this.id=e[e.length-1];const t={id:this.id};this.$axios.get("questionDetailGet",{params:t}).then((e=>{this.detail=e,console.log(this.detail)}))}};const Bm=(0,k.Z)(jm,[["render",Vm],["__scopeId","data-v-831aa206"]]);var Rm=Bm;const qm={class:"bugDetail wrapper pbt"},Hm={style:{display:"flex","justify-content":"flex-end"}};function Nm(e,t,s,i,o,l){const n=(0,a.up)("van-nav-bar"),r=(0,a.up)("van-switch"),c=(0,a.up)("van-cell"),d=(0,a.up)("van-cell-group");return(0,a.wg)(),(0,a.iD)("div",qm,[(0,a.Wm)(n,{title:"设置","left-arrow":"",onClickLeft:l.onClickLeft,fixed:"",onClickRight:l.onClickRight,"right-text":"保存"},null,8,["onClickLeft","onClickRight"]),(0,a.Wm)(d,{title:"兼容设置"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{title:"ios适配",label:"目前仅对焦点问题进行适配",center:""},{value:(0,a.w5)((()=>[(0,a._)("div",Hm,[(0,a.Wm)(r,{modelValue:o.checked,"onUpdate:modelValue":t[0]||(t[0]=e=>o.checked=e)},null,8,["modelValue"])])])),_:1})])),_:1})])}var Gm={name:"BugDetail",inject:["actionShow","avatarGet"],data(){return{checked:!1}},methods:{onClickLeft(){this.$router.back()},onClickRight(){r.V.confirm({title:"保存设置"}).then((()=>{n.F.loading({message:"保存中...",overlay:!0}),this.$store.state.setup||(this.$store.state.setup={}),this.$store.state.setup.system=this.checked,this.$store.commit("setSetUp",this.$store.state.setup),n.F.clear()})).catch((()=>{}))}},mounted(){n.F.loading({message:"加载设置中...",overlay:!0}),this.checked=!(!this.$store.state.setup||!this.$store.state.setup.system),this.$nextTick((()=>{n.F.clear()}))}};const Tm=(0,k.Z)(Gm,[["render",Nm]]);var Mm=Tm;const Em=[{path:"/admin",name:"admin",component:D,meta:{index:2}},{path:"/comAdd",name:"comAdd",component:E,meta:{index:3}},{path:"/chaAdd",name:"chaAdd",component:se,meta:{index:3}},{path:"/articlesList",name:"articlesList",component:pe,meta:{index:3}},{path:"/article/:id",name:"article",component:Fe,meta:{index:4}},{path:"/announceList",name:"announceList",component:Me,meta:{index:3}},{path:"/login",name:"login",component:hl,meta:{index:2}},{path:"/channelSelect",name:"channelSelect",component:ac,meta:{index:2}},{path:"/register",name:"register",component:Il,meta:{index:3}},{path:"/profileEdit",name:"profileEdit",component:Wl,meta:{index:2}},{path:"/draftList",name:"draftList",component:Jl,meta:{index:2}},{path:"/myCollect",name:"myCollect",component:Sr,meta:{index:2}},{path:"/history",name:"history",component:Pr,meta:{index:2,keepAlive:!0,spe:!0}},{path:"/collectDetail",name:"collectDetail",component:Rr,meta:{index:3,keepAlive:!0,spe:!0}},{path:"/submit",name:"submit",component:Ho,meta:{index:101}},{path:"/post",name:"post",component:il,meta:{index:101}},{path:"/search",name:"/search",component:zc,meta:{index:2}},{path:"/articleHome/:id",name:"articleHome",component:sr,meta:{index:100,keepAlive:!0}},{path:"/personal/:id",name:"personal",component:Ir,meta:{index:100,keepAlive:!0}},{path:"/subscribe/:id/:active",name:"subscribe",component:bc,meta:{index:100,keepAlive:!0}},{path:"/contact",name:"contact",component:Hc,meta:{index:2}},{path:"/feedback",name:"feedback",component:Dd,meta:{index:3}},{path:"/bugDetail/:id",name:"bugDetail",component:cm,meta:{index:4}},{path:"/questionList/:type",name:"questionList",component:fm,meta:{index:4}},{path:"/questionDetail/:id",name:"questionDetail",component:Rm,meta:{index:5}},{path:"/answerList/:id",name:"answerList",component:Wi,meta:{index:2}},{path:"/replyToMe/:id",name:"replyList",component:ea,meta:{index:2}},{path:"/newSubscribe/:id",name:"newSubscribe",component:pa,meta:{index:2}},{path:"/directMessage/:id",name:"directMessage",component:Aa,meta:{index:100,keepAlive:!0}},{path:"/communityItem/:id",name:"communityItem",component:Ms,meta:{index:2,keepAlive:!0,spe:!0}},{path:"/",name:"home",component:ps,meta:{index:1,keepAlive:!0,needRefresh:!1,dynamicScroll:0,spe:!0}},{path:"/my",name:"my",component:no,meta:{index:1,keepAlive:!0,spe:!0}},{path:"/messageNotice",name:"messageNotice",component:ni,meta:{index:1,keepAlive:!0,spe:!0}},{path:"/community",name:"community",component:Rs,meta:{index:1,keepAlive:!0,spe:!0}},{path:"/setup",name:"setup",component:Mm,meta:{index:2}}],Pm=(0,_.p7)({history:(0,_.r5)(),routes:Em});Pm.beforeEach((e=>{"/"===e.path||"/community"===e.path||"/my"===e.path||"/messageNotice"===e.path?sessionStorage["quit"]=1:sessionStorage["quit"]=0}));var Ym=Pm,Om=s(65);const Qm=(e,t)=>{"object"===typeof t&&(t=JSON.stringify(t)),window.localStorage.setItem(e,t)},Km=e=>{const t=window.localStorage.getItem(e);try{return JSON.parse(t)}catch(s){return t}},Zm=s(6265),Jm="USER_KEY",Xm="HISTORY_KEY",eu="SCROLL_KEY",tu="DATE_KEY",su="SETUP_KEY";var iu=(0,Om.MT)({state:{size:10,URL:"http://47.102.115.96:1337/",user:Km(Jm),history:Km(Xm),lastDate:Km(tu),include:[],setup:Km(su),imageType:["image/jpeg","image/png","image/gif","image/webp"],scrollLocation:Km(eu),communityClass:["推荐","生活","游戏","数码科技","影视动漫"],isBack:Km("BACK_KEY")},getters:{},mutations:{setUser(e,t){e.user=t,Qm(Jm,JSON.stringify(e.user))},setHistory(e,t){e.history=t,Qm(Xm,JSON.stringify(e.history))},setLastDate(e,t){e.lastDate=t,Qm(tu,JSON.stringify(e.lastDate))},setSetUp(e,t){e.setup=t,Qm(su,JSON.stringify(e.setup))},setScroll(e,t){e.scrollLocation=t,Qm(eu,e.scrollLocation)},setBack(e,t){e.isBack=t,Qm("BACK_KEY",e.isBack)},includeAdd(e,t){-1===e.include.indexOf(t)&&e.include.push(t)},includeDel(e,t){e.include.indexOf(t),e.include.splice(e.include.indexOf(t),1)},UserRefresh(e,t){let s;console.log("data:",t),Zm.get(e.URL+"users/userDataRefresh",{params:{userId:t}}).then((e=>{console.log(e),s=e,console.log(s.data),this.commit("setUser",s.data)}))}},actions:{},modules:{}}),au=s(1738),ou=s(8791);s(5110),s(3434);const lu=(0,i.ri)(x),nu=xo().create({baseURL:"http://47.102.115.96:1337/users/",timeout:15e3});nu.interceptors.request.use((e=>e)),nu.interceptors.response.use((e=>e.data));const ru=xo().create({baseURL:"http://47.102.115.96:1337/admins/",timeout:15e3});ru.interceptors.request.use((e=>e)),ru.interceptors.response.use((e=>e.data)),lu.config.globalProperties.$axios=nu,lu.config.globalProperties.$axios2=ru,lu.config.globalProperties.$util=h,lu.use(iu).use(Ym).use(ou.ZP).use(au.J).mount("#app")},4095:function(e,t,s){"use strict";e.exports=s.p+"img/contact.bbc513e0.jpg"},6876:function(e){"use strict";e.exports="data:image/png;base64,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"},7205:function(e){"use strict";e.exports="data:image/png;base64,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"},4654:function(){}},t={};function s(i){var a=t[i];if(void 0!==a)return a.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,i,a,o){if(!i){var l=1/0;for(d=0;d<e.length;d++){i=e[d][0],a=e[d][1],o=e[d][2];for(var n=!0,r=0;r<i.length;r++)(!1&o||l>=o)&&Object.keys(s.O).every((function(e){return s.O[e](i[r])}))?i.splice(r--,1):(n=!1,o<l&&(l=o));if(n){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[i,a,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.p=""}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,o,l=i[0],n=i[1],r=i[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(a in n)s.o(n,a)&&(s.m[a]=n[a]);if(r)var d=r(s)}for(t&&t(i);c<l.length;c++)o=l[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(d)},i=self["webpackChunkdinoeye"]=self["webpackChunkdinoeye"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(4780)}));i=s.O(i)})();
//# sourceMappingURL=app.ad1eac4b.js.map